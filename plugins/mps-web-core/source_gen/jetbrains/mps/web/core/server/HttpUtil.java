package jetbrains.mps.web.core.server;

/*Generated by MPS */

import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.Headers;
import java.io.IOException;
import org.apache.log4j.Priority;
import java.io.OutputStream;
import org.apache.log4j.Logger;
import org.apache.log4j.LogManager;

public class HttpUtil {
  public static void printContent(String content, String contentType, int responseCode, HttpExchange exchange) {
    Headers responseHeaders = exchange.getResponseHeaders();
    responseHeaders.set("Content-Type", contentType);
    try {
      exchange.sendResponseHeaders(responseCode, 0);
    } catch (IOException e) {
      if (LOG.isEnabledFor(Priority.ERROR)) {
        LOG.error("Could not send response headers", e);
      }
    }

    OutputStream responseBody = exchange.getResponseBody();
    try {
      responseBody.write(content.getBytes());
    } catch (IOException e) {
      if (LOG.isEnabledFor(Priority.ERROR)) {
        LOG.error("Could not write response", e);
      }
    } finally {
      try {
        responseBody.close();
      } catch (IOException e) {
        if (LOG.isEnabledFor(Priority.ERROR)) {
          LOG.error("Could not close response", e);
        }
      }
    }
  }

  protected static Logger LOG = LogManager.getLogger(HttpUtil.class);
}
