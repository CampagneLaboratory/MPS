package jetbrains.mps.lang.test.util;

/*Generated by MPS */

import org.junit.runner.notification.RunListener;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.backports.LinkedList;
import org.junit.runner.Result;

public class RunEventsDispatcher extends RunListener {
  private List<RunListener> myListeners = ListSequence.fromList(new LinkedList<RunListener>());
  private static RunEventsDispatcher ourInstance = new RunEventsDispatcher();

  private RunEventsDispatcher() {
  }

  public static RunEventsDispatcher getInstance() {
    return ourInstance;
  }

  public void addListener(RunListener listener) {
    ListSequence.fromList(myListeners).addElement(listener);
  }

  public void removeListener(RunListener listener) {
    ListSequence.fromList(myListeners).removeElement(listener);
  }

  @Override
  public void testRunFinished(Result result) throws Exception {
    for (RunListener listener : ListSequence.fromList(myListeners)) {
      listener.testRunFinished(result);
    }
  }
}
