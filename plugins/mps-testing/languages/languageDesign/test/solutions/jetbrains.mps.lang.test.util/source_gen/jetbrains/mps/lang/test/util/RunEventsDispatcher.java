package jetbrains.mps.lang.test.util;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.backports.LinkedList;

public class RunEventsDispatcher {
  private List<MpsRunListener> myListeners = ListSequence.fromList(new LinkedList<MpsRunListener>());
  private static RunEventsDispatcher ourInstance = new RunEventsDispatcher();

  private RunEventsDispatcher() {
  }

  public static RunEventsDispatcher getInstance() {
    return ourInstance;
  }

  public void onTestRunDone() {
    assert ListSequence.fromList(myListeners).count() <= 1;
    for (MpsRunListener listener : ListSequence.fromList(myListeners)) {
      listener.testRunDone();
    }
  }

  public void addListener(MpsRunListener listener) {
    ListSequence.fromList(myListeners).addElement(listener);
  }

  public void removeListener(MpsRunListener listener) {
    ListSequence.fromList(myListeners).removeElement(listener);
  }
}
