package jetbrains.mps.nodeEditor.cells.jetpad;

/*Generated by MPS */

import jetbrains.jetpad.projectional.view.GroupView;
import jetbrains.jetpad.geometry.Rectangle;
import jetbrains.jetpad.projectional.view.PolyLineView;
import jetbrains.jetpad.values.Color;
import jetbrains.jetpad.geometry.Vector;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class NodeDecoratorView extends RectDecoratorView {
  public final GroupView inputPortDecotatorView = new GroupView();
  public final GroupView outputPortDecotatorView = new GroupView();

  public NodeDecoratorView() {
    children().add(inputPortDecotatorView);
    children().add(outputPortDecotatorView);
  }




  private void fillSelectionView(Rectangle bounds) {
    mySelectionView.children().clear();
    PolyLineView selectionFrame = new PolyLineView();
    selectionFrame.color().set(Color.GRAY);
    updateSelectionPolyline(selectionFrame, bounds);
    mySelectionView.children().add(selectionFrame);
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(-1, -1))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(bounds.dimension.x / 2, -1))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(bounds.dimension.x, -1))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(bounds.dimension.x, bounds.dimension.y / 2))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(bounds.dimension.x, bounds.dimension.y))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(bounds.dimension.x / 2, bounds.dimension.y))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(-1, bounds.dimension.y))));
    mySelectionView.children().add(createSelectionRect(bounds.origin.add(new Vector(-1, bounds.dimension.y / 2))));
  }

  public void updateSelectionDecorator(Rectangle bounds) {
    if (mySelectionView == null) {
      return;
    }
    if (eq_ljwq4f_a0b0g(mySelectionView.bounds().get().dimension, bounds.dimension)) {
      if (neq_ljwq4f_a0a0b0g(mySelectionView.bounds().get().origin, bounds.origin)) {
        mySelectionView.moveTo(bounds.origin);
      }
    } else {
      fillSelectionView(bounds);
    }
    mySelectionView.invalidate();
  }

  private void updateSelectionPolyline(PolyLineView polylineView, Rectangle bounds) {
    polylineView.points.clear();
    polylineView.points.addAll(ListSequence.fromListAndArray(new ArrayList<Vector>(), new Vector(bounds.origin.x - 1, bounds.origin.y - 1), new Vector(bounds.origin.x + bounds.dimension.x, bounds.origin.y - 1), new Vector(bounds.origin.x + bounds.dimension.x, bounds.origin.y + bounds.dimension.y), new Vector(bounds.origin.x - 1, bounds.origin.y + bounds.dimension.y), new Vector(bounds.origin.x - 1, bounds.origin.y - 1)));
  }

  public void updateErrorDecorator(Rectangle bounds) {
    if (myErrorPolylineView == null) {
      return;
    }
    if (eq_ljwq4f_a0b0i(myErrorPolylineView.bounds().get().dimension, bounds.dimension)) {
      if (neq_ljwq4f_a0a0b0i(myErrorPolylineView.bounds().get().origin, bounds.origin)) {
        myErrorPolylineView.moveTo(bounds.origin);
      }
    } else {
      updateSelectionPolyline(myErrorPolylineView, bounds);
    }
    myErrorPolylineView.invalidate();
  }




  private static boolean neq_ljwq4f_a0a0b0g(Object a, Object b) {
    return !((a != null ? a.equals(b) : a == b));
  }

  private static boolean eq_ljwq4f_a0b0g(Object a, Object b) {
    return (a != null ? a.equals(b) : a == b);
  }

  private static boolean neq_ljwq4f_a0a0b0i(Object a, Object b) {
    return !((a != null ? a.equals(b) : a == b));
  }

  private static boolean eq_ljwq4f_a0b0i(Object a, Object b) {
    return (a != null ? a.equals(b) : a == b);
  }
}
