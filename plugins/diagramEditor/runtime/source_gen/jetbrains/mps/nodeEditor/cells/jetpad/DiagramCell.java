package jetbrains.mps.nodeEditor.cells.jetpad;

/*Generated by MPS */

import jetbrains.jetpad.projectional.diagram.view.DiagramView;
import jetbrains.mps.nodeEditor.EditorCell_WithComponent;
import jetbrains.jetpad.projectional.view.awt.ViewContainerComponent;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import javax.swing.JComponent;
import java.awt.Dimension;

public abstract class DiagramCell extends GenericMapperCell<DiagramView> implements EditorCell_WithComponent {
  private ViewContainerComponent myComponent;


  public DiagramCell(EditorContext editorContext, SNode node, ViewContainerComponent component) {
    super(editorContext, node);
    myComponent = component;
  }

  public JComponent getComponent() {
    return myComponent;
  }

  @Override
  protected void relayoutImpl() {
    super.relayoutImpl();
    getComponent().doLayout();
    Dimension preferredSize = getComponent().getPreferredSize();
    getComponent().setSize(preferredSize);
    setWidth(getComponent().getWidth() + myGapLeft + myGapRight);
    setHeight(getComponent().getHeight());
  }

  @Override
  public void onAdd() {
    super.onAdd();
    getEditor().getCellTracker().addComponentCell(this);
  }

  @Override
  public void onRemove() {
    getEditor().getCellTracker().removeComponentCell(this);
    super.onRemove();
  }

  @Override
  public void setX(int x) {
    getComponent().setLocation(x, myComponent.getY());
    super.setX(x);
  }

  @Override
  public void setY(int y) {
    getComponent().setLocation(myComponent.getX(), y);
    super.setY(y);
  }

  @Override
  public void moveTo(int x, int y) {
    super.moveTo(x, y);
    getComponent().setLocation(myX, myY);
  }

  @Override
  public boolean isDrawBorder() {
    return false;
  }


}
