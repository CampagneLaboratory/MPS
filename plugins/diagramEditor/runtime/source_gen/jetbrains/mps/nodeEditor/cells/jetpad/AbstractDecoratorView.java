package jetbrains.mps.nodeEditor.cells.jetpad;

/*Generated by MPS */

import jetbrains.jetpad.projectional.view.GroupView;
import jetbrains.jetpad.projectional.view.View;
import jetbrains.jetpad.geometry.Vector;
import jetbrains.jetpad.projectional.view.PolyLineView;
import jetbrains.jetpad.values.Color;

public abstract class AbstractDecoratorView extends GroupView {
  protected static final int SELECTION_SQUARE_HALF_WIDTH = 3;
  protected GroupView myErrorView;
  protected GroupView mySelectionView;

  protected View getSelectionView() {
    if (mySelectionView == null) {
      mySelectionView = createSelectionView();
    }
    return mySelectionView;
  }

  protected View getErrorView() {
    if (myErrorView == null) {
      myErrorView = createErrorView();
    }
    return myErrorView;
  }



  protected abstract GroupView createSelectionView();

  protected abstract GroupView createErrorView();





  public void setSelected(boolean isSelected) {
    if (isSelected) {
      children().add(getSelectionView());
    } else {
      children().remove(getSelectionView());
    }
  }



  public void setError(boolean isError) {
    if (isError) {
      children().add(getErrorView());
    } else {
      children().remove(getErrorView());
    }
  }



  protected View createSelectionRect(Vector origin) {
    PolyLineView selectionRect = new PolyLineView();
    selectionRect.background().set(Color.LIGHT_GRAY);
    selectionRect.color().set(Color.GRAY);
    selectionRect.points.add(new Vector(origin.x - SELECTION_SQUARE_HALF_WIDTH, origin.y - SELECTION_SQUARE_HALF_WIDTH));
    selectionRect.points.add(new Vector(origin.x + SELECTION_SQUARE_HALF_WIDTH, origin.y - SELECTION_SQUARE_HALF_WIDTH));
    selectionRect.points.add(new Vector(origin.x + SELECTION_SQUARE_HALF_WIDTH, origin.y + SELECTION_SQUARE_HALF_WIDTH));
    selectionRect.points.add(new Vector(origin.x - SELECTION_SQUARE_HALF_WIDTH, origin.y + SELECTION_SQUARE_HALF_WIDTH));
    selectionRect.points.add(new Vector(origin.x - SELECTION_SQUARE_HALF_WIDTH, origin.y - SELECTION_SQUARE_HALF_WIDTH));
    return selectionRect;
  }


}
