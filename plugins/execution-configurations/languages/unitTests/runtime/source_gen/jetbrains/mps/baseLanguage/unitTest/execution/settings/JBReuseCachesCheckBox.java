package jetbrains.mps.baseLanguage.unitTest.execution.settings;

/*Generated by MPS */

import com.intellij.ui.components.JBCheckBox;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import jetbrains.mps.baseLanguage.unitTest.execution.client.RunCachesManager;

public class JBReuseCachesCheckBox extends JBCheckBox {
  private final JBLightExecCheckBox myLightExecCheckBox;
  public JBReuseCachesCheckBox(JBLightExecCheckBox checkBox, String text, boolean selected) {
    super(text, selected);
    myLightExecCheckBox = checkBox;
    myLightExecCheckBox.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent p0) {
        JBReuseCachesCheckBox.this.setEnabled(JBReuseCachesCheckBox.this.canReuseCaches());
      }
    });
  }

  @Override
  public boolean isEnabled() {
    return canReuseCaches();
  }

  private boolean canReuseCaches() {
    if (myLightExecCheckBox == null) {
      return false;
    }
    return !(RunCachesManager.isLocked()) && !(myLightExecCheckBox.isSelected());
  }

}
