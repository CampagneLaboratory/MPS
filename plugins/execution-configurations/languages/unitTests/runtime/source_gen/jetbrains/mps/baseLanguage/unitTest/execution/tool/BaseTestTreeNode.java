package jetbrains.mps.baseLanguage.unitTest.execution.tool;

/*Generated by MPS */

import jetbrains.mps.ide.ui.tree.MPSTreeNode;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.smodel.IOperationContext;
import javax.swing.Icon;
import org.jetbrains.mps.openapi.module.SRepository;

public abstract class BaseTestTreeNode extends MPSTreeNode {
  private TestState myState = TestState.NOT_RAN;

  public BaseTestTreeNode(@NotNull IOperationContext context) {
    super(context);
  }

  @Override
  protected void doUpdatePresentation() {
    Icon icon = myState.getIcon();
    if (icon != null) {
      setIcon(icon);
    }
  }

  public void setState(TestState state) {
    myState = state;
    SRepository repository = getOperationContext().getProject().getRepository();
    repository.getModelAccess().runReadInEDT(new Runnable() {
      public void run() {
        renewPresentation();
      }
    });
  }

  public TestState getState() {
    return myState;
  }
}
