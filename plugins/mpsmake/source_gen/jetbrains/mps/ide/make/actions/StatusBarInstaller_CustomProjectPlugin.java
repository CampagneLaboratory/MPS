package jetbrains.mps.ide.make.actions;

/*Generated by MPS */

import jetbrains.mps.plugins.pluginparts.custom.BaseCustomProjectPlugin;
import com.intellij.openapi.wm.StatusBar;
import java.util.List;
import com.intellij.openapi.wm.StatusBarWidget;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.project.MPSProject;

public class StatusBarInstaller_CustomProjectPlugin extends BaseCustomProjectPlugin {
  private StatusBar myStatusBar;
  private List<StatusBarWidget> myWidgets = ListSequence.fromList(new ArrayList<StatusBarWidget>());

  public StatusBarInstaller_CustomProjectPlugin() {
  }

  public void doInit(MPSProject project) {
    StatusBarInstaller_CustomProjectPlugin.this.myStatusBar = StatusBarHelper.getStatusBar(project);
    if (StatusBarInstaller_CustomProjectPlugin.this.myStatusBar == null) {
      return;
    }

    if (SaveTransientModelsPreferences.isShowStatusBarIcon()) {
      ListSequence.fromList(StatusBarInstaller_CustomProjectPlugin.this.myWidgets).addElement(new TransientModelsWidget(StatusBarInstaller_CustomProjectPlugin.this.myStatusBar));
    }

    for (StatusBarWidget widget : ListSequence.fromList(StatusBarInstaller_CustomProjectPlugin.this.myWidgets)) {
      StatusBarInstaller_CustomProjectPlugin.this.myStatusBar.addWidget(widget);
    }
  }

  public void doDispose(MPSProject project) {
    for (StatusBarWidget widget : ListSequence.fromList(StatusBarInstaller_CustomProjectPlugin.this.myWidgets)) {
      StatusBarInstaller_CustomProjectPlugin.this.myStatusBar.removeWidget(widget.ID());
    }
    ListSequence.fromList(StatusBarInstaller_CustomProjectPlugin.this.myWidgets).clear();
    StatusBarInstaller_CustomProjectPlugin.this.myStatusBar = null;
  }
}
