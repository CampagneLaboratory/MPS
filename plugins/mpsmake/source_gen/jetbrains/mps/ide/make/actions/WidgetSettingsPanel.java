package jetbrains.mps.ide.make.actions;

/*Generated by MPS */

import javax.swing.JPanel;
import javax.swing.JCheckBox;
import com.intellij.ui.awt.RelativePoint;
import com.intellij.openapi.ui.popup.JBPopup;
import com.intellij.openapi.ui.popup.JBPopupFactory;
import com.intellij.openapi.util.Computable;

public class WidgetSettingsPanel extends JPanel {
  private final JCheckBox myShowPopupBox;

  public WidgetSettingsPanel() {
    myShowPopupBox = new JCheckBox("Show popup on generation", SaveTransientModelsPreferences.isShowPopup());
    add(myShowPopupBox);
  }

  public void showComponent(RelativePoint point) {
    final JBPopup popup = JBPopupFactory.getInstance().createComponentPopupBuilder(this, this).setRequestFocus(true).setMovable(true).setCancelCallback(new Computable<Boolean>() {
      public Boolean compute() {
        onClose();
        return Boolean.TRUE;
      }
    }).createPopup();
    popup.show(point);
  }

  private void onClose() {
    SaveTransientModelsPreferences.setShowPopup(myShowPopupBox.isSelected());
  }
}
