package jetbrains.mps.ide.make.actions;

/*Generated by MPS */

import com.intellij.openapi.wm.StatusBar;

public class TransientModelsWidgetInstaller {
  private static TransientModelsWidgetInstaller INSTANCE;

  private StatusBar myStatusBar;
  private TransientModelsWidget myWidget;
  private boolean myInstalled = false;

  public TransientModelsWidgetInstaller() {
    INSTANCE = this;
  }

  public void init(StatusBar bar) {
    myStatusBar = bar;
    myWidget = new TransientModelsWidget(bar);
    update();
  }

  public void dispose() {
    uninstallWidget();
  }

  private void installWidget() {
    myStatusBar.addWidget(myWidget);
    myInstalled = true;
  }

  private void uninstallWidget() {
    myStatusBar.removeWidget(myWidget.ID());
    myInstalled = false;
  }

  public void updateWidget() {
    myWidget.update();
  }

  public void update() {
    if (myInstalled && !(SaveTransientModelsPreferences.isShowStatusBarIcon())) {
      uninstallWidget();
    } else if (!(myInstalled) && SaveTransientModelsPreferences.isShowStatusBarIcon()) {
      installWidget();
    }
    updateWidget();
  }

  public TransientModelsWidget getWidget() {
    return myWidget;
  }

  public static TransientModelsWidgetInstaller getInstaller() {
    return INSTANCE;
  }
}
