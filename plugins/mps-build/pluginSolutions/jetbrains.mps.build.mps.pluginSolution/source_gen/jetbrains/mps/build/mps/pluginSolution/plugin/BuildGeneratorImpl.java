package jetbrains.mps.build.mps.pluginSolution.plugin;

/*Generated by MPS */

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import com.intellij.openapi.project.Project;
import jetbrains.mps.smodel.IOperationContext;
import jetbrains.mps.project.MPSExtentions;
import jetbrains.mps.smodel.ModelAccess;
import jetbrains.mps.smodel.SModelDescriptor;
import com.intellij.openapi.progress.EmptyProgressIndicator;
import jetbrains.mps.smodel.descriptor.EditableSModelDescriptor;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.openapi.navigation.NavigationSupport;
import jetbrains.mps.ide.project.ProjectHelper;
import jetbrains.mps.smodel.SModel;
import jetbrains.mps.project.structure.modules.ModuleDescriptor;
import jetbrains.mps.smodel.ModuleRepositoryFacade;
import jetbrains.mps.smodel.Language;
import jetbrains.mps.project.structure.modules.Dependency;
import jetbrains.mps.smodel.MPSModuleRepository;
import jetbrains.mps.project.ModuleId;
import jetbrains.mps.smodel.SModelRepository;
import jetbrains.mps.smodel.SModelReference;
import com.intellij.openapi.progress.ProgressIndicator;
import jetbrains.mps.project.Solution;
import com.intellij.openapi.vfs.VirtualFile;
import java.io.File;
import jetbrains.mps.project.MPSProject;
import java.util.List;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.build.util.Context;
import jetbrains.mps.build.util.RelativePathHelper;
import java.util.Set;
import java.util.LinkedHashSet;
import com.intellij.openapi.application.PathMacros;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import jetbrains.mps.internal.collections.runtime.ISelector;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.build.mps.util.PathConverter;
import jetbrains.mps.build.mps.util.VisibleModules;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.build.mps.util.ModuleLoader;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.project.IModule;
import java.util.Map;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import java.util.HashSet;
import jetbrains.mps.smodel.SModelUtil_new;
import jetbrains.mps.project.GlobalScope;
import jetbrains.mps.smodel.SReference;
import jetbrains.mps.smodel.SNodeId;
import jetbrains.mps.lang.typesystem.runtime.HUtil;

public class BuildGeneratorImpl extends AbstractBuildGenerator {
  protected static Log log = LogFactory.getLog(BuildGeneratorImpl.class);

  private final Project myProject;
  private final IOperationContext myOperationContext;

  public BuildGeneratorImpl(Project project, IOperationContext context) {
    myProject = project;
    myOperationContext = context;
    String projectName = this.myProject.getName();
    if (projectName.endsWith(MPSExtentions.DOT_MPS_PROJECT)) {
      projectName = projectName.substring(0, projectName.length() - MPSExtentions.DOT_MPS_PROJECT.length());
    }
    setProjectName(projectName);
    setValidDefaultSolutionName(projectName);
  }

  public void generate() {
    ModelAccess.instance().runCommandInEDT(new Runnable() {
      public void run() {
        SModelDescriptor descriptor = getSModelDescriptor(new EmptyProgressIndicator());

        addRequiredImports(descriptor.getSModel(), descriptor.getModule().getModuleDescriptor());

        final EditableSModelDescriptor targetModelDescriptor = ((EditableSModelDescriptor) descriptor);
        SNode buildProject = createMPSLayout(targetModelDescriptor, BuildGeneratorImpl.this.getProjectName(), BuildGeneratorImpl.this.myProject.getBaseDir().getPath(), BuildGeneratorImpl.this.getModules());

        ModelAccess.instance().runWriteActionInCommand(new Runnable() {
          public void run() {
            targetModelDescriptor.getModule().save();
            targetModelDescriptor.save();
          }
        });

        NavigationSupport.getInstance().openNode(myOperationContext, buildProject, true, true);

        ProjectHelper.toMPSProject(myProject).addModule(descriptor.getModule().getModuleReference());

      }
    }, ProjectHelper.toMPSProject(myProject));
  }

  private void addRequiredImports(SModel smodel, ModuleDescriptor moduleDescriptor) {
    moduleDescriptor.getUsedLanguages().add(ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.build", Language.class).getModuleReference());
    moduleDescriptor.getUsedLanguages().add(ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.build.mps", Language.class).getModuleReference());
    smodel.addLanguage(ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.build", Language.class).getModuleReference());
    smodel.addLanguage(ModuleRepositoryFacade.getInstance().getModule("jetbrains.mps.build.mps", Language.class).getModuleReference());

    moduleDescriptor.getDependencies().add(new Dependency(MPSModuleRepository.getInstance().getModuleById(ModuleId.fromString("422c2909-59d6-41a9-b318-40e6256b250f")).getModuleReference(), false));
    smodel.addModelImport(SModelRepository.getInstance().getModelDescriptor(new SModelReference("jetbrains.mps.ide.build", "")).getSModel().getModelDescriptor().getSModelReference(), false);
  }

  public SModelDescriptor getSModelDescriptor(ProgressIndicator indicator) {
    if (getCreateModel()) {
      Solution solution;
      if (getCreateSolution()) {
        VirtualFile projectBaseDir = myProject.getBaseDir();
        //  get solution 
        String solutionName = getNewSolutionName();
        String solutionBaseDir = projectBaseDir.getPath() + File.separator + "solutions" + File.separator + solutionName;
        indicator.setText("Creating Solution...");
        solution = BuildGeneratorUtil.createSolution(myProject.getComponent(MPSProject.class), solutionName, solutionBaseDir);
      } else {
        solution = getSolution();
      }
      indicator.setText("Creating Model...");
      return BuildGeneratorUtil.createModel(getNewModelName(), solution);
    } else {
      return this.getModel();
    }
  }

  private void setValidDefaultSolutionName(String projectName) {
    String solutionNamePrefix = projectName + ".build";
    String solutionName = solutionNamePrefix;
    int count = 0;
    while (!(this.isValidSolutionName(solutionName))) {
      solutionName = solutionNamePrefix + count;
      count++;
    }
    this.setNewSolutionName(solutionName);
  }

  protected SNode createMPSLayout(SModelDescriptor targetModelDescriptor, String name, String basedir, List<NodeData> selectedData) {
    // setup build project 
    SNode buildProject = SConceptOperations.createNewNode("jetbrains.mps.build.structure.BuildProject", null);
    SPropertyOperations.set(buildProject, "name", name);
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "plugins", true)).addElement(SConceptOperations.createNewNode("jetbrains.mps.build.structure.BuildJavaPlugin", null));
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "plugins", true)).addElement(SConceptOperations.createNewNode("jetbrains.mps.build.mps.structure.BuildMPSPlugin", null));

    // internal base dir is a project base dir 
    SModel targetSModel = targetModelDescriptor.getSModel();
    try {
      String relativeToModuleProjectPath = Context.defaultContext().getRelativePathHelper(targetSModel).makeRelative(myProject.getBasePath());
      SPropertyOperations.set(buildProject, "internalBaseDirectory", relativeToModuleProjectPath);
    } catch (RelativePathHelper.PathException e) {
      if (log.isWarnEnabled()) {
        log.warn("Can't calculate project path relative to module " + targetModelDescriptor.getModule(), e);
      }
    }

    // deps and macro 
    Set<String> userMacroNames = new LinkedHashSet<String>(PathMacros.getInstance().getUserMacroNames());
    List<SNode> macros = new ArrayList<SNode>();
    List<SNode> dependencies = new ArrayList<SNode>();
    SNode dateMacro = null;
    SNode buildNumber = null;
    SNode branding = null;

    if (eq_un708i_a0s0e(getDependencyKind(), DependencyStep.DependencyKind.MPS)) {
      SNode macro = new BuildGeneratorImpl.QuotationClass_un708i_a0a0a81a4().createNode();
      ListSequence.fromList(macros).addElement(macro);
      ListSequence.fromList(dependencies).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0c0s0e().createNode(macro));
      userMacroNames.remove("mps_home");
    } else if (eq_un708i_a0a81a4(getDependencyKind(), DependencyStep.DependencyKind.IDEA)) {
      SNode macro = new BuildGeneratorImpl.QuotationClass_un708i_a0a0a0s0e().createNode();
      ListSequence.fromList(macros).addElement(macro);
      userMacroNames.remove("idea_home");
      ListSequence.fromList(dependencies).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0d0a81a4().createNode(macro));
      macro = new BuildGeneratorImpl.QuotationClass_un708i_a0a4a0s0e().createNode(macro);
      ListSequence.fromList(macros).addElement(macro);
      userMacroNames.remove("plugins_home");
      ListSequence.fromList(dependencies).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0h0a81a4().createNode(macro));
    } else if (eq_un708i_a0b81a4(getDependencyKind(), DependencyStep.DependencyKind.STANDALONE)) {
      dateMacro = new BuildGeneratorImpl.QuotationClass_un708i_a0a0a1s0e().createNode();
      ListSequence.fromList(macros).addElement(dateMacro);
      buildNumber = new BuildGeneratorImpl.QuotationClass_un708i_a0a2a1s0e().createNode(name + "-SNAPSHOT");
      ListSequence.fromList(macros).addElement(buildNumber);
      SNode macro = new BuildGeneratorImpl.QuotationClass_un708i_a0a4a1s0e().createNode();
      ListSequence.fromList(macros).addElement(macro);
      ListSequence.fromList(dependencies).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0g0b81a4().createNode(macro));
      userMacroNames.remove("mps_home");
      userMacroNames.remove("date");
      userMacroNames.remove("build.number");
      branding = new BuildGeneratorImpl.QuotationClass_un708i_a0a01a1s0e().createNode(buildNumber, name, name, name, dateMacro);
      ListSequence.fromList(SLinkOperations.getTargets(buildProject, "parts", true)).addElement(branding);
    }
    for (String macro : SetSequence.fromSet(userMacroNames)) {
      ListSequence.fromList(macros).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0a0t0e().createNode(macro));
    }
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "macros", true)).addSequence(ListSequence.fromList(macros));
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "dependencies", true)).addSequence(ListSequence.fromList(dependencies));

    // project structure and layout 
    Set<ModuleData> moduleData = SetSequence.fromSet(new LinkedHashSet<ModuleData>());
    extractModules(selectedData, moduleData);
    SNode group = new BuildGeneratorImpl.QuotationClass_un708i_a0a62a4().createNode(SetSequence.fromSet(moduleData).select(new ISelector<ModuleData, SNode>() {
      public SNode select(ModuleData it) {
        return createModuleNode(it);
      }
    }).toListSequence(), name);
    SNode plugin = new BuildGeneratorImpl.QuotationClass_un708i_a0a72a4().createNode(name, group, name, name);

    SLinkOperations.setNewChild(buildProject, "layout", "jetbrains.mps.build.structure.BuildLayout");
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "parts", true)).addElement(plugin);
    ListSequence.fromList(SLinkOperations.getTargets(buildProject, "parts", true)).addElement(group);
    if (eq_un708i_a0gb0e(getDependencyKind(), DependencyStep.DependencyKind.STANDALONE)) {
      ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(buildProject, "layout", true), "children", true)).addSequence(ListSequence.fromList(SLinkOperations.getTargets(new BuildGeneratorImpl.QuotationClass_un708i_a0a0a0a0gb0e().createNode(branding, plugin, buildNumber, dateMacro), "children", true)));
    } else {
      ListSequence.fromList(SLinkOperations.getTargets(SLinkOperations.getTarget(buildProject, "layout", true), "children", true)).addElement(new BuildGeneratorImpl.QuotationClass_un708i_a0a0a0a23a4().createNode(name + ".zip", plugin));
    }

    // add mps layout to the target model 
    SModelOperations.addRootNode(targetSModel, buildProject);

    PathConverter pathConverter = new PathConverter(buildProject);

    VisibleModules visible = new VisibleModules(buildProject, null);
    visible.collect();
    for (SNode module : ListSequence.fromList(SNodeOperations.getDescendants(buildProject, "jetbrains.mps.build.mps.structure.BuildMps_Module", false, new String[]{}))) {
      try {
        new ModuleLoader(module, visible, pathConverter, null).importRequired();
      } catch (ModuleLoader.ModuleLoaderException ex) {
        if (log.isErrorEnabled()) {
          log.error(ex.getMessage());
        }
      }
    }

    return buildProject;
  }

  @Nullable
  public SNode createComponent(NodeData data, SModel targetSModel, Set<SNode> modules) {
    if (data instanceof ModuleData) {
      SNode moduleNode = createModuleNode((ModuleData) data);
      if (moduleNode == null) {
        return null;
      }
      SetSequence.fromSet(modules).addElement(moduleNode);
      return new BuildGeneratorImpl.QuotationClass_un708i_a0d0a0f().createNode(moduleNode);
    } else if (data instanceof NamespaceData) {
      String namespace = ((NamespaceData) data).getText();
      return new BuildGeneratorImpl.QuotationClass_un708i_a0b0a0a5().createNode(namespace);
    }
    return null;
  }

  @Nullable
  private SNode createModuleNode(ModuleData moduleData) {
    IModule module = moduleData.getModule();

    SNode path;
    try {
      path = createPathFromFullPath(module.getDescriptorFile().getPath());
    } catch (RelativePathHelper.PathException e) {
      if (log.isWarnEnabled()) {
        log.warn("Can't make relative path from build model base directory to module " + module, e);
      }
      return null;
    }

    if (module instanceof Solution) {
      return new BuildGeneratorImpl.QuotationClass_un708i_a0a0f0g().createNode(path);
    } else if (module instanceof Language) {
      return new BuildGeneratorImpl.QuotationClass_un708i_a0a0a5a6().createNode(path);
    } else {
      return new BuildGeneratorImpl.QuotationClass_un708i_a0a0a5a6_0().createNode(path);
    }
  }

  private SNode createPathFromFullPath(String fullPath) throws RelativePathHelper.PathException {
    return createPath(new RelativePathHelper(myProject.getBasePath()).makeRelative(fullPath));
  }

  private SNode createPath(String relativePath) {
    String[] parts = relativePath.split("/");
    SNode path = new BuildGeneratorImpl.QuotationClass_un708i_a0a1a8().createNode();
    SNode compositePart = SLinkOperations.getTarget(path, "compositePart", true);
    for (String part : parts) {
      SPropertyOperations.set(compositePart, "head", part);
      SLinkOperations.setNewChild(compositePart, "tail", "jetbrains.mps.build.structure.BuildCompositePath");
      compositePart = SLinkOperations.getTarget(compositePart, "tail", true);
    }
    SNodeOperations.deleteNode(compositePart);

    return path;
  }

  private void extractModules(List<NodeData> data, Set<ModuleData> extracted) {
    for (NodeData d : ListSequence.fromList(data)) {
      if (d instanceof ModuleData) {
        SetSequence.fromSet(extracted).addElement((ModuleData) d);
      } else if (d instanceof NamespaceData) {
        // <node> 
      }
    }
  }

  private void createContent(List<NodeData> selectedData, SNode folder, Set<SNode> modules, SModel targetSModel) {
    // what on earth is going on here... 
    Map<NodeData, SNode> createdComponent = MapSequence.fromMap(new HashMap<NodeData, SNode>());
    Set<SNode> topLevel = SetSequence.fromSet(new LinkedHashSet<SNode>());
    for (NodeData data : ListSequence.fromList(selectedData)) {
      // creating component 
      SNode component = createComponent(data, targetSModel, modules);
      if (component == null) {
        continue;
      }
      MapSequence.fromMap(createdComponent).put(data, component);
      SetSequence.fromSet(topLevel).addElement(component);
      // dealing with children 
      if (SNodeOperations.isInstanceOf(component, "jetbrains.mps.build.structure.BuildLayout_AbstractContainer")) {
        List<NodeData> children = data.getChildren();
        for (NodeData child : ListSequence.fromList(children)) {
          if (MapSequence.fromMap(createdComponent).containsKey(child)) {
            SNode childComponent = MapSequence.fromMap(createdComponent).get(child);
            ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(component, "jetbrains.mps.build.structure.BuildLayout_AbstractContainer"), "children", true)).addElement(childComponent);
            if (SetSequence.fromSet(topLevel).contains(childComponent)) {
              SetSequence.fromSet(topLevel).removeElement(childComponent);
            }
          }
        }
      }
      // dealing with parent 
      NodeData parent = data.getParent();
      if (parent == null) {
        break;
      }
      if (MapSequence.fromMap(createdComponent).containsKey(parent)) {
        ListSequence.fromList(SLinkOperations.getTargets(SNodeOperations.cast(MapSequence.fromMap(createdComponent).get(parent), "jetbrains.mps.build.structure.BuildLayout_AbstractContainer"), "children", true)).addElement(component);
        SetSequence.fromSet(topLevel).removeElement(component);
      }
    }
    // 
    for (SNode topLevelComponent : SetSequence.fromSet(topLevel)) {
      ListSequence.fromList(SLinkOperations.getTargets(folder, "children", true)).addElement(topLevelComponent);
    }
  }

  private static boolean eq_un708i_a0s0e(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_un708i_a0a81a4(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_un708i_a0b81a4(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_un708i_a0gb0e(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  public static class QuotationClass_un708i_a0a0a81a4 {
    public QuotationClass_un708i_a0a0a81a4() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFolderMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setProperty("name", "mps_home");
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0c0s0e {
    public QuotationClass_un708i_a0a0c0s0e() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildProjectDependency", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.addReference(SReference.create("script", quotedNode1_3, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("4301118715654192646")));
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceMacroRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setReferent("macro", (SNode) parameter_5);
          quotedNode_1.addChild("artifacts", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a0s0e {
    public QuotationClass_un708i_a0a0a0s0e() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFolderMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setProperty("name", "idea_home");
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0d0a81a4 {
    public QuotationClass_un708i_a0a0d0a81a4() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildExternalLayoutDependency", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.addReference(SReference.create("layout", quotedNode1_3, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("7181125477683264500")));
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceMacroRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setReferent("macro", (SNode) parameter_5);
          quotedNode_1.addChild("artifacts", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a4a0s0e {
    public QuotationClass_un708i_a0a4a0s0e() {
    }

    public SNode createNode(Object parameter_7) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFolderMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_4 = quotedNode_1;
        quotedNode1_4.setProperty("name", "plugins_home");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceMacroRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_5 = quotedNode_2;
          quotedNode1_5.setReferent("macro", (SNode) parameter_7);
          {
            quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_6 = quotedNode_3;
            quotedNode1_6.setProperty("head", "plugins");
            quotedNode_2.addChild("compositePart", quotedNode1_6);
          }
          quotedNode_1.addChild("defaultPath", quotedNode1_5);
        }
        result = quotedNode1_4;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0h0a81a4 {
    public QuotationClass_un708i_a0a0h0a81a4() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildProjectDependency", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.addReference(SReference.create("script", quotedNode1_3, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("5148601452480491524")));
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceMacroRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setReferent("macro", (SNode) parameter_5);
          quotedNode_1.addChild("artifacts", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a1s0e {
    public QuotationClass_un708i_a0a0a1s0e() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVariableMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("name", "date");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVariableMacroInitWithDate", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setProperty("pattern", "yyyyMMdd");
          quotedNode_1.addChild("initialValue", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a2a1s0e {
    public QuotationClass_un708i_a0a2a1s0e() {
    }

    public SNode createNode(Object parameter_9) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVariableMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_5 = quotedNode_1;
        quotedNode1_5.setProperty("name", "build.number");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVariableMacroInitWithString", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_6 = quotedNode_2;
          {
            quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildString", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_7 = quotedNode_3;
            {
              quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_8 = quotedNode_4;
              quotedNode1_8.setProperty("text", (String) parameter_9);
              quotedNode_3.addChild("parts", quotedNode1_8);
            }
            quotedNode_2.addChild("value", quotedNode1_7);
          }
          quotedNode_1.addChild("initialValue", quotedNode1_6);
        }
        result = quotedNode1_5;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a4a1s0e {
    public QuotationClass_un708i_a0a4a1s0e() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFolderMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setProperty("name", "mps_home");
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0g0b81a4 {
    public QuotationClass_un708i_a0a0g0b81a4() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildProjectDependency", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.addReference(SReference.create("script", quotedNode1_3, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688312941958")));
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceMacroRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setReferent("macro", (SNode) parameter_5);
          quotedNode_1.addChild("artifacts", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a01a1s0e {
    public QuotationClass_un708i_a0a01a1s0e() {
    }

    public SNode createNode(Object parameter_75, Object parameter_76, Object parameter_77, Object parameter_78, Object parameter_79) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      SNode quotedNode_5 = null;
      SNode quotedNode_6 = null;
      SNode quotedNode_7 = null;
      SNode quotedNode_8 = null;
      SNode quotedNode_9 = null;
      SNode quotedNode_10 = null;
      SNode quotedNode_11 = null;
      SNode quotedNode_12 = null;
      SNode quotedNode_13 = null;
      SNode quotedNode_14 = null;
      SNode quotedNode_15 = null;
      SNode quotedNode_16 = null;
      SNode quotedNode_17 = null;
      SNode quotedNode_18 = null;
      SNode quotedNode_19 = null;
      SNode quotedNode_20 = null;
      SNode quotedNode_21 = null;
      SNode quotedNode_22 = null;
      SNode quotedNode_23 = null;
      SNode quotedNode_24 = null;
      SNode quotedNode_25 = null;
      SNode quotedNode_26 = null;
      SNode quotedNode_27 = null;
      SNode quotedNode_28 = null;
      SNode quotedNode_29 = null;
      SNode quotedNode_30 = null;
      SNode quotedNode_31 = null;
      SNode quotedNode_32 = null;
      SNode quotedNode_33 = null;
      SNode quotedNode_34 = null;
      SNode quotedNode_35 = null;
      SNode quotedNode_36 = null;
      SNode quotedNode_37 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_Branding", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_38 = quotedNode_1;
        quotedNode1_38.setProperty("major", "1");
        quotedNode1_38.setProperty("minor", "0");
        quotedNode1_38.setProperty("name", "Standalone");
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_39 = quotedNode_2;
          {
            quotedNode_16 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVarRefStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_40 = quotedNode_16;
            quotedNode1_40.setReferent("macro", (SNode) parameter_75);
            quotedNode_2.addChild("parts", quotedNode1_40);
          }
          quotedNode_1.addChild("buildNumber", quotedNode1_39);
        }
        {
          quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_41 = quotedNode_3;
          {
            quotedNode_17 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_42 = quotedNode_17;
            quotedNode1_42.setProperty("head", "icons");
            {
              quotedNode_30 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_43 = quotedNode_30;
              quotedNode1_43.setProperty("head", "MPS16.png");
              quotedNode_17.addChild("tail", quotedNode1_43);
            }
            quotedNode_3.addChild("compositePart", quotedNode1_42);
          }
          quotedNode_1.addChild("icon16", quotedNode1_41);
        }
        {
          quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_44 = quotedNode_4;
          {
            quotedNode_18 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_45 = quotedNode_18;
            quotedNode1_45.setProperty("text", (String) parameter_76);
            quotedNode_4.addChild("parts", quotedNode1_45);
          }
          quotedNode_1.addChild("shortName", quotedNode1_44);
        }
        {
          quotedNode_5 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_46 = quotedNode_5;
          {
            quotedNode_19 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_47 = quotedNode_19;
            quotedNode1_47.setProperty("text", (String) parameter_77);
            quotedNode_5.addChild("parts", quotedNode1_47);
          }
          quotedNode_1.addChild("fullName", quotedNode1_46);
        }
        {
          quotedNode_6 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildString", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_48 = quotedNode_6;
          {
            quotedNode_20 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_49 = quotedNode_20;
            quotedNode1_49.setProperty("text", (String) parameter_78);
            quotedNode_6.addChild("parts", quotedNode1_49);
          }
          quotedNode_1.addChild("codename", quotedNode1_48);
        }
        {
          quotedNode_7 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_50 = quotedNode_7;
          {
            quotedNode_21 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_51 = quotedNode_21;
            quotedNode1_51.setProperty("text", "002387");
            quotedNode_7.addChild("parts", quotedNode1_51);
          }
          quotedNode_1.addChild("textColor", quotedNode1_50);
        }
        {
          quotedNode_8 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_52 = quotedNode_8;
          {
            quotedNode_22 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_53 = quotedNode_22;
            quotedNode1_53.setProperty("head", "icons");
            {
              quotedNode_31 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_54 = quotedNode_31;
              quotedNode1_54.setProperty("head", "MPS32.png");
              quotedNode_22.addChild("tail", quotedNode1_54);
            }
            quotedNode_8.addChild("compositePart", quotedNode1_53);
          }
          quotedNode_1.addChild("icon32", quotedNode1_52);
        }
        {
          quotedNode_9 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_55 = quotedNode_9;
          {
            quotedNode_23 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVarRefStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_56 = quotedNode_23;
            quotedNode1_56.setReferent("macro", (SNode) parameter_79);
            quotedNode_9.addChild("parts", quotedNode1_56);
          }
          quotedNode_1.addChild("buildDate", quotedNode1_55);
        }
        {
          quotedNode_10 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_57 = quotedNode_10;
          {
            quotedNode_24 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_58 = quotedNode_24;
            quotedNode1_58.setProperty("head", "icons");
            {
              quotedNode_32 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_59 = quotedNode_32;
              quotedNode1_59.setProperty("head", "MPS32.png");
              quotedNode_24.addChild("tail", quotedNode1_59);
            }
            quotedNode_10.addChild("compositePart", quotedNode1_58);
          }
          quotedNode_1.addChild("icon32opaque", quotedNode1_57);
        }
        {
          quotedNode_11 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_60 = quotedNode_11;
          {
            quotedNode_25 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_61 = quotedNode_25;
            quotedNode1_61.setProperty("head", "icons");
            {
              quotedNode_33 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_62 = quotedNode_33;
              quotedNode1_62.setProperty("head", "splash.png");
              quotedNode_25.addChild("tail", quotedNode1_62);
            }
            quotedNode_11.addChild("compositePart", quotedNode1_61);
          }
          quotedNode_1.addChild("splashScreen", quotedNode1_60);
        }
        {
          quotedNode_12 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_63 = quotedNode_12;
          {
            quotedNode_26 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_64 = quotedNode_26;
            quotedNode1_64.setProperty("head", "icons");
            {
              quotedNode_34 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_65 = quotedNode_34;
              quotedNode1_65.setProperty("head", "about.png");
              quotedNode_26.addChild("tail", quotedNode1_65);
            }
            quotedNode_12.addChild("compositePart", quotedNode1_64);
          }
          quotedNode_1.addChild("aboutScreen", quotedNode1_63);
        }
        {
          quotedNode_13 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_66 = quotedNode_13;
          {
            quotedNode_27 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_67 = quotedNode_27;
            quotedNode1_67.setProperty("head", "icons");
            {
              quotedNode_35 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_68 = quotedNode_35;
              quotedNode1_68.setProperty("head", "caption.png");
              quotedNode_27.addChild("tail", quotedNode1_68);
            }
            quotedNode_13.addChild("compositePart", quotedNode1_67);
          }
          quotedNode_1.addChild("welcomeCaption", quotedNode1_66);
        }
        {
          quotedNode_14 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_69 = quotedNode_14;
          {
            quotedNode_28 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_70 = quotedNode_28;
            quotedNode1_70.setProperty("head", "icons");
            {
              quotedNode_36 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_71 = quotedNode_36;
              quotedNode1_71.setProperty("head", "slogan.png");
              quotedNode_28.addChild("tail", quotedNode1_71);
            }
            quotedNode_14.addChild("compositePart", quotedNode1_70);
          }
          quotedNode_1.addChild("welcomeSlogan", quotedNode1_69);
        }
        {
          quotedNode_15 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_72 = quotedNode_15;
          {
            quotedNode_29 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_73 = quotedNode_29;
            quotedNode1_73.setProperty("head", "icons");
            {
              quotedNode_37 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_74 = quotedNode_37;
              quotedNode1_74.setProperty("head", "dialogImage.png");
              quotedNode_29.addChild("tail", quotedNode1_74);
            }
            quotedNode_15.addChild("compositePart", quotedNode1_73);
          }
          quotedNode_1.addChild("dialogImage", quotedNode1_72);
        }
        result = quotedNode1_38;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a0t0e {
    public QuotationClass_un708i_a0a0a0t0e() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFolderMacro", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setProperty("name", (String) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a62a4 {
    public QuotationClass_un708i_a0a62a4() {
    }

    public SNode createNode(Object parameter_5, Object parameter_6) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_Group", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_4 = quotedNode_1;
        quotedNode1_4.setProperty("name", (String) parameter_6);
        {
          List<SNode> nodes = (List<SNode>) parameter_5;
          for (SNode child : nodes) {
            quotedNode_1.addChild("modules", HUtil.copyIfNecessary(child));
          }
        }
        result = quotedNode1_4;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a72a4 {
    public QuotationClass_un708i_a0a72a4() {
    }

    public SNode createNode(Object parameter_19, Object parameter_20, Object parameter_21, Object parameter_22) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      SNode quotedNode_5 = null;
      SNode quotedNode_6 = null;
      SNode quotedNode_7 = null;
      SNode quotedNode_8 = null;
      SNode quotedNode_9 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_IdeaPlugin", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_10 = quotedNode_1;
        quotedNode1_10.setProperty("id", (String) parameter_22);
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_11 = quotedNode_2;
          {
            quotedNode_7 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_12 = quotedNode_7;
            quotedNode1_12.setProperty("text", (String) parameter_19);
            quotedNode_2.addChild("parts", quotedNode1_12);
          }
          quotedNode_1.addChild("name", quotedNode1_11);
        }
        {
          quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_13 = quotedNode_3;
          {
            quotedNode_8 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_14 = quotedNode_8;
            quotedNode1_14.setProperty("text", "1.0");
            quotedNode_3.addChild("parts", quotedNode1_14);
          }
          quotedNode_1.addChild("version", quotedNode1_13);
        }
        {
          quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_IdeaPluginGroup", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_15 = quotedNode_4;
          quotedNode1_15.setReferent("group", (SNode) parameter_20);
          quotedNode_1.addChild("content", quotedNode1_15);
        }
        {
          quotedNode_5 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_IdeaPluginDependency", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_16 = quotedNode_5;
          quotedNode1_16.addReference(SReference.create("target", quotedNode1_16, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("4973949960459588488")));
          quotedNode_1.addChild("dependencies", quotedNode1_16);
        }
        {
          quotedNode_6 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_17 = quotedNode_6;
          {
            quotedNode_9 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_18 = quotedNode_9;
            quotedNode1_18.setProperty("text", (String) parameter_21);
            quotedNode_6.addChild("parts", quotedNode1_18);
          }
          quotedNode_1.addChild("containerName", quotedNode1_17);
        }
        result = quotedNode1_10;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a0a0gb0e {
    public QuotationClass_un708i_a0a0a0a0gb0e() {
    }

    public SNode createNode(Object parameter_67, Object parameter_68, Object parameter_69, Object parameter_70) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      SNode quotedNode_5 = null;
      SNode quotedNode_6 = null;
      SNode quotedNode_7 = null;
      SNode quotedNode_8 = null;
      SNode quotedNode_9 = null;
      SNode quotedNode_10 = null;
      SNode quotedNode_11 = null;
      SNode quotedNode_12 = null;
      SNode quotedNode_13 = null;
      SNode quotedNode_14 = null;
      SNode quotedNode_15 = null;
      SNode quotedNode_16 = null;
      SNode quotedNode_17 = null;
      SNode quotedNode_18 = null;
      SNode quotedNode_19 = null;
      SNode quotedNode_20 = null;
      SNode quotedNode_21 = null;
      SNode quotedNode_22 = null;
      SNode quotedNode_23 = null;
      SNode quotedNode_24 = null;
      SNode quotedNode_25 = null;
      SNode quotedNode_26 = null;
      SNode quotedNode_27 = null;
      SNode quotedNode_28 = null;
      SNode quotedNode_29 = null;
      SNode quotedNode_30 = null;
      SNode quotedNode_31 = null;
      SNode quotedNode_32 = null;
      SNode quotedNode_33 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_34 = quotedNode_1;
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_35 = quotedNode_2;
          quotedNode1_35.addReference(SReference.create("target", quotedNode1_35, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688313033161")));
          quotedNode_1.addChild("children", quotedNode1_35);
        }
        {
          quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_36 = quotedNode_3;
          quotedNode1_36.addReference(SReference.create("target", quotedNode1_36, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1348803421063031332")));
          quotedNode_1.addChild("children", quotedNode1_36);
        }
        {
          quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Folder", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_37 = quotedNode_4;
          {
            quotedNode_7 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_38 = quotedNode_7;
            {
              quotedNode_20 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_39 = quotedNode_20;
              quotedNode1_39.setProperty("text", "lib");
              quotedNode_7.addChild("parts", quotedNode1_39);
            }
            quotedNode_4.addChild("containerName", quotedNode1_38);
          }
          {
            quotedNode_8 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_ImportContent", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_40 = quotedNode_8;
            quotedNode1_40.addReference(SReference.create("target", quotedNode1_40, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688313033167")));
            {
              quotedNode_21 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFileExcludeSelector", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_41 = quotedNode_21;
              quotedNode1_41.setProperty("pattern", "MPS-src.zip");
              quotedNode_8.addChild("selectors", quotedNode1_41);
            }
            {
              quotedNode_22 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildFileExcludeSelector", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_42 = quotedNode_22;
              quotedNode1_42.setProperty("pattern", "branding.jar");
              quotedNode_8.addChild("selectors", quotedNode1_42);
            }
            quotedNode_4.addChild("children", quotedNode1_40);
          }
          {
            quotedNode_9 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Jar", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_43 = quotedNode_9;
            {
              quotedNode_23 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_44 = quotedNode_23;
              {
                quotedNode_30 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
                SNode quotedNode1_45 = quotedNode_30;
                quotedNode1_45.setProperty("text", "branding.jar");
                quotedNode_23.addChild("parts", quotedNode1_45);
              }
              quotedNode_9.addChild("containerName", quotedNode1_44);
            }
            {
              quotedNode_24 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_FilesOf", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_46 = quotedNode_24;
              quotedNode1_46.setReferent("element", (SNode) parameter_67);
              quotedNode_9.addChild("children", quotedNode1_46);
            }
            quotedNode_4.addChild("children", quotedNode1_43);
          }
          quotedNode_1.addChild("children", quotedNode1_37);
        }
        {
          quotedNode_5 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Folder", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_47 = quotedNode_5;
          {
            quotedNode_10 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_48 = quotedNode_10;
            quotedNode1_48.addReference(SReference.create("target", quotedNode1_48, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688313033217")));
            quotedNode_5.addChild("children", quotedNode1_48);
          }
          {
            quotedNode_11 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_49 = quotedNode_11;
            quotedNode1_49.addReference(SReference.create("target", quotedNode1_49, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688313033209")));
            quotedNode_5.addChild("children", quotedNode1_49);
          }
          {
            quotedNode_12 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_50 = quotedNode_12;
            quotedNode1_50.addReference(SReference.create("target", quotedNode1_50, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("1392391688313033226")));
            quotedNode_5.addChild("children", quotedNode1_50);
          }
          {
            quotedNode_13 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Import", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_51 = quotedNode_13;
            quotedNode1_51.addReference(SReference.create("target", quotedNode1_51, SModelReference.fromString("r:874d959d-e3b4-4d04-b931-ca849af130dd(jetbrains.mps.ide.build)"), SNodeId.fromString("614687982853436655")));
            quotedNode_5.addChild("children", quotedNode1_51);
          }
          {
            quotedNode_14 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMpsLayout_Plugin", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_52 = quotedNode_14;
            quotedNode1_52.setReferent("plugin", (SNode) parameter_68);
            quotedNode_5.addChild("children", quotedNode1_52);
          }
          {
            quotedNode_15 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_53 = quotedNode_15;
            {
              quotedNode_25 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_54 = quotedNode_25;
              quotedNode1_54.setProperty("text", "plugins");
              quotedNode_15.addChild("parts", quotedNode1_54);
            }
            quotedNode_5.addChild("containerName", quotedNode1_53);
          }
          quotedNode_1.addChild("children", quotedNode1_47);
        }
        {
          quotedNode_6 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_EchoProperties", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_55 = quotedNode_6;
          {
            quotedNode_16 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_56 = quotedNode_16;
            {
              quotedNode_26 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_57 = quotedNode_26;
              quotedNode1_57.setProperty("text", "build.number");
              quotedNode_16.addChild("parts", quotedNode1_57);
            }
            quotedNode_6.addChild("fileName", quotedNode1_56);
          }
          {
            quotedNode_17 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_EchoPropertyEntry", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_58 = quotedNode_17;
            quotedNode1_58.setProperty("key", "build.number");
            {
              quotedNode_27 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildString", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_59 = quotedNode_27;
              {
                quotedNode_31 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVarRefStringPart", null, GlobalScope.getInstance(), false);
                SNode quotedNode1_60 = quotedNode_31;
                quotedNode1_60.setReferent("macro", (SNode) parameter_69);
                quotedNode_27.addChild("parts", quotedNode1_60);
              }
              quotedNode_17.addChild("value", quotedNode1_59);
            }
            quotedNode_6.addChild("entries", quotedNode1_58);
          }
          {
            quotedNode_18 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_EchoPropertyEntry", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_61 = quotedNode_18;
            quotedNode1_61.setProperty("key", "date");
            {
              quotedNode_28 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildString", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_62 = quotedNode_28;
              {
                quotedNode_32 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildVarRefStringPart", null, GlobalScope.getInstance(), false);
                SNode quotedNode1_63 = quotedNode_32;
                quotedNode1_63.setReferent("macro", (SNode) parameter_70);
                quotedNode_28.addChild("parts", quotedNode1_63);
              }
              quotedNode_18.addChild("value", quotedNode1_62);
            }
            quotedNode_6.addChild("entries", quotedNode1_61);
          }
          {
            quotedNode_19 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_EchoPropertyEntry", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_64 = quotedNode_19;
            quotedNode1_64.setProperty("key", "version");
            {
              quotedNode_29 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildString", null, GlobalScope.getInstance(), false);
              SNode quotedNode1_65 = quotedNode_29;
              {
                quotedNode_33 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
                SNode quotedNode1_66 = quotedNode_33;
                quotedNode1_66.setProperty("text", "1.0");
                quotedNode_29.addChild("parts", quotedNode1_66);
              }
              quotedNode_19.addChild("value", quotedNode1_65);
            }
            quotedNode_6.addChild("entries", quotedNode1_64);
          }
          quotedNode_1.addChild("children", quotedNode1_55);
        }
        result = quotedNode1_34;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a0a23a4 {
    public QuotationClass_un708i_a0a0a0a23a4() {
    }

    public SNode createNode(Object parameter_9, Object parameter_10) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      SNode quotedNode_4 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Zip", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_5 = quotedNode_1;
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_6 = quotedNode_2;
          {
            quotedNode_4 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_7 = quotedNode_4;
            quotedNode1_7.setProperty("text", (String) parameter_9);
            quotedNode_2.addChild("parts", quotedNode1_7);
          }
          quotedNode_1.addChild("containerName", quotedNode1_6);
        }
        {
          quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMpsLayout_Plugin", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_8 = quotedNode_3;
          quotedNode1_8.setReferent("plugin", (SNode) parameter_10);
          quotedNode_1.addChild("children", quotedNode1_8);
        }
        result = quotedNode1_5;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0d0a0f {
    public QuotationClass_un708i_a0d0a0f() {
    }

    public SNode createNode(Object parameter_3) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMpsLayout_ModuleJars", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_2 = quotedNode_1;
        quotedNode1_2.setReferent("module", (SNode) parameter_3);
        result = quotedNode1_2;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0b0a0a5 {
    public QuotationClass_un708i_a0b0a0a5() {
    }

    public SNode createNode(Object parameter_7) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      SNode quotedNode_3 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildLayout_Folder", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_4 = quotedNode_1;
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildStringNotEmpty", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_5 = quotedNode_2;
          {
            quotedNode_3 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildTextStringPart", null, GlobalScope.getInstance(), false);
            SNode quotedNode1_6 = quotedNode_3;
            quotedNode1_6.setProperty("text", (String) parameter_7);
            quotedNode_2.addChild("parts", quotedNode1_6);
          }
          quotedNode_1.addChild("containerName", quotedNode1_5);
        }
        result = quotedNode1_4;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0f0g {
    public QuotationClass_un708i_a0a0f0g() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_Solution", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("compact", "true");
        {
          quotedNode_2 = (SNode) parameter_5;
          SNode quotedNode1_4;
          if (_parameterValues_129834374.contains(quotedNode_2)) {
            quotedNode1_4 = HUtil.copyIfNecessary(quotedNode_2);
          } else {
            _parameterValues_129834374.add(quotedNode_2);
            quotedNode1_4 = quotedNode_2;
          }
          if (quotedNode1_4 != null) {
            quotedNode_1.addChild("path", HUtil.copyIfNecessary(quotedNode1_4));
          }
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a5a6 {
    public QuotationClass_un708i_a0a0a5a6() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_Language", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("compact", "true");
        {
          quotedNode_2 = (SNode) parameter_5;
          SNode quotedNode1_4;
          if (_parameterValues_129834374.contains(quotedNode_2)) {
            quotedNode1_4 = HUtil.copyIfNecessary(quotedNode_2);
          } else {
            _parameterValues_129834374.add(quotedNode_2);
            quotedNode1_4 = quotedNode_2;
          }
          if (quotedNode1_4 != null) {
            quotedNode_1.addChild("path", HUtil.copyIfNecessary(quotedNode1_4));
          }
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a0a5a6_0 {
    public QuotationClass_un708i_a0a0a5a6_0() {
    }

    public SNode createNode(Object parameter_5) {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.mps.structure.BuildMps_DevKit", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        quotedNode1_3.setProperty("compact", "true");
        {
          quotedNode_2 = (SNode) parameter_5;
          SNode quotedNode1_4;
          if (_parameterValues_129834374.contains(quotedNode_2)) {
            quotedNode1_4 = HUtil.copyIfNecessary(quotedNode_2);
          } else {
            _parameterValues_129834374.add(quotedNode_2);
            quotedNode1_4 = quotedNode_2;
          }
          if (quotedNode1_4 != null) {
            quotedNode_1.addChild("path", HUtil.copyIfNecessary(quotedNode1_4));
          }
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }

  public static class QuotationClass_un708i_a0a1a8 {
    public QuotationClass_un708i_a0a1a8() {
    }

    public SNode createNode() {
      SNode result = null;
      Set<SNode> _parameterValues_129834374 = new HashSet<SNode>();
      SNode quotedNode_1 = null;
      SNode quotedNode_2 = null;
      {
        quotedNode_1 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildSourceProjectRelativePath", null, GlobalScope.getInstance(), false);
        SNode quotedNode1_3 = quotedNode_1;
        {
          quotedNode_2 = SModelUtil_new.instantiateConceptDeclaration("jetbrains.mps.build.structure.BuildCompositePath", null, GlobalScope.getInstance(), false);
          SNode quotedNode1_4 = quotedNode_2;
          quotedNode1_4.setProperty("head", "");
          quotedNode_1.addChild("compositePart", quotedNode1_4);
        }
        result = quotedNode1_3;
      }
      return result;
    }
  }
}
