package jetbrains.mps.ide.migration;

/*Generated by MPS */

import jetbrains.mps.migration.global.ProjectMigration;
import jetbrains.mps.baseLanguage.tuples.runtime.Tuples;
import org.jetbrains.mps.openapi.module.SModule;
import java.util.List;
import org.jetbrains.mps.openapi.language.SLanguage;
import java.util.Map;

public interface MigrationManager {
  public boolean isMigrationRequired();

  public Iterable<ProjectMigration> getProjectMigrationsToApply();

  public Iterable<Tuples._2<ScriptApplied, ScriptApplied.ScriptAppliedReference>> getModuleMigrationsToApply(Iterable<SModule> modules);

  public List<Tuples._3<SModule, SLanguage, Integer>> getMissingMigrations();

  public int projectStepsCount(boolean isCleanup);

  public MigrationManager.MigrationStep nextProjectStep(Map<String, Object> options, boolean cleanup);

  public int moduleStepsCount();

  public MigrationManager.MigrationStep nextModuleStep();

  public static interface MigrationStep {
    public String getDescription();
    public boolean execute();
    public void forceExecutionNextTime();
  }
}
