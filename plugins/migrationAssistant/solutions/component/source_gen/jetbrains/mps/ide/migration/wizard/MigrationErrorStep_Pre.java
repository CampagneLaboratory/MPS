package jetbrains.mps.ide.migration.wizard;

/*Generated by MPS */

import com.intellij.openapi.project.Project;
import jetbrains.mps.ide.migration.check.Problem;
import jetbrains.mps.ide.project.ProjectHelper;
import org.jetbrains.mps.openapi.module.SModule;
import jetbrains.mps.ide.migration.check.MigrationCheckUtil;

public class MigrationErrorStep_Pre extends MigrationErrorStep {
  public static final String ID = "PreProblem";

  public MigrationErrorStep_Pre(Project project) {
    super(project, ID);
  }

  protected String getText() {
    return "Migration Assistant found that some problems that prevent this project from being migrated.<br><br>" + "Try running migrations after correcting your project and/or adding necessary libraries.<br>" + "Migration Assistant will be started again on next project opening or it can be started " + "manually by choosing Tools->Run Migration Assistant from the main menu.<br><br>" + "Problems will be shown in Usages tool when the project is loaded.";
  }

  public Iterable<Problem> getProblems() {
    jetbrains.mps.project.Project mpsProject = ProjectHelper.toMPSProject(myProject);
    Iterable<SModule> modules = ((Iterable<SModule>) mpsProject.getModulesWithGenerators());
    return MigrationCheckUtil.getProblems(modules, 100);
  }
}
