package jetbrains.mps.ide.migration.wizard;

/*Generated by MPS */

import com.intellij.openapi.project.Project;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import javax.swing.BorderFactory;
import javax.swing.JTextPane;
import javax.swing.event.HyperlinkListener;
import javax.swing.event.HyperlinkEvent;
import com.intellij.ide.BrowserUtil;
import java.awt.Dimension;

public class MigrationsErrorStep extends MigrationStep {
  public static final String ID = "error";
  public MigrationsErrorStep(Project project) {
    super(project, "Could not Apply All Migrations", ID);
    createComponent();
  }
  @Override
  protected final void createComponent() {
    super.createComponent();
    JPanel infoHolder = new JPanel(new BorderLayout());
    infoHolder.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));
    JTextPane info = new JTextPane();
    info.setContentType("text/html");
    info.setText("Migration was not completed.<br><br>Some migration scripts are missing or finished with errors.<br><br>Maybe you are trying to migrate from version which is not now supported.<br><br>Your project will be reloaded.<br><br>You can try to continue migrations manually or execute Migration Assistant later.");
    info.setEditable(false);
    info.addHyperlinkListener(new HyperlinkListener() {
      public void hyperlinkUpdate(HyperlinkEvent e) {
        if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
          BrowserUtil.launchBrowser(e.getURL().toString());
        }
      }
    });
    info.setFocusable(false);
    info.setBorder(BorderFactory.createLoweredBevelBorder());
    info.setPreferredSize(new Dimension(300, 220));
    infoHolder.add(info, BorderLayout.CENTER);
    myComponent.add(infoHolder, BorderLayout.CENTER);
  }
  @Override
  public Object getPreviousStepId() {
    return null;
  }
  @Override
  public Object getNextStepId() {
    return null;
  }
  @Override
  public boolean canBeCancelled() {
    return false;
  }
}
