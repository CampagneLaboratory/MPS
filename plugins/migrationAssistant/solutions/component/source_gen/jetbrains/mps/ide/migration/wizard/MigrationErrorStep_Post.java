package jetbrains.mps.ide.migration.wizard;

/*Generated by MPS */

import com.intellij.openapi.project.Project;
import jetbrains.mps.ide.migration.check.Problem;
import jetbrains.mps.ide.project.ProjectHelper;
import org.jetbrains.mps.openapi.module.SModule;
import jetbrains.mps.ide.migration.check.MigrationCheckUtil;

public class MigrationErrorStep_Post extends MigrationErrorStep {
  public static final String ID = "PostProblem";

  public MigrationErrorStep_Post(Project project) {
    super(project, ID);
  }

  protected String getText() {
    return "Migration Assistant was unable to migrate some nodes in this project.<br><br>" + "Problem nodes will be shown in Usages tool after the project is loaded.<br>" + "Please correct them manually.";
  }

  public Iterable<Problem> getProblems() {
    jetbrains.mps.project.Project mpsProject = ProjectHelper.toMPSProject(myProject);
    Iterable<SModule> modules = ((Iterable<SModule>) mpsProject.getModulesWithGenerators());
    return MigrationCheckUtil.getProblems(modules, 100);
  }
}
