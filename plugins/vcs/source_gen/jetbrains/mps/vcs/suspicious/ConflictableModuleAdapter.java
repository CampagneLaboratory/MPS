package jetbrains.mps.vcs.suspicious;

/*Generated by MPS */

import jetbrains.mps.project.AbstractModule;
import org.jetbrains.mps.openapi.module.SModule;
import jetbrains.mps.vfs.IFile;
import jetbrains.mps.smodel.ModelAccess;
import jetbrains.mps.util.Computable;
import jetbrains.mps.project.SModuleOperations;

public class ConflictableModuleAdapter extends Conflictable {
  private final AbstractModule myModule;
  private final boolean myIsConflictDetected;

  public ConflictableModuleAdapter(SModule module, boolean isConflictDetected) {
    myModule = (AbstractModule) module;
    myIsConflictDetected = isConflictDetected;
  }

  @Override
  public boolean isConflictDetected() {
    return myIsConflictDetected;
  }

  @Override
  public IFile getFile() {
    return myModule.getDescriptorFile();
  }

  @Override
  public void reloadFromDisk() {
    myModule.reloadFromDisk(true);
  }

  @Override
  public boolean needReloading() {
    return ModelAccess.instance().runReadAction(new Computable<Boolean>() {
      public Boolean compute() {
        return SModuleOperations.needReloading(myModule);
      }
    });
  }
}
