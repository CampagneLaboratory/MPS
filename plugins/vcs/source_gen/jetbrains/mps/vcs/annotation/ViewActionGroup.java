package jetbrains.mps.vcs.annotation;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseGroup;
import com.intellij.openapi.vcs.annotate.FileAnnotation;
import jetbrains.mps.internal.collections.runtime.Sequence;
import com.intellij.openapi.actionSystem.ToggleAction;
import com.intellij.openapi.actionSystem.AnActionEvent;

/*package*/ class ViewActionGroup extends BaseGroup {
  private FileAnnotation myFileAnnotation;

  public ViewActionGroup(FileAnnotation fileAnnotation, Iterable<AnnotationAspectSubcolumn> subcolumns) {
    super("View");
    setPopup(true);
    myFileAnnotation = fileAnnotation;
    for (AnnotationAspectSubcolumn subcolumn : Sequence.fromIterable(subcolumns)) {
      add(new ViewActionGroup.ShowHideSubcolumnAction(subcolumn));
    }
  }

  private class ShowHideSubcolumnAction extends ToggleAction {
    private AnnotationAspectSubcolumn mySubcolumn;

    public ShowHideSubcolumnAction(AnnotationAspectSubcolumn subcolumn) {
      super(subcolumn.getId());
      mySubcolumn = subcolumn;
    }

    public void setSelected(AnActionEvent event, boolean selected) {
      mySubcolumn.setEnabled(selected);
    }

    public boolean isSelected(AnActionEvent event) {
      return mySubcolumn.isEnabled();
    }
  }
}
