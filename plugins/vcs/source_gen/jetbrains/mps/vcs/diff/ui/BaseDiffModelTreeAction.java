package jetbrains.mps.vcs.diff.ui;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseAction;
import javax.swing.Icon;
import com.intellij.openapi.actionSystem.AnActionEvent;
import java.util.Map;
import com.intellij.openapi.util.Ref;
import jetbrains.mps.smodel.SNodeId;

public abstract class BaseDiffModelTreeAction extends BaseAction {
  public BaseDiffModelTreeAction(String text, Icon icon) {
    super(text, null, icon);
    setExecuteOutsideCommand(true);
  }

  @Override
  protected void doUpdate(AnActionEvent event, Map<String, Object> map) {
    Ref<SNodeId> rootIdRef = getRootIdRef(event);
    event.getPresentation().setEnabled(rootIdRef != null);
    event.getPresentation().setVisible(rootIdRef != null);
  }

  protected static SNodeId getRootId(AnActionEvent event) {
    return check_vfywar_a0a0(getRootIdRef(event));
  }

  private static Ref<SNodeId> getRootIdRef(AnActionEvent event) {
    return event.getData(DiffModelTree.NODE_ID_DATAKEY);
  }

  private static SNodeId check_vfywar_a0a0(Ref<SNodeId> checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.get();
    }
    return null;
  }
}
