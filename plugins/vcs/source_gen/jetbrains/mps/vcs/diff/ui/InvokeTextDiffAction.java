package jetbrains.mps.vcs.diff.ui;

/*Generated by MPS */

import jetbrains.mps.workbench.action.BaseAction;
import com.intellij.openapi.diff.DiffRequest;
import jetbrains.mps.ide.dialogs.BaseDialog;
import com.intellij.openapi.diff.DiffTool;
import jetbrains.mps.ide.projectPane.Icons;
import com.intellij.openapi.actionSystem.AnActionEvent;
import java.util.Map;

public class InvokeTextDiffAction extends BaseAction {
  private DiffRequest myDiffRequest;
  private BaseDialog myDialog;
  private DiffTool myDiffTool;

  public InvokeTextDiffAction(String title, String description, BaseDialog dialog, DiffRequest diffRequest, DiffTool diffTool) {
    super(title, description, Icons.TEXT_ICON);
    myDialog = dialog;
    myDiffRequest = diffRequest;
    myDiffTool = diffTool;
    setDisableOnNoProject(false);
    setExecuteOutsideCommand(true);
  }

  protected void doExecute(AnActionEvent event, Map<String, Object> map) {
    if (myDiffTool.canShow(myDiffRequest)) {
      myDialog.dispose();
      myDiffTool.show(myDiffRequest);
    }
  }
}
