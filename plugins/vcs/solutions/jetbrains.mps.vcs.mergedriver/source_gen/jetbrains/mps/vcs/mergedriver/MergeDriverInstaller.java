package jetbrains.mps.vcs.mergedriver;

/*Generated by MPS */

import com.intellij.openapi.project.Project;
import java.util.Arrays;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import javax.swing.SwingUtilities;

public class MergeDriverInstaller {
  private MergeDriverInstaller() {
  }

  public static boolean isApplicable(Project project) {
    Iterable<AbstractInstaller> installers = Arrays.asList(new GitGlobalInstaller(project), new GitRepositoriesInstaller(project), new SvnInstaller(project));
    return Sequence.fromIterable(installers).any(new IWhereFilter<AbstractInstaller>() {
      public boolean accept(AbstractInstaller i) {
        return i.getCurrentState() != AbstractInstaller.State.INSTALLED;
      }
    });
  }

  public static void installWhereNeeded(final Project project) {
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        new MergeDriverOptionsDialog(project).showDialog();
      }
    });
  }
}
