<?xml version="1.0" encoding="UTF-8"?>
<project name="MPS-languages" default="pack.jetbrains.mps.baseLanguageInternal">
  <property file=".\MPS.properties" />
  <target name="pack.jetbrains.mps.baseLanguageInternal">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguageInternal.tmp">
      <fileset dir="core\baseLanguage\baseLanguageInternal" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguageInternal" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguageInternal.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguageInternal.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguageInternal.tmp" />
  </target>
  <target name="pack.jetbrains.mps.closures">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp">
      <fileset dir="core\baseLanguage\closures\languages\closures" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\closures\languages\closures" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\baseLanguage\closures">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp\closures.mpl" token="{mps_home}\core\baseLanguage\closures\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp\closures.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.closures.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp" />
    <mkdir dir="core\baseLanguage\closures\languages\closures\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.runtime.jar">
      <fileset dir="core\baseLanguage\closures\languages\closures\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.closures.tmp" />
  </target>
  <target name="pack.closures.test">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\closures.test.tmp">
      <fileset dir="core\baseLanguage\closures\solutions\closures.test" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\closures\solutions\closures.test" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\closures.test.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\closures.test.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\closures.test.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.ext.collections.lang">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.tmp">
      <fileset dir="core\baseLanguage\collections" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\collections" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.tmp\collections.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.tmp\collections.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.tmp" />
    <mkdir dir="core\baseLanguage\collections\classes" />
    <mkdir dir="core\baseLanguage\collections\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.runtime.jar">
      <fileset dir="core\baseLanguage\collections\classes" />
      <fileset dir="core\baseLanguage\collections\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.collections.lang.tmp" />
  </target>
  <target name="pack.collections_samples">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_samples.tmp">
      <fileset dir="core\baseLanguage\collections\solutions\collections\samples" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\collections\solutions\collections\samples" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_samples.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_samples.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_samples.tmp" />
  </target>
  <target name="pack.collections_generationTest">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_generationTest.tmp">
      <fileset dir="core\baseLanguage\collections\solutions\collections_generationTest" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\collections\solutions\collections_generationTest" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_generationTest.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_generationTest.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_generationTest.tmp" />
  </target>
  <target name="pack.collections_unittest">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_unittest.tmp">
      <fileset dir="core\baseLanguage\collections\solutions\collections\unittest" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\collections\solutions\collections\unittest" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_unittest.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_unittest.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\collections_unittest.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.ext.csharp">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.tmp">
      <fileset dir="core\baseLanguage\csharp" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\csharp" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.tmp\csharp.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.tmp\csharp.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.tmp" />
    <mkdir dir="core\baseLanguage\csharp\classes" />
    <mkdir dir="core\baseLanguage\csharp\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.runtime.jar">
      <fileset dir="core\baseLanguage\csharp\classes" />
      <fileset dir="core\baseLanguage\csharp\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.csharp.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.ext.dates.lang">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.tmp">
      <fileset dir="core\baseLanguage\dates" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\dates" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.tmp\dates.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.tmp\dates.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.tmp" />
    <mkdir dir="core\baseLanguage\dates\classes" />
    <mkdir dir="core\baseLanguage\dates\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.runtime.jar">
      <fileset dir="core\baseLanguage\dates\classes" />
      <fileset dir="core\baseLanguage\dates\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.lang.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.ext.dates.internal">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.tmp">
      <fileset dir="core\baseLanguage\dates\internal" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\dates\internal" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\baseLanguage\dates">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.tmp\internal.mpl" token="{mps_home}\core\baseLanguage\dates\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.ext.dates.internal.tmp" />
  </target>
  <target name="pack.dates_unittest">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\dates_unittest.tmp">
      <fileset dir="core\baseLanguage\dates\unittest" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\dates\unittest" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\dates_unittest.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\dates_unittest.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\dates_unittest.tmp" />
  </target>
  <target name="pack.jetbrains.mps.internal.collections">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp">
      <fileset dir="core\baseLanguage\internalCollections\languages\collections" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\internalCollections\languages\collections" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\baseLanguage\internalCollections">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp\collections.mpl" token="{mps_home}\core\baseLanguage\internalCollections\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp\collections.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.internal.collections.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp" />
    <mkdir dir="core\baseLanguage\internalCollections\languages\collections\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.runtime.jar">
      <fileset dir="core\baseLanguage\internalCollections\languages\collections\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.internal.collections.tmp" />
  </target>
  <target name="pack.jetbrains.accounting.money">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.tmp">
      <fileset dir="core\baseLanguage\money" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\money" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.tmp\money.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.accounting.money.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.tmp\money.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\core\baseLanguage\jetbrains.accounting.money.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.tmp" />
    <mkdir dir="core\baseLanguage\money\classes" />
    <mkdir dir="core\baseLanguage\money\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.runtime.jar">
      <fileset dir="core\baseLanguage\money\classes" />
      <fileset dir="core\baseLanguage\money\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.accounting.money.tmp" />
  </target>
  <target name="pack.editor">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\editor.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\editor" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\editor" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\editor.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\editor.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\editor.tmp" />
  </target>
  <target name="pack.JDK">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\JDK.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\solutions\JDK" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\solutions\JDK" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\JDK.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\JDK.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\JDK.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.blTypes">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\languages\blTypes" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\languages\blTypes" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\baseLanguage\baseLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.tmp\blTypes.mpl" token="{mps_home}\core\baseLanguage\baseLanguage\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.blTypes.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.tmp">
      <fileset dir="core\baseLanguage\baseLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.tmp\baseLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.tmp" />
    <mkdir dir="core\baseLanguage\baseLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.runtime.jar">
      <fileset dir="core\baseLanguage\baseLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.strings">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.tmp">
      <fileset dir="core\baseLanguage\strings" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\strings" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.tmp\strings.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\baseLanguage\jetbrains.mps.baseLanguage.strings.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.tmp" />
    <mkdir dir="core\baseLanguage\strings\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.runtime.jar">
      <fileset dir="core\baseLanguage\strings\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\jetbrains.mps.baseLanguage.strings.tmp" />
  </target>
  <target name="pack.MPS.Classpath">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\MPS.Classpath.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\solutions\MPS.Classpath" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\solutions\MPS.Classpath" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\MPS.Classpath.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\MPS.Classpath.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\MPS.Classpath.tmp" />
  </target>
  <target name="pack.refactoring">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\refactoring.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\refactoring" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\refactoring" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\refactoring.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\refactoring.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\refactoring.tmp" />
  </target>
  <target name="pack.resolve">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\resolve.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\resolve" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\resolve" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\resolve.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\resolve.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\resolve.tmp" />
  </target>
  <target name="pack.testLogger">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\solutions\testLogger" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\solutions\testLogger" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger.tmp" />
  </target>
  <target name="pack.testLogger2">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger2.tmp">
      <fileset dir="core\baseLanguage\baseLanguage\solutions\testLogger2" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\baseLanguage\baseLanguage\solutions\testLogger2" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger2.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger2.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\baseLanguage\testLogger2.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.actionsLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.tmp">
      <fileset dir="core\languageDesign\actionsLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\actionsLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.tmp\languageDescriptor.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.tmp" />
    <mkdir dir="core\languageDesign\actionsLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.runtime.jar">
      <fileset dir="core\languageDesign\actionsLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.actionsLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.annotations">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp">
      <fileset dir="core\languageDesign\annotations\languages\annotations" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\annotations\languages\annotations" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\languageDesign\annotations">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp\annotations.mpl" token="{mps_home}\core\languageDesign\annotations\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp\annotations.mpl" token="{mps_home}\core\languageDesign\annotations\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.annotations.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp" />
    <mkdir dir="core\languageDesign\annotations\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.runtime.jar">
      <fileset dir="core\languageDesign\annotations\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.annotations.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.cfaLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.tmp">
      <fileset dir="core\languageDesign\cfaLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\cfaLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.tmp\cfaLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.tmp" />
    <mkdir dir="core\languageDesign\cfaLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.runtime.jar">
      <fileset dir="core\languageDesign\cfaLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.cfaLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.constraintsLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.tmp">
      <fileset dir="core\languageDesign\constraintsLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\constraintsLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.tmp\constraintsLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.tmp" />
    <mkdir dir="core\languageDesign\constraintsLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.runtime.jar">
      <fileset dir="core\languageDesign\constraintsLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.constraintsLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.editorLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.tmp">
      <fileset dir="core\languageDesign\editorLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\editorLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.tmp\editorLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.tmp" />
    <mkdir dir="core\languageDesign\editorLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.runtime.jar">
      <fileset dir="core\languageDesign\editorLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.editorLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.findUsagesLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.findUsagesLanguage.tmp">
      <fileset dir="core\languageDesign\findUsagesLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\findUsagesLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.findUsagesLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.findUsagesLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.findUsagesLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.helgins">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.tmp">
      <fileset dir="core\languageDesign\helgins" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\helgins" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.tmp\helgins.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.helgins.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.tmp" />
    <mkdir dir="core\languageDesign\helgins\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.runtime.jar">
      <fileset dir="core\languageDesign\helgins\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.helgins.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.intentionsLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.tmp">
      <fileset dir="core\languageDesign\intentionsLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\intentionsLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.tmp\intentionsLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.tmp" />
    <mkdir dir="core\languageDesign\intentionsLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.runtime.jar">
      <fileset dir="core\languageDesign\intentionsLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.intentionsLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mpslite">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp">
      <fileset dir="core\languageDesign\mps-lite\languages\mpslite" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\mps-lite\languages\mpslite" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\languageDesign\mps-lite">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp\mpslite.mpl" token="{mps_home}\core\languageDesign\mps-lite\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp\mpslite.mpl" token="{mps_home}\core\languageDesign\mps-lite\classes" value="{mps_home}\core\languageDesign\jetbrains.mpslite.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp" />
    <mkdir dir="core\languageDesign\mps-lite\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.runtime.jar">
      <fileset dir="core\languageDesign\mps-lite\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mpslite.tmp" />
  </target>
  <target name="pack.jetbrains.mps.nanoj">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.tmp">
      <fileset dir="core\languageDesign\mps-lite\languages\nanoj" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\mps-lite\languages\nanoj" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\languageDesign\mps-lite">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.tmp\nanoj.mpl" token="{mps_home}\core\languageDesign\mps-lite\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.nanoj.tmp" />
  </target>
  <target name="pack.jetbrains.mps.patterns">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.tmp">
      <fileset dir="core\languageDesign\patternLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\patternLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.tmp\patterns.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.patterns.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.tmp" />
    <mkdir dir="core\languageDesign\patternLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.runtime.jar">
      <fileset dir="core\languageDesign\patternLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.patterns.tmp" />
  </target>
  <target name="pack.jetbrains.mps.quotation">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.quotation.tmp">
      <fileset dir="core\languageDesign\quotation" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\quotation" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.quotation.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.quotation.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.quotation.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.pluginLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.tmp">
      <fileset dir="core\languageDesign\pluginLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\pluginLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.tmp\pluginLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.tmp" />
    <mkdir dir="core\languageDesign\pluginLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.runtime.jar">
      <fileset dir="core\languageDesign\pluginLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.pluginLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.sharedConcepts">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.tmp">
      <fileset dir="core\languageDesign\sharedConcepts" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\sharedConcepts" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.tmp\sharedConcepts.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.tmp" />
    <mkdir dir="core\languageDesign\sharedConcepts\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.runtime.jar">
      <fileset dir="core\languageDesign\sharedConcepts\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.sharedConcepts.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.smodelLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.tmp">
      <fileset dir="core\languageDesign\smodelLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\smodelLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.tmp\smodelLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.tmp" />
    <mkdir dir="core\languageDesign\smodelLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.runtime.jar">
      <fileset dir="core\languageDesign\smodelLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.smodelLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.ide.scriptLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguage.tmp">
      <fileset dir="core\languageDesign\scriptLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\scriptLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.ide.scriptLanguageInternal">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguageInternal.tmp">
      <fileset dir="core\languageDesign\scriptLanguageInternal" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\scriptLanguageInternal" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguageInternal.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguageInternal.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.ide.scriptLanguageInternal.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bootstrap.structureLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.tmp">
      <fileset dir="core\languageDesign\structureLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\structureLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.tmp\languageDescriptor.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.tmp" />
    <mkdir dir="core\languageDesign\structureLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.runtime.jar">
      <fileset dir="core\languageDesign\structureLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.bootstrap.structureLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.core">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.tmp">
      <fileset dir="core\languageDesign\core" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\core" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.tmp\languageDescriptor.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.core.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.tmp" />
    <mkdir dir="core\languageDesign\core\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.runtime.jar">
      <fileset dir="core\languageDesign\core\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.core.tmp" />
  </target>
  <target name="pack.jetbrains.mps.logging.refactoring">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.tmp">
      <fileset dir="core\languageDesign\refactoring" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\refactoring" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.tmp\refactoring.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.logging.refactoring.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.tmp" />
    <mkdir dir="core\languageDesign\refactoring\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.runtime.jar">
      <fileset dir="core\languageDesign\refactoring\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.logging.refactoring.tmp" />
  </target>
  <target name="pack.jetbrains.mps.transformation.test.inputLang">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.tmp">
      <fileset dir="core\languageDesign\transformation\test\inputLang" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\transformation\test\inputLang" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\languageDesign\transformation">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.tmp\inputLang.mpl" token="{mps_home}\core\languageDesign\transformation\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.inputLang.tmp" />
  </target>
  <target name="pack.jetbrains.mps.transformation.test.outputLang">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.tmp">
      <fileset dir="core\languageDesign\transformation\test\outputLang" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\transformation\test\outputLang" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="core\languageDesign\transformation">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.tmp\outputLang.mpl" token="{mps_home}\core\languageDesign\transformation\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.test.outputLang.tmp" />
  </target>
  <target name="pack.jetbrains.mps.transformation.TLBase">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.tmp">
      <fileset dir="core\languageDesign\transformation" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\transformation" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.tmp\languageDescriptor.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\languageDesign\jetbrains.mps.transformation.TLBase.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.tmp" />
    <mkdir dir="core\languageDesign\transformation\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.runtime.jar">
      <fileset dir="core\languageDesign\transformation\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\jetbrains.mps.transformation.TLBase.tmp" />
  </target>
  <target name="pack.smodelLanguage-samples">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage-samples.tmp">
      <fileset dir="core\languageDesign\smodelLanguage\solutions\samples" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\smodelLanguage\solutions\samples" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage-samples.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage-samples.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage-samples.tmp" />
  </target>
  <target name="pack.smodelLanguage_typetest">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage_typetest.tmp">
      <fileset dir="core\languageDesign\smodelLanguage\solutions\typetest" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\languageDesign\smodelLanguage\solutions\typetest" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage_typetest.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage_typetest.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\languageDesign\smodelLanguage_typetest.tmp" />
  </target>
  <target name="pack.jetbrains.mps.projectLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.tmp">
      <fileset dir="core\projectLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="core\projectLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.tmp\languageDescriptor.mpl" token="{language_descriptor}\classes" value="{mps_home}\core\jetbrains.mps.projectLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.tmp" />
    <mkdir dir="core\projectLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.runtime.jar">
      <fileset dir="core\projectLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\core\jetbrains.mps.projectLanguage.tmp" />
  </target>
  <target name="pack.ypath.main">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp">
      <fileset dir="platform\ypath\solutions\main" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\ypath\solutions\main" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\ypath">
        <include name="solutions\classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp\META-INF\MANIFEST.MF" token="/solutions\classes/" value="/solutions\classes/,/solutions/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp\main.msd" token="{mps_home}\platform\ypath\solutions\classes" value="{solution_descriptor}\solutions\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp\main.msd" token="{mps_home}\platform\ypath\solutions\classes" value="{mps_home}\platform\ypath.main.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp" />
    <mkdir dir="platform\ypath\solutions\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.runtime.jar">
      <fileset dir="platform\ypath\solutions\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.main.tmp" />
  </target>
  <target name="pack.ypath.test">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp">
      <fileset dir="platform\ypath\solutions\test" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\ypath\solutions\test" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\ypath">
        <include name="solutions\classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp\META-INF\MANIFEST.MF" token="/solutions\classes/" value="/solutions\classes/,/solutions/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp\test.msd" token="{mps_home}\platform\ypath\solutions\classes" value="{solution_descriptor}\solutions\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp\test.msd" token="{mps_home}\platform\ypath\classes" value="{mps_home}\platform\ypath.test.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp\test.msd" token="{mps_home}\platform\ypath\solutions\classes" value="{mps_home}\platform\ypath.test.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp" />
    <mkdir dir="platform\ypath\classes" />
    <mkdir dir="platform\ypath\solutions\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.runtime.jar">
      <fileset dir="platform\ypath\classes" />
      <fileset dir="platform\ypath\solutions\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\ypath.test.tmp" />
  </target>
  <target name="pack.jetbrains.mps.ypath">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp">
      <fileset dir="platform\ypath\languages\ypath" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\ypath\languages\ypath" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\ypath">
        <include name="runtime\classes\" />
      </fileset>
      <fileset dir="platform\ypath">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\META-INF\MANIFEST.MF" token="/runtime\classes/" value="/runtime\classes/,/runtime/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\ypath.mpl" token="{mps_home}\platform\ypath\runtime\classes" value="{language_descriptor}\runtime\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\ypath.mpl" token="{mps_home}\platform\ypath\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\ypath.mpl" token="{mps_home}\platform\ypath\classes" value="{mps_home}\platform\jetbrains.mps.ypath.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp\ypath.mpl" token="{mps_home}\platform\ypath\runtime\classes" value="{mps_home}\platform\jetbrains.mps.ypath.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp" />
    <mkdir dir="platform\ypath\classes" />
    <mkdir dir="platform\ypath\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.runtime.jar">
      <fileset dir="platform\ypath\classes" />
      <fileset dir="platform\ypath\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.ypath.tmp" />
  </target>
  <target name="pack.jetbrains.mps.buildlanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp">
      <fileset dir="platform\buildlanguage\languages\buildlanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\buildlanguage\languages\buildlanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\buildlanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp\buildlanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp\buildlanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{mps_home}\platform\jetbrains.mps.buildlanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp" />
    <mkdir dir="platform\buildlanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.runtime.jar">
      <fileset dir="platform\buildlanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.buildlanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.mpsLayoutLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.tmp">
      <fileset dir="platform\buildlanguage\languages\mpsLayoutLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\buildlanguage\languages\mpsLayoutLanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\buildlanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.tmp\mpsLayoutLanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsLayoutLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.mpsProjectLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.tmp">
      <fileset dir="platform\buildlanguage\languages\mpsProjectLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\buildlanguage\languages\mpsProjectLanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\buildlanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.tmp\mpsProjectLanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.mpsProjectLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.propertylanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp">
      <fileset dir="platform\buildlanguage\languages\propertylanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\buildlanguage\languages\propertylanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\buildlanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp\propertylanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp\propertylanguage.mpl" token="{mps_home}\platform\buildlanguage\classes" value="{mps_home}\platform\jetbrains.mps.propertylanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp" />
    <mkdir dir="platform\buildlanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.runtime.jar">
      <fileset dir="platform\buildlanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.propertylanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.bookLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp">
      <fileset dir="platform\textLanguage\languages\bookLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\textLanguage\languages\bookLanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\textLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp\bookLanguage.mpl" token="{mps_home}\platform\textLanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp\bookLanguage.mpl" token="{mps_home}\platform\textLanguage\classes" value="{mps_home}\platform\jetbrains.mps.bookLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp" />
    <mkdir dir="platform\textLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.runtime.jar">
      <fileset dir="platform\textLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.bookLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.regexp">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.tmp">
      <fileset dir="platform\regexp" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\regexp" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.tmp\regexp.mpl" token="{language_descriptor}\classes" value="{mps_home}\platform\jetbrains.mps.regexp.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.tmp\regexp.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\platform\jetbrains.mps.regexp.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.tmp" />
    <mkdir dir="platform\regexp\classes" />
    <mkdir dir="platform\regexp\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.runtime.jar">
      <fileset dir="platform\regexp\classes" />
      <fileset dir="platform\regexp\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.tmp" />
  </target>
  <target name="pack.jetbrains.mps.regexp.examples">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.examples.tmp">
      <fileset dir="platform\regexp\solutions\jetbrains.mps.regexp.examples" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\regexp\solutions\jetbrains.mps.regexp.examples" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.examples.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.examples.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.regexp.examples.tmp" />
  </target>
  <target name="pack.jetbrains.mps.textLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp">
      <fileset dir="platform\textLanguage\languages\textLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\textLanguage\languages\textLanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\textLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp\textLanguage.mpl" token="{mps_home}\platform\textLanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp\textLanguage.mpl" token="{mps_home}\platform\textLanguage\classes" value="{mps_home}\platform\jetbrains.mps.textLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp" />
    <mkdir dir="platform\textLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.runtime.jar">
      <fileset dir="platform\textLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.textLanguage.formula">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp">
      <fileset dir="platform\textLanguage\languages\formula" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\textLanguage\languages\formula" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\textLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp\formula.mpl" token="{mps_home}\platform\textLanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp\formula.mpl" token="{mps_home}\platform\textLanguage\classes" value="{mps_home}\platform\jetbrains.mps.textLanguage.formula.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp" />
    <mkdir dir="platform\textLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.runtime.jar">
      <fileset dir="platform\textLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.formula.tmp" />
  </target>
  <target name="pack.jetbrains.mps.textLanguage.table">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp">
      <fileset dir="platform\textLanguage\languages\table" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\textLanguage\languages\table" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="platform\textLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp\table.mpl" token="{mps_home}\platform\textLanguage\classes" value="{language_descriptor}\classes" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp\table.mpl" token="{mps_home}\platform\textLanguage\classes" value="{mps_home}\platform\jetbrains.mps.textLanguage.table.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp" />
    <mkdir dir="platform\textLanguage\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.runtime.jar">
      <fileset dir="platform\textLanguage\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.textLanguage.table.tmp" />
  </target>
  <target name="pack.jetbrains.mps.uiLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.tmp">
      <fileset dir="platform\uiLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\uiLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.tmp\uiLanguage.mpl" token="{language_descriptor}\classes" value="{mps_home}\platform\jetbrains.mps.uiLanguage.runtime.jar" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.tmp\uiLanguage.mpl" token="{language_descriptor}\runtime\classes" value="{mps_home}\platform\jetbrains.mps.uiLanguage.runtime.jar" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.tmp" />
    <mkdir dir="platform\uiLanguage\classes" />
    <mkdir dir="platform\uiLanguage\runtime\classes" />
    <jar destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.runtime.jar">
      <fileset dir="platform\uiLanguage\classes" />
      <fileset dir="platform\uiLanguage\runtime\classes" />
    </jar>
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.uiLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.baseLanguage.unitTest">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.baseLanguage.unitTest.tmp">
      <fileset dir="platform\unitTest" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\unitTest" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.baseLanguage.unitTest.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.baseLanguage.unitTest.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.baseLanguage.unitTest.tmp" />
  </target>
  <target name="pack.jetbrains.mps.xml">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.xml.tmp">
      <fileset dir="platform\xml" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="platform\xml" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.xml.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.xml.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\platform\jetbrains.mps.xml.tmp" />
  </target>
  <target name="pack.jetbrains.mps.ide.uiLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.uiLanguage.tmp">
      <fileset dir="workbench\ideUiLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="workbench\ideUiLanguage" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.uiLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.uiLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.uiLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.monitorLanguage">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.tmp">
      <fileset dir="workbench\monitorLanguage\languages\monitorLanguage" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="workbench\monitorLanguage\languages\monitorLanguage" includes="*.mpl, *.msd, *.devkit" />
      <fileset dir="workbench\monitorLanguage">
        <include name="classes\" />
      </fileset>
    </copy>
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.tmp\META-INF\MANIFEST.MF" token="/classes/" value="/classes/,/classes/" />
    <replace file="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.tmp\monitorLanguage.mpl" token="{mps_home}\workbench\monitorLanguage\classes" value="{language_descriptor}\classes" />
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.monitorLanguage.tmp" />
  </target>
  <target name="pack.jetbrains.mps.ide">
    <copy todir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.tmp">
      <fileset dir="workbench\ideSolution" excludes="**/*.java, **/*.mpl, **/*.msd, **/*.devkit, **/*.iml, **/*.ipr" />
      <fileset dir="workbench\ideSolution" includes="*.mpl, *.msd, *.devkit" />
    </copy>
    <zip destfile="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.mpsarch" basedir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.tmp" />
    <delete dir="${deploy.dir}\MPS-${build.number}.zip.tmp\\workbench\jetbrains.mps.ide.tmp" />
  </target>
</project>

