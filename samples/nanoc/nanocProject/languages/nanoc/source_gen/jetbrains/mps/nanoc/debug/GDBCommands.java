package jetbrains.mps.nanoc.debug;

/*Generated by MPS */

import jetbrains.mps.debug.executable.SimpleConsoleProcessHandler;
import java.io.File;

public class GDBCommands {
  public GDBCommands() {
  }

  public void startProcessUnderGDB(SimpleConsoleProcessHandler gdbProcess, String command) {
    File programFile = new File(command);
    File dir = programFile.getParentFile();
    String workingDir = dir.getAbsolutePath();
    gdbProcess.inputWithFlush("-environment-cd " + workingDir + "\n");
    gdbProcess.inputWithFlush("-file-exec-and-symbols " + command.replace(File.separatorChar, '/') + "\n");
    gdbProcess.inputWithFlush("-break-insert main\n");
    gdbProcess.inputWithFlush("-exec-run\n");
  }

  public void stopProcessUnderGDB(SimpleConsoleProcessHandler gdbProcess) {
    gdbProcess.inputWithFlush("kill\n");
  }
}
