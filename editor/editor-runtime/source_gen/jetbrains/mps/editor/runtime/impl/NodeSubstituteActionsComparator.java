package jetbrains.mps.editor.runtime.impl;

/*Generated by MPS */

import java.util.Comparator;
import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import java.util.UUID;
import org.jetbrains.mps.openapi.model.SModel;

public class NodeSubstituteActionsComparator implements Comparator<SubstituteAction> {
  private SNode myContainingRoot;
  public NodeSubstituteActionsComparator(SNode containingRoot) {
    myContainingRoot = containingRoot;
  }
  @Override
  public int compare(SubstituteAction action1, SubstituteAction action2) {
    Object parameter1 = action1.getParameterObject();
    Object parameter2 = action2.getParameterObject();

    if (parameter1 instanceof SNode) {
      return (parameter2 instanceof SNode ? compare((SNode) parameter1, (SNode) parameter2) : -1);
    } else {
      return (parameter2 instanceof SNode ? 1 : 0);
    }
  }
  private int compare(SNode node1, SNode node2) {
    if (SNodeOperations.isInstanceOf(node1, MetaAdapterFactory.getConcept(new UUID(-4094437568663370681l, -8968368868337559369l), 1169125787135l, "jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"))) {
      return (SNodeOperations.isInstanceOf(node2, MetaAdapterFactory.getConcept(new UUID(-4094437568663370681l, -8968368868337559369l), 1169125787135l, "jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration")) ? 0 : 1);
    } else if (SNodeOperations.isInstanceOf(node2, MetaAdapterFactory.getConcept(new UUID(-4094437568663370681l, -8968368868337559369l), 1169125787135l, "jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration"))) {
      return -1;
    }

    SModel containigModel = SNodeOperations.getModel(myContainingRoot);
    if (SNodeOperations.getModel(node1) != containigModel) {
      return (SNodeOperations.getModel(node2) != containigModel ? 0 : 1);
    } else if (SNodeOperations.getModel(node2) != containigModel) {
      return -1;
    }

    if (SNodeOperations.getContainingRoot(node1) != myContainingRoot) {
      return (SNodeOperations.getContainingRoot(node2) != myContainingRoot ? 0 : 1);
    } else if (SNodeOperations.getContainingRoot(node2) != myContainingRoot) {
      return -1;
    }

    SNode container1 = SNodeOperations.getNodeAncestor(node1, MetaAdapterFactory.getInterfaceConcept(new UUID(-3554657779850784990l, -7236703803128771572l), 1233160296597l, "jetbrains.mps.lang.core.structure.IContainer"), true, false);
    SNode container2 = SNodeOperations.getNodeAncestor(node2, MetaAdapterFactory.getInterfaceConcept(new UUID(-3554657779850784990l, -7236703803128771572l), 1233160296597l, "jetbrains.mps.lang.core.structure.IContainer"), true, false);
    if (container1 == container2) {
      return 0;
    }
    while (container1 != null) {
      container1 = SNodeOperations.getNodeAncestor(container1, MetaAdapterFactory.getInterfaceConcept(new UUID(-3554657779850784990l, -7236703803128771572l), 1233160296597l, "jetbrains.mps.lang.core.structure.IContainer"), false, false);
      if (container1 == container2) {
        return -1;
      }
    }
    return 1;
  }
}
