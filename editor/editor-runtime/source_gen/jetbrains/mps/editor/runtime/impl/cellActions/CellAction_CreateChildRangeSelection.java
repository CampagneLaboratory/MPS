package jetbrains.mps.editor.runtime.impl.cellActions;

/*Generated by MPS */

import jetbrains.mps.editor.runtime.cells.AbstractCellAction;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.nodeEditor.selection.NodeRangeSelection;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.openapi.editor.selection.Selection;

public class CellAction_CreateChildRangeSelection extends AbstractCellAction {
  private SNode myNode;
  private EditorContext myEditorContext;
  private NodeRangeSelection.RangeSelectionFilter myFilter;


  public CellAction_CreateChildRangeSelection(SNode node, NodeRangeSelection.RangeSelectionFilter filter, EditorContext editorContext) {
    super(false);
    myNode = node;
    myFilter = filter;
    myEditorContext = editorContext;
  }

  @Override
  public boolean canExecute(EditorContext context) {
    EditorCell selectedCell = context.getSelectedCell();
    return selectedCell != null && selectedCell.getSNode() == myNode;
  }

  public void execute(EditorContext context) {
    Selection newSelection = new NodeRangeSelection(myEditorContext.getEditorComponent(), myNode, myNode, myFilter);
    myEditorContext.getSelectionManager().pushSelection(newSelection);
    newSelection.ensureVisible();
  }
}
