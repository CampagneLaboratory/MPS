package jetbrains.mps.baseLanguage.unitTest.plugin;

/*Generated by MPS */

import jetbrains.mps.ide.ui.MPSTreeNode;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.smodel.IOperationContext;
import jetbrains.mps.ide.icons.IconManager;
import jetbrains.mps.bootstrap.smodelLanguage.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.bootstrap.smodelLanguage.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.ide.command.CommandProcessor;
import jetbrains.mps.ide.IDEProjectFrame;
import jetbrains.mps.ide.AbstractProjectFrame;

public class TestCaseTreeNode extends MPSTreeNode {

  protected SNode testCase;
  private TestState state;

  public  TestCaseTreeNode(IOperationContext operationContext, SNode testCase) {
    super(operationContext);
    this.testCase = testCase;
    this.updatePresentation();
  }

  public void updatePresentation() {
    this.setIcon(IconManager.getIconFor(this.testCase));
    this.setNodeIdentifier(this.testCase.getId());
    this.setText(SPropertyOperations.getString(this.testCase, "name"));
    this.setAdditionalText(SNodeOperations.getModel(this.testCase).getLongName());
  }

  public void setState(TestState state) {
    this.state = state;
  }

  public String getClassName() {
    final zClosureContext1 _zClosureContext = new zClosureContext1();
    _zClosureContext.className = null;
    CommandProcessor.instance().executeLightweightCommand(new Command2(TestCaseTreeNode.this, _zClosureContext));
    return _zClosureContext.className;
  }

  public void doubleClick() {
    IDEProjectFrame ide = (IDEProjectFrame)this.getOperationContext().getComponent(AbstractProjectFrame.class);
    ide.openNode(this.testCase, this.getOperationContext());
  }

  public int getToggleClickCount() {
    return -1;
  }

}
