package jetbrains.mps.graphLayout.intGeom2D;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.backports.LinkedList;

public class OrthogonalUtil {
  public static List<Point> refinePolyline(List<Point> polyline) {
    List<Point> refined = ListSequence.fromList(new LinkedList<Point>());
    Point prev = ListSequence.fromList(polyline).first();
    boolean prevVer = false;
    boolean firstSeg = true;
    ListSequence.fromList(refined).addElement(prev);
    for (Point next : ListSequence.fromList(polyline)) {
      if (next.equals(prev)) {
        continue;
      }
      boolean nextVer = prev.x == next.x;
      if (!(firstSeg)) {
        if (nextVer != prevVer) {
          ListSequence.fromList(refined).addElement(prev);
        }
      }
      firstSeg = false;
      prevVer = nextVer;
      prev = next;
    }
    ListSequence.fromList(refined).addElement(prev);
    return refined;
  }
}
