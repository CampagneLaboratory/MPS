package jetbrains.mps.graphLayout.util;

/*Generated by MPS */

import jetbrains.mps.graphLayout.graphLayout.ILayoutInfo;
import jetbrains.mps.graphLayout.graphLayout.LayoutInfo;
import jetbrains.mps.graphLayout.graph.Graph;
import jetbrains.mps.graphLayout.graph.INode;
import jetbrains.mps.graphLayout.graph.Node;
import jetbrains.mps.graphLayout.graph.IEdge;
import jetbrains.mps.graphLayout.graph.Edge;

public class LayoutInfoCopier extends GraphCopier {
  private ILayoutInfo myLayoutInfo;
  private LayoutInfo myInfoCopy;

  public LayoutInfoCopier(ILayoutInfo layoutInfo) {
    super(layoutInfo.getGraph());
    myLayoutInfo = layoutInfo;
    myInfoCopy = new LayoutInfo(getCopy());
  }

  @Override
  public Graph copySubgraph(Filter<INode> nodeFilter) {
    Graph copy = super.copySubgraph(nodeFilter);
    for (INode node : myLayoutInfo.getNodesWithSize()) {
      if (nodeFilter.accept(node)) {
        Node copyNode = getNodeCopy(node);
        myInfoCopy.setNodeSize(copyNode, myLayoutInfo.getNodeSize(node));
      }
    }
    for (IEdge edge : myLayoutInfo.getLabeledEdges()) {
      if (acceptEdge(nodeFilter, edge)) {
        Edge copyEdge = getEdgeCopy(edge);
        myInfoCopy.setLabelSize(copyEdge, myLayoutInfo.getLabelSize(edge));
      }
    }
    return copy;
  }

  public LayoutInfo getLayoutInfoCopy() {
    return myInfoCopy;
  }
}
