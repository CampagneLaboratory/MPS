package jetbrains.mps.closures.generator.baseLanguage.template.helper;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.bootstrap.smodelLanguage.generator.smodelAdapter.SLinkOperations;
import java.util.Collections;
import java.util.ArrayList;
import jetbrains.mps.bootstrap.smodelLanguage.generator.smodelAdapter.SNodeOperations;

public class StatementListUtil {

  public static List<SNode> selectStatementsUntilControlStatement(SNode slist) {
    if(SLinkOperations.getCount(slist, "statement") > 0) {
      return StatementListUtil.selectStatementsUntilControlStatement(slist, ((List<SNode>)SLinkOperations.getTargets(slist, "statement", true)).get(0));
    }
    return Collections.emptyList();
  }

  public static List<SNode> selectStatementsUntilControlStatement(SNode slist, SNode start) {
    List<SNode> res = new ArrayList<SNode>();
    boolean foundStart = false;
    for(SNode stmt : ((List<SNode>)SLinkOperations.getTargets(slist, "statement", true))) {
      if(stmt == start) {
        foundStart = true;
      }
      if(foundStart) {
        if(StatementListUtil.isControlStatement(stmt)) {
          break;
        }
        res.add(stmt);
      }
    }
    return res;
  }

  public static boolean isControlStatement(SNode stmt) {
    if(SNodeOperations.isInstanceOf(stmt, "jetbrains.mps.baseLanguage.structure.WhileStatement")) {
      return true;
    }
    if(SNodeOperations.isInstanceOf(stmt, "jetbrains.mps.baseLanguage.structure.DoWhileStatement")) {
      return true;
    }
    if(SNodeOperations.isInstanceOf(stmt, "jetbrains.mps.baseLanguage.structure.ForStatement")) {
      return true;
    }
    if(SNodeOperations.isInstanceOf(stmt, "jetbrains.mps.baseLanguage.structure.IfStatement")) {
      return true;
    }
    if(SNodeOperations.isInstanceOf(stmt, "jetbrains.mps.closures.structure.YieldStatement")) {
      return true;
    }
    return false;
  }

}
