<?xml version="1.0" encoding="UTF-8"?>
<model modelUID="r:f614deea-8cff-4e4a-82d2-ec479420b091(jetbrains.mps.build.custommps.plugin)">
  <persistence version="3" />
  <refactoringHistory />
  <language namespace="28f9e497-3b42-4291-aeba-0a1039153ab1(jetbrains.mps.lang.plugin)" />
  <language namespace="f3061a53-9226-4cc5-a443-f952ceaf5816(jetbrains.mps.baseLanguage)" />
  <language namespace="443f4c36-fcf5-4eb6-9500-8d06ed259e3e(jetbrains.mps.baseLanguage.classifiers)" />
  <language namespace="83888646-71ce-4f1c-9c53-c54016f6ad4f(jetbrains.mps.baseLanguage.collections)" />
  <language namespace="fd392034-7849-419d-9071-12563d152375(jetbrains.mps.baseLanguage.closures)" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902db(jetbrains.mps.baseLanguage.blTypes.constraints)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590338(jetbrains.mps.baseLanguage.closures.structure)" version="3" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590283(jetbrains.mps.lang.core.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902c1(jetbrains.mps.baseLanguage.constraints)" version="83" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ca(jetbrains.mps.baseLanguage.structure)" version="1" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895904d8(jetbrains.mps.build.packaging.structure)" version="7" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590334(jetbrains.mps.baseLanguage.closures.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590368(jetbrains.mps.lang.plugin.structure)" version="19" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590361(jetbrains.mps.lang.plugin.constraints)" version="19" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959036e(jetbrains.mps.baseLanguage.classifiers.constraints)" version="7" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895904d4(jetbrains.mps.build.packaging.constraints)" version="20" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902b4(jetbrains.mps.lang.typesystem.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590301(jetbrains.mps.lang.smodel.structure)" version="16" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959028c(jetbrains.mps.lang.structure.constraints)" version="11" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ae(jetbrains.mps.lang.typesystem.constraints)" version="17" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902fb(jetbrains.mps.lang.smodel.constraints)" version="21" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959033d(jetbrains.mps.lang.annotations.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590340(jetbrains.mps.lang.pattern.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590328(jetbrains.mps.baseLanguage.collections.constraints)" version="6" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959034b(jetbrains.mps.lang.quotation.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590292(jetbrains.mps.lang.structure.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959032e(jetbrains.mps.baseLanguage.collections.structure)" version="4" />
  <devkit namespace="2677cb18-f558-4e33-bc38-a5139cee06dc(jetbrains.mps.devkit.language-design)" />
  <maxImportIndex value="11" />
  <import index="1" modelUID="r:896f64dd-7cfe-4bc4-b401-38e2a027e9ae(jetbrains.mps.build.custommps.structure)" version="-1" />
  <import index="2" modelUID="f:java_stub#jetbrains.mps.workbench(jetbrains.mps.workbench@java_stub)" version="-1" />
  <import index="3" modelUID="f:java_stub#com.intellij.openapi.actionSystem(com.intellij.openapi.actionSystem@java_stub)" version="-1" />
  <import index="4" modelUID="f:java_stub#java.lang(java.lang@java_stub)" version="-1" />
  <import index="5" modelUID="f:java_stub#java.io(java.io@java_stub)" version="-1" />
  <import index="6" modelUID="r:00000000-0000-4000-0000-011c895904c7(jetbrains.mps.buildlanguage.plugin)" version="-1" />
  <import index="7" modelUID="f:java_stub#jetbrains.mps.workbench.tools(jetbrains.mps.workbench.tools@java_stub)" version="-1" />
  <import index="8" modelUID="f:java_stub#jetbrains.mps.smodel(jetbrains.mps.smodel@java_stub)" version="-1" />
  <import index="9" modelUID="r:3ffa047e-f111-477c-9b1d-805bb060825a(jetbrains.mps.build.distrib.structure)" version="0" />
  <import index="10" modelUID="r:0bb4a036-fad4-4002-a23a-c39abe15fba3(jetbrains.mps.build.distrib.behavior)" version="-1" />
  <import index="11" modelUID="r:00000000-0000-4000-0000-011c895904d3(jetbrains.mps.build.packaging.behavior)" version="-1" />
  <visible index="2" modelUID="r:00000000-0000-4000-0000-011c895904d8(jetbrains.mps.build.packaging.structure)" />
  <visible index="3" modelUID="r:00000000-0000-4000-0000-011c895904d7(jetbrains.mps.build.packaging.plugin)" />
  <node type="jetbrains.mps.lang.plugin.structure.ActionDeclaration" id="1240828056467">
    <property name="name" value="RunBuildCustomMpsScript" />
    <property name="outsideCommandExecution" value="true" />
    <property name="caption" value="Build Custom MPS" />
    <property name="iconPath" value="${language_descriptor}/icons/run.png" />
    <node role="parameter" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterDeclaration" id="1240828335941">
      <property name="name" value="currentNode" />
      <link role="key" targetNodeId="2.~MPSDataKeys.SNODE" resolveInfo="SNODE" />
    </node>
    <node role="parameter" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterDeclaration" id="1240828335942">
      <property name="name" value="currentModel" />
      <link role="key" targetNodeId="2.~MPSDataKeys.MODEL" resolveInfo="MODEL" />
    </node>
    <node role="parameter" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterDeclaration" id="1240828335944">
      <property name="name" value="project" />
      <link role="key" targetNodeId="3.~PlatformDataKeys.PROJECT" resolveInfo="PROJECT" />
    </node>
    <node role="parameter" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterDeclaration" id="1240828335945">
      <property name="name" value="context" />
      <link role="key" targetNodeId="2.~MPSDataKeys.OPERATION_CONTEXT" resolveInfo="OPERATION_CONTEXT" />
    </node>
    <node role="parameter" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterDeclaration" id="1240828335946">
      <property name="name" value="mpsProject" />
      <link role="key" targetNodeId="2.~MPSDataKeys.MPS_PROJECT" resolveInfo="MPS_PROJECT" />
    </node>
    <node role="executeFunction" type="jetbrains.mps.lang.plugin.structure.ExecuteBlock" id="1240828056468">
      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828056469">
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240828433803">
          <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240828433804">
            <property name="name" value="buildTool" />
            <node role="type" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1240828433805">
              <link role="classifier" targetNodeId="7.~BaseTool" resolveInfo="BaseTool" />
            </node>
            <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433806">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433807">
                <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240828433808" />
                <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240828433809">
                  <link role="member" targetNodeId="1240828335946" resolveInfo="mpsProject" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.plugin.structure.GetToolOperation" id="1240828433810">
                <link role="tool" targetNodeId="1240830394395" resolveInfo="BuildTool" />
              </node>
            </node>
          </node>
        </node>
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240828433811">
          <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828433812">
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240843832155">
              <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240843832156">
                <property name="name" value="layout" />
                <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1240843832157">
                  <link role="concept" targetNodeId="2v.1202916958754" resolveInfo="MPSLayout" />
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240843832158">
              <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240843832159">
                <property name="name" value="configuration" />
                <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1240843832160">
                  <link role="concept" targetNodeId="2v.1204115658627" resolveInfo="Configuration" />
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240843832161">
              <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240843832162">
                <property name="name" value="isSelectedByUser" />
                <node role="type" type="jetbrains.mps.baseLanguage.structure.BooleanType" id="1240843832163" />
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.lang.plugin.structure.ExecuteLightweightCommandStatement" id="1240843832164">
              <node role="commandClosureLiteral" type="jetbrains.mps.lang.plugin.structure.CommandClosureLiteral" id="1240843832165">
                <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240843832166">
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240843832167">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240843832168">
                      <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832169">
                        <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                      </node>
                      <node role="rValue" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="1240843832170">
                        <link role="concept" targetNodeId="2v.1202916958754" resolveInfo="MPSLayout" />
                        <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843832171">
                          <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240843832172" />
                          <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240843832173">
                            <link role="member" targetNodeId="1240828335941" resolveInfo="currentNode" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240843832174">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240844808718">
                      <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832176">
                        <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                      </node>
                      <node role="rValue" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240844813606">
                        <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240844813607">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240844813608">
                            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240844813609">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240844813610">
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetDescendantsOperation" id="1240844813611">
                                  <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1240844813612">
                                    <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1240844813613">
                                      <link role="conceptDeclaration" targetNodeId="1.1233149592028" resolveInfo="MPSBuild" />
                                    </node>
                                  </node>
                                </node>
                                <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240844813614">
                                  <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.GetFirstOperation" id="1240844813615" />
                            </node>
                            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkListAccess" id="1240844813616">
                              <link role="link" targetNodeId="2v.1204116468206" />
                            </node>
                          </node>
                          <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.GetFirstOperation" id="1240844813617" />
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="1240844813618">
                          <link role="link" targetNodeId="2v.1204115847973" />
                        </node>
                      </node>
                    </node>
                  </node>
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240843832182">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240843832183">
                      <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832184">
                        <link role="variableDeclaration" targetNodeId="1240843832162" resolveInfo="isSelectedByUser" />
                      </node>
                      <node role="rValue" type="jetbrains.mps.baseLanguage.structure.GreaterThanExpression" id="1240843832185">
                        <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.IntegerConstant" id="1240843832186">
                          <property name="value" value="1" />
                        </node>
                        <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843832187">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843832188">
                            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832189">
                              <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                            </node>
                            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkListAccess" id="1240843832190">
                              <link role="link" targetNodeId="2v.1204115898932" />
                            </node>
                          </node>
                          <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.GetSizeOperation" id="1240843832192" />
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240843832193">
              <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240843832194">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240843832195">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240843832196">
                    <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832197">
                      <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                    </node>
                    <node role="rValue" type="jetbrains.mps.baseLanguage.structure.StaticMethodCall" id="1240843832198">
                      <link role="baseMethodDeclaration" targetNodeId="3v.1240838311365" resolveInfo="chooseConfiguration" />
                      <link role="classConcept" targetNodeId="3v.1240838222024" resolveInfo="ConfigurationChooser" />
                      <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832199">
                        <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                      </node>
                      <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832200">
                        <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="condition" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832201">
                <link role="variableDeclaration" targetNodeId="1240843832162" resolveInfo="isSelectedByUser" />
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240843832202">
              <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240843832203">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ReturnStatement" id="1240843832204" />
              </node>
              <node role="condition" type="jetbrains.mps.baseLanguage.structure.EqualsExpression" id="1240843832205">
                <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.NullLiteral" id="1240843832206" />
                <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843832207">
                  <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240843854323">
              <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240843854324">
                <property name="name" value="isMPSBuildIncluded" />
                <node role="type" type="jetbrains.mps.baseLanguage.structure.BooleanType" id="1240843854325" />
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.lang.plugin.structure.ExecuteLightweightCommandStatement" id="1240843869334">
              <node role="commandClosureLiteral" type="jetbrains.mps.lang.plugin.structure.CommandClosureLiteral" id="1240843869335">
                <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240843869336">
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240843934464">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240843935994">
                      <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843934465">
                        <link role="variableDeclaration" targetNodeId="1240843854324" resolveInfo="isMPSBuildIncluded" />
                      </node>
                      <node role="rValue" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843938550">
                        <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843938551">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240843938552">
                            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843938553">
                              <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                            </node>
                            <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetDescendantsOperation" id="1240843938554">
                              <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1240843938555">
                                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1240843938556">
                                  <link role="conceptDeclaration" targetNodeId="1.1233149592028" resolveInfo="MPSBuild" />
                                </node>
                              </node>
                            </node>
                          </node>
                          <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.GetFirstOperation" id="1240843938557" />
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="1240843938558">
                          <link role="baseMethodDeclaration" targetNodeId="11.1213877333807" resolveInfo="included" />
                          <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843938559">
                            <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240828433838">
              <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240828433839">
                <property name="name" value="file" />
                <node role="type" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1240828433840">
                  <link role="classifier" targetNodeId="5.~File" resolveInfo="File" />
                </node>
                <node role="initializer" type="jetbrains.mps.baseLanguage.structure.StaticMethodCall" id="1240828433841">
                  <link role="classConcept" targetNodeId="3v.1224851548023" resolveInfo="GenerateTextFromBuild" />
                  <link role="baseMethodDeclaration" targetNodeId="3v.1224851567257" resolveInfo="generate" />
                  <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240836304539">
                    <link role="variableDeclaration" targetNodeId="1240843832159" resolveInfo="configuration" />
                  </node>
                  <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433843">
                    <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240828433844" />
                    <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240828433845">
                      <link role="member" targetNodeId="1240828335942" resolveInfo="currentModel" />
                    </node>
                  </node>
                  <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433846">
                    <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240828433847" />
                    <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240828433848">
                      <link role="member" targetNodeId="1240828335945" resolveInfo="context" />
                    </node>
                  </node>
                  <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433849">
                    <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240828433850" />
                    <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240828433851">
                      <link role="member" targetNodeId="1240828335946" resolveInfo="mpsProject" />
                    </node>
                  </node>
                  <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.BooleanConstant" id="1240828433852">
                    <property name="value" value="true" />
                  </node>
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240828433853">
              <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828433854">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ReturnStatement" id="1240828433855" />
              </node>
              <node role="condition" type="jetbrains.mps.baseLanguage.structure.EqualsExpression" id="1240828433856">
                <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.NullLiteral" id="1240828433857" />
                <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240828433858">
                  <link role="variableDeclaration" targetNodeId="1240828433839" resolveInfo="file" />
                </node>
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240843964916">
              <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240843964917">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240831319904">
                  <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240831319905">
                    <property name="name" value="path" />
                    <node role="type" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1240831319906">
                      <link role="classifier" targetNodeId="4.~String" resolveInfo="String" />
                    </node>
                    <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240831319907">
                      <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831319908">
                        <link role="variableDeclaration" targetNodeId="1240828433839" resolveInfo="file" />
                      </node>
                      <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240831319909">
                        <link role="baseMethodDeclaration" targetNodeId="5.~File.getAbsolutePath():java.lang.String" resolveInfo="getAbsolutePath" />
                      </node>
                    </node>
                  </node>
                </node>
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240831341536">
                  <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240831341537">
                    <property name="name" value="suffix" />
                    <node role="type" type="jetbrains.mps.baseLanguage.structure.StringType" id="1240831341538" />
                    <node role="initializer" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1240831341539">
                      <property name="value" value=".xml" />
                    </node>
                  </node>
                </node>
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240831276641">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240831279362">
                    <node role="rValue" type="jetbrains.mps.baseLanguage.structure.GenericNewExpression" id="1240831280856">
                      <node role="creator" type="jetbrains.mps.baseLanguage.structure.ClassCreator" id="1240831289001">
                        <link role="baseMethodDeclaration" targetNodeId="5.~File.&lt;init&gt;(java.lang.String)" resolveInfo="File" />
                        <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="1240831357712">
                          <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240831301547">
                            <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831319912">
                              <link role="variableDeclaration" targetNodeId="1240831319905" resolveInfo="path" />
                            </node>
                            <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240831308142">
                              <link role="baseMethodDeclaration" targetNodeId="4.~String.substring(int,int):java.lang.String" resolveInfo="substring" />
                              <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.IntegerConstant" id="1240831310162">
                                <property name="value" value="0" />
                              </node>
                              <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.MinusExpression" id="1240831328415">
                                <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240831332368">
                                  <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831341540">
                                    <link role="variableDeclaration" targetNodeId="1240831341537" resolveInfo="suffix" />
                                  </node>
                                  <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240831335092">
                                    <link role="baseMethodDeclaration" targetNodeId="4.~String.length():int" resolveInfo="length" />
                                  </node>
                                </node>
                                <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240831324044">
                                  <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831322812">
                                    <link role="variableDeclaration" targetNodeId="1240831319905" resolveInfo="path" />
                                  </node>
                                  <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240831326368">
                                    <link role="baseMethodDeclaration" targetNodeId="4.~String.length():int" resolveInfo="length" />
                                  </node>
                                </node>
                              </node>
                            </node>
                          </node>
                          <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="1240831432001">
                            <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831433519">
                              <link role="variableDeclaration" targetNodeId="1240831341537" resolveInfo="suffix" />
                            </node>
                            <node role="leftExpression" type="jetbrains.mps.lang.smodel.structure.StaticConceptMethodCall" id="1240831422831">
                              <link role="concept" targetNodeId="9.1230056066379" resolveInfo="DistribConfiguration" />
                              <link role="baseMethodDeclaration" targetNodeId="10.1240229578757" resolveInfo="getSuffix" />
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                    <node role="lValue" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240831276642">
                      <link role="variableDeclaration" targetNodeId="1240828433839" resolveInfo="file" />
                    </node>
                  </node>
                </node>
              </node>
              <node role="condition" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240843968719">
                <link role="variableDeclaration" targetNodeId="1240843854324" resolveInfo="isMPSBuildIncluded" />
              </node>
            </node>
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240829291789">
              <node role="expression" type="jetbrains.mps.baseLanguage.structure.StaticMethodCall" id="1240834495617">
                <link role="baseMethodDeclaration" targetNodeId="6.1240834761784" resolveInfo="runAntScript" />
                <link role="classConcept" targetNodeId="6.1240834761783" resolveInfo="AntRunner" />
                <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240834495618">
                  <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240834495619" />
                  <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240834495621">
                    <link role="member" targetNodeId="1240828335946" resolveInfo="mpsProject" />
                  </node>
                </node>
                <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240837426811">
                  <link role="variableDeclaration" targetNodeId="1240843832156" resolveInfo="layout" />
                </node>
                <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240834495623">
                  <link role="variableDeclaration" targetNodeId="1240828433839" resolveInfo="file" />
                </node>
                <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240834495624">
                  <link role="variableDeclaration" targetNodeId="1240828433804" resolveInfo="buildTool" />
                </node>
              </node>
            </node>
          </node>
          <node role="condition" type="jetbrains.mps.baseLanguage.structure.NotEqualsExpression" id="1240828433896">
            <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.NullLiteral" id="1240828433897" />
            <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240828433898">
              <link role="variableDeclaration" targetNodeId="1240828433804" resolveInfo="buildTool" />
            </node>
          </node>
          <node role="ifFalseStatement" type="jetbrains.mps.baseLanguage.structure.BlockStatement" id="1240828433899">
            <node role="statements" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828433900">
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240828433901">
                <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828433902">
                  <node role="operand" type="jetbrains.mps.baseLanguage.structure.StaticFieldReference" id="1240828433903">
                    <link role="classifier" targetNodeId="4.~System" resolveInfo="System" />
                    <link role="variableDeclaration" targetNodeId="4.~System.err" resolveInfo="err" />
                  </node>
                  <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240828433904">
                    <link role="baseMethodDeclaration" targetNodeId="5.~PrintStream.println(java.lang.String):void" resolveInfo="println" />
                    <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="1240828433905">
                      <property name="value" value="cannot find build tool " />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="updateBlock" type="jetbrains.mps.lang.plugin.structure.IsApplicableBlock" id="1240828345637">
      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828345638">
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="1240828345639">
          <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="1240828345640">
            <property name="name" value="tmpNode" />
            <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeType" id="1240828345641" />
            <node role="initializer" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828345642">
              <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240830351648" />
              <node role="operation" type="jetbrains.mps.lang.plugin.structure.ActionDataParameterReferenceOperation" id="1240830355201">
                <link role="member" targetNodeId="1240828335941" resolveInfo="currentNode" />
              </node>
            </node>
          </node>
        </node>
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.IfStatement" id="1240828359981">
          <node role="ifTrue" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240828359982">
            <node role="statement" type="jetbrains.mps.baseLanguage.structure.ReturnStatement" id="1240828364839">
              <node role="expression" type="jetbrains.mps.baseLanguage.structure.BooleanConstant" id="1240828367449">
                <property name="value" value="false" />
              </node>
            </node>
          </node>
          <node role="condition" type="jetbrains.mps.baseLanguage.structure.NotExpression" id="1240828361734">
            <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828362426">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240828362427">
                <link role="variableDeclaration" targetNodeId="1240828345640" resolveInfo="tmpNode" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="1240828362428">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1240828362429">
                  <link role="conceptDeclaration" targetNodeId="2v.1202916958754" resolveInfo="MPSLayout" />
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240828371766">
          <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828391218">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240828373314">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="1240828371767">
                <link role="variableDeclaration" targetNodeId="1240828345640" resolveInfo="tmpNode" />
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetDescendantsOperation" id="1240828376160">
                <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="1240828376161">
                  <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="1240828388843">
                    <link role="conceptDeclaration" targetNodeId="1.1233149592028" resolveInfo="MPSBuild" />
                  </node>
                </node>
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.IsNotEmptyOperation" id="1240828395712" />
          </node>
        </node>
      </node>
    </node>
  </node>
  <node type="jetbrains.mps.lang.plugin.structure.ToolDeclaration" id="1240830394395">
    <property name="name" value="BuildTool" />
    <property name="icon" value="${language_descriptor}\icons\build.png" />
    <property name="caption" value="Build Custom MPS" />
    <node role="getComponentBlock" type="jetbrains.mps.lang.plugin.structure.GetComponentBlock" id="1240830394396">
      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240830394397">
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.ReturnStatement" id="1240830394398">
          <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240830394399">
            <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240830394400" />
            <node role="operation" type="jetbrains.mps.baseLanguage.classifiers.structure.DefaultClassifierFieldAccessOperation" id="1240830394401">
              <link role="member" targetNodeId="1240830394402" resolveInfo="myResultPanel" />
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="fieldDeclaration" type="jetbrains.mps.baseLanguage.classifiers.structure.DefaultClassifierFieldDeclaration" id="1240830394402">
      <property name="name" value="myResultPanel" />
      <node role="visibility" type="jetbrains.mps.baseLanguage.structure.PrivateVisibility" id="1240830394403" />
      <node role="type" type="jetbrains.mps.baseLanguage.structure.ClassifierType" id="1240830394404">
        <link role="classifier" targetNodeId="6.1225567254164" resolveInfo="BuildScriptRunnerComponent" />
      </node>
    </node>
    <node role="initBlock" type="jetbrains.mps.lang.plugin.structure.ProjectPluginInitBlock" id="1240830394405">
      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240830394406">
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240830394407">
          <node role="expression" type="jetbrains.mps.baseLanguage.structure.AssignmentExpression" id="1240830394408">
            <node role="lValue" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240830394409">
              <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240830394410" />
              <node role="operation" type="jetbrains.mps.baseLanguage.classifiers.structure.DefaultClassifierFieldAccessOperation" id="1240830394411">
                <link role="member" targetNodeId="1240830394402" resolveInfo="myResultPanel" />
              </node>
            </node>
            <node role="rValue" type="jetbrains.mps.baseLanguage.structure.GenericNewExpression" id="1240830394412">
              <node role="creator" type="jetbrains.mps.baseLanguage.structure.ClassCreator" id="1240830394413">
                <link role="baseMethodDeclaration" targetNodeId="6.1225567254169" resolveInfo="BuildScriptRunnerComponent" />
                <node role="actualArgument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240830394414">
                  <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240830394415" />
                  <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240830394416">
                    <link role="baseMethodDeclaration" targetNodeId="7.~BaseTool.getProject():com.intellij.openapi.project.Project" resolveInfo="getProject" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="disposeBlock" type="jetbrains.mps.lang.plugin.structure.ProjectPluginDisposeBlock" id="1240830394417">
      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="1240830394418">
        <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="1240830394419">
          <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240830394420">
            <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="1240830394421">
              <node role="operand" type="jetbrains.mps.baseLanguage.classifiers.structure.ThisClassifierExpresson" id="1240830394422" />
              <node role="operation" type="jetbrains.mps.baseLanguage.classifiers.structure.DefaultClassifierFieldAccessOperation" id="1240830394423">
                <link role="member" targetNodeId="1240830394402" resolveInfo="myResultPanel" />
              </node>
            </node>
            <node role="operation" type="jetbrains.mps.baseLanguage.structure.InstanceMethodCallOperation" id="1240830394424">
              <link role="baseMethodDeclaration" targetNodeId="6.1233565519515" resolveInfo="dispose" />
            </node>
          </node>
        </node>
      </node>
    </node>
  </node>
  <visible index="4" modelUID="r:00000000-0000-4000-0000-011c895904a4(jetbrains.mps.ide.actions)" />
  <node type="jetbrains.mps.lang.plugin.structure.ActionGroupDeclaration" id="1240830169217">
    <property name="name" value="SNodeAddition" />
    <node role="contents" type="jetbrains.mps.lang.plugin.structure.ElementListContents" id="1240830169218">
      <node role="reference" type="jetbrains.mps.lang.plugin.structure.ActionInstance" id="1240830169219">
        <link role="action" targetNodeId="1240828056467" resolveInfo="RunBuildCustomMpsScript" />
      </node>
    </node>
    <node role="modifier" type="jetbrains.mps.lang.plugin.structure.ModificationStatement" id="1240830169220">
      <link role="modifiedGroup" targetNodeId="4v.1204991215587" resolveInfo="NodeActions" />
    </node>
  </node>
</model>

