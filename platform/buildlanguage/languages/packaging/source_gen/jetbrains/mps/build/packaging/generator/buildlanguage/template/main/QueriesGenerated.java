package jetbrains.mps.build.packaging.generator.buildlanguage.template.main;

/*Generated by MPS */

import jetbrains.mps.smodel.IOperationContext;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.generator.template.PropertyMacroContext;
import jetbrains.mps.build.packaging.behavior.Layout_Behavior;
import jetbrains.mps.build.packaging.behavior.Configuration_Behavior;
import jetbrains.mps.build.packaging.generator.buildlanguage.template.util.Util;
import jetbrains.mps.build.packaging.behavior.IAbstractCompositeComponent_Behavior;
import java.io.File;
import jetbrains.mps.build.packaging.behavior.AbstractProjectComponent_Behavior;
import jetbrains.mps.build.packaging.behavior.ICompositeComponent_Behavior;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.build.packaging.behavior.IStringExpression_Behavior;
import jetbrains.mps.build.packaging.behavior.Copy_Behavior;
import jetbrains.mps.build.packaging.behavior.Module_Behavior;
import jetbrains.mps.project.AbstractModule;
import org.apache.commons.lang.StringUtils;
import jetbrains.mps.build.packaging.behavior.Antcall_Behavior;
import jetbrains.mps.build.packaging.behavior.PathHolder_Behavior;
import jetbrains.mps.build.packaging.behavior.CompositePathComponent_Behavior;
import jetbrains.mps.generator.template.ReferenceMacroContext;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.IWhereFilter;
import jetbrains.mps.buildlanguage.behavior.PropertyReference_Behavior;
import jetbrains.mps.build.packaging.behavior.IMacroHolder_Behavior;
import jetbrains.mps.generator.template.IfMacroContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptPropertyOperations;
import jetbrains.mps.build.packaging.behavior.IVariableHolder_Behavior;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodesContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SModelOperations;
import jetbrains.mps.build.packaging.behavior.ModuleCycle_Behavior;
import jetbrains.mps.internal.collections.runtime.ISelector;
import java.util.Comparator;
import jetbrains.mps.build.packaging.behavior.ILayoutComponent_Behavior;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import java.util.Iterator;
import jetbrains.mps.baseLanguage.closures.runtime.YieldingIterator;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.generator.template.WeavingMappingRuleContext;
import jetbrains.mps.generator.template.MappingScriptContext;
import java.util.Map;
import jetbrains.mps.project.IModule;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.LinkedHashMap;
import jetbrains.mps.project.DevKit;
import java.util.ArrayList;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.LinkedHashSet;
import jetbrains.mps.make.dependencies.StronglyConnectedModules;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import java.util.HashSet;
import jetbrains.mps.smodel.Generator;

public class QueriesGenerated {
  public static boolean baseMappingRule_Condition_1224770908054(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return SPropertyOperations.getBoolean(_context.getNode(), "compile");
  }

  public static boolean baseMappingRule_Condition_1221758915287(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return ListSequence.fromList(SNodeOperations.getDescendants(_context.getNode(), "jetbrains.mps.build.packaging.structure.Module", false, new String[]{})).isNotEmpty();
  }

  public static boolean baseMappingRule_Condition_1672810677919754496(final IOperationContext operationContext, final BaseMappingRuleContext _context) {
    return (SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false) != null);
  }

  public static Object propertyMacro_GetPropertyValue_1219156723142(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "antName");
  }

  public static Object propertyMacro_GetPropertyValue_1230209762850(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Layout_Behavior.call_getDefaultTargetName_1230209625713(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()));
  }

  public static Object propertyMacro_GetPropertyValue_1203614993869(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1203620045650(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1203614794462(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Configuration_Behavior.call_getBuildFileName_1230217425313(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1203622940784(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1203622771003(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1203622819102(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1204107873448(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getExcludes_1213877279373(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1206440132165(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1239624197384(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_1239624236213(final IOperationContext operationContext, final PropertyMacroContext _context) {
    String result = "";
    for (SNode v : ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "value", true))) {
      result += IStringExpression_Behavior.call_getValue_1213877173054(v);
    }
    return result;
  }

  public static Object propertyMacro_GetPropertyValue_1203622549331(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1204107836203(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getExcludes_1213877279373(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1206440112827(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1233320407385(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1204016660715(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1204107798457(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Copy_Behavior.call_getExcludes_1213877251358(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1206439785892(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Copy_Behavior.call_getIncludes_1213877251415(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1209893088423(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1209893108623(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getExcludes_1213877279373(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1209893126195(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1209915395009(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "filemode");
  }

  public static Object propertyMacro_GetPropertyValue_1209915440098(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "dirmode");
  }

  public static Object propertyMacro_GetPropertyValue_1204018667699(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1204022349926(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return "pack." + SPropertyOperations.getString(_context.getNode(), "name").replace(File.separator, "_");
  }

  public static Object propertyMacro_GetPropertyValue_1210098113087(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + Module_Behavior.call_getModuleJarPath_1213877515137(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1237395828460(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return AbstractModule.MODULE_DIR;
  }

  public static Object propertyMacro_GetPropertyValue_1175062284955467608(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return AbstractModule.MODULE_DIR;
  }

  public static Object propertyMacro_GetPropertyValue_2739262311775160732(final IOperationContext operationContext, final PropertyMacroContext _context) {
    String s = SPropertyOperations.getString(_context.getNode(), "moduleRelativePath").replace(File.separator, Util.SEPARATOR);
    if (s == null) {
      _context.showErrorMessage(null, "language: model root folder should be placed under language root: " + SPropertyOperations.getString(_context.getNode(), "fullPath"));
      s = "";
    } else if (StringUtils.isNotEmpty(s)) {
      s = "/" + s;
    }
    return AbstractModule.MODULE_DIR + s;
  }

  public static Object propertyMacro_GetPropertyValue_1210098064936(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + Module_Behavior.call_getRuntimeJarPath_1213877515126(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_2850282874221194397(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return "pack." + SPropertyOperations.getString(_context.getNode(), "name").replace(File.separator, "_");
  }

  public static Object propertyMacro_GetPropertyValue_2850282874221203269(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + Module_Behavior.call_getModuleFolderPath_2850282874221203279(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_2850282874221204284(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + Module_Behavior.call_getModuleFolderPath_2850282874221203279(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_2850282874221206209(final IOperationContext operationContext, final PropertyMacroContext _context) {
    String s = SPropertyOperations.getString(_context.getNode(), "moduleRelativePath").replace(File.separator, Util.SEPARATOR);
    if (s == null) {
      _context.showErrorMessage(null, "language: model root folder should be placed under language root: " + SPropertyOperations.getString(_context.getNode(), "fullPath"));
      s = "";
    } else if (StringUtils.isNotEmpty(s)) {
      s = "/" + s;
    }
    return Util.SEPARATOR + Module_Behavior.call_getModuleFolderPath_2850282874221203279(SLinkOperations.getTarget(_context.getNode(), "module", false)) + s;
  }

  public static Object propertyMacro_GetPropertyValue_1204019666208(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name") + "-languages";
  }

  public static Object propertyMacro_GetPropertyValue_1204122982909(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(SNodeOperations.cast(SNodeOperations.getParent(_context.getNode()), "jetbrains.mps.build.packaging.structure.ICompositeComponent")).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1205332632356(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1210846061742(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + IAbstractCompositeComponent_Behavior.call_getChildrenTargetDir_1237389224202(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1210846095008(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + Antcall_Behavior.call_getOutput_1213877286282(_context.getNode()).replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1217517606639(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_1217518534457(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "module", false), "name").replace(File.separator, "_");
  }

  public static Object propertyMacro_GetPropertyValue_1216902460852(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name") + "-compile";
  }

  public static Object propertyMacro_GetPropertyValue_1219419214201(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_7857794759872078763(final IOperationContext operationContext, final PropertyMacroContext _context) {
    if (StringUtils.isNotEmpty(SPropertyOperations.getString(_context.getNode(), "scriptsFolder"))) {
      return "..";
    } else {
      return ".";
    }
  }

  public static Object propertyMacro_GetPropertyValue_1219156215258(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return IStringExpression_Behavior.call_getValue_1213877173054(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1219158078257(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return IStringExpression_Behavior.call_getValue_1213877173054(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1203622327849(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_8804596799833413905(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.getTemplateValue() + SPropertyOperations.getString(_context.getNode(), "name") + ".";
  }

  public static Object propertyMacro_GetPropertyValue_1220026680305(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return PathHolder_Behavior.call_getPathWithoutMacro_1219770843283(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1220026711439(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return PathHolder_Behavior.call_getValue_1219231432401(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_1220983382899(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return CompositePathComponent_Behavior.call_getPath_1220983419344(SLinkOperations.getTarget(_context.getNode(), "compositePathComponent", true));
  }

  public static Object propertyMacro_GetPropertyValue_1220986324545(final IOperationContext operationContext, final PropertyMacroContext _context) {
    String path = CompositePathComponent_Behavior.call_getPath_1220983419344(SLinkOperations.getTarget(_context.getNode(), "compositePathComponent", true));
    File[] roots = File.listRoots();
    if (roots.length == 1 && roots[0].getAbsolutePath().equals("/")) {
      path = "/" + path;
    }
    return path;
  }

  public static Object propertyMacro_GetPropertyValue_1234272879020(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1234272879041(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(SNodeOperations.getParent(_context.getNode())).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_1234272627885(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return _context.createUniqueName("replace", null);
  }

  public static Object propertyMacro_GetPropertyValue_1234978065505(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return SPropertyOperations.getString(_context.getNode(), "name");
  }

  public static Object propertyMacro_GetPropertyValue_4159241239519682269(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR + AbstractProjectComponent_Behavior.call_getPath_1213877333777(_context.getNode()).getPath().replace(File.separator, Util.SEPARATOR);
  }

  public static Object propertyMacro_GetPropertyValue_34695628122115591(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR;
  }

  public static Object propertyMacro_GetPropertyValue_34695628122115601(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return Util.SEPARATOR;
  }

  public static Object propertyMacro_GetPropertyValue_4104037887205451205(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return PathHolder_Behavior.call_getPathWithoutMacro_1219770843283(_context.getNode());
  }

  public static Object propertyMacro_GetPropertyValue_4104037887205451188(final IOperationContext operationContext, final PropertyMacroContext _context) {
    return PathHolder_Behavior.call_getValue_1219231432401(_context.getNode());
  }

  public static Object referenceMacro_GetReferent_1240840479911(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240841047944(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840294750(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840306379(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840752594(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "LayoutToPropertyNode");
  }

  public static Object referenceMacro_GetReferent_1240840735467(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840773419(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840783973(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840750954(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840759868(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1204022248333(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "LanguageTargets");
  }

  public static Object referenceMacro_GetReferent_1240840687220(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840829512(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840823386(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840703152(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840717719(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1230233294691(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "targetDeclaration", false);
  }

  public static Object referenceMacro_GetReferent_1240840629555(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840665834(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840670841(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1234280254374(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "ReplaceTargets");
  }

  public static Object referenceMacro_GetReferent_7857794759871909129(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), "cycle", false), "ModuleCycleToCycle");
  }

  public static Object referenceMacro_GetReferent_1219156437486(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), "variable", false), "VariableToPropertyDeclaration");
  }

  public static Object referenceMacro_GetReferent_1220026621744(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    SNode holder = SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.IMacroHolder", false, false);
    if (holder == null) {
      List<SNode> descendants = SNodeOperations.getDescendants(SNodeOperations.getAncestor(_context.getNode(), null, false, true), "jetbrains.mps.build.packaging.structure.Macro", false, new String[]{});
      SNode macro = ListSequence.fromList(descendants).findFirst(new IWhereFilter<SNode>() {
        public boolean accept(SNode it) {
          return SPropertyOperations.getString(it, "name").equals(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", false), "name"));
        }
      });
      if (macro != null) {
        return ListSequence.fromList(_context.getAllOutputNodesByInputNodeAndMappingLabel(macro, "MacroToPropertyDeclaration")).first();
      }
      return ListSequence.fromList(PropertyReference_Behavior.getAllVisibleDeclarations_1239123615225(_context.getOutputNode())).findFirst(new IWhereFilter<SNode>() {
        public boolean accept(SNode it) {
          return SPropertyOperations.getString(it, "name").equals(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", false), "name"));
        }
      });
    }
    SNode macro = IMacroHolder_Behavior.call_findMacroForReference_1234972707641(holder, SLinkOperations.getTarget(_context.getNode(), "macro", false));
    return ListSequence.fromList(_context.getAllOutputNodesByInputNodeAndMappingLabel(macro, "MacroToPropertyDeclaration")).first();
  }

  public static Object referenceMacro_GetReferent_1220983242941(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    SNode holder = SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.IMacroHolder", false, false);
    if (holder == null) {
      List<SNode> descendants = SNodeOperations.getDescendants(SNodeOperations.getAncestor(_context.getNode(), null, false, true), "jetbrains.mps.build.packaging.structure.Macro", false, new String[]{});
      for (SNode m : ListSequence.fromList(descendants)) {
        if (SPropertyOperations.getString(m, "name").equals(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", true), "name"))) {
          return m;
        }
      }
      return ListSequence.fromList(PropertyReference_Behavior.getAllVisibleDeclarations_1239123615225(_context.getOutputNode())).findFirst(new IWhereFilter<SNode>() {
        public boolean accept(SNode it) {
          return SPropertyOperations.getString(it, "name").equals(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", true), "name"));
        }
      });
    }
    SNode macro = IMacroHolder_Behavior.call_findMacroForReference_1234972707641(holder, SLinkOperations.getTarget(_context.getNode(), "macro", true));
    return ListSequence.fromList(_context.getAllOutputNodesByInputNodeAndMappingLabel(macro, "MacroToPropertyDeclaration")).first();
  }

  public static Object referenceMacro_GetReferent_1230221653582(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SLinkOperations.getTarget(SLinkOperations.getTarget((_context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), "configuration", false), "ConfigurationToProject")), "default", true), "targetDeclaration", false);
  }

  public static Object referenceMacro_GetReferent_1240840845369(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_1240840856055(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_8148924375507507648(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "propertyNode", false);
  }

  public static Object referenceMacro_GetReferent_4159241239519682285(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getOutputNodeByInputNodeAndMappingLabel(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "LayoutToPropertyNode"), "declaration", true)).first();
  }

  public static Object referenceMacro_GetReferent_4104037887205451195(final IOperationContext operationContext, final ReferenceMacroContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(SLinkOperations.getTarget(_context.getNode(), "macro", false), "MacroToMacro");
  }

  public static boolean ifMacro_Condition_1220361608323(final IOperationContext operationContext, final IfMacroContext _context) {
    List<SNode> references = SNodeOperations.getDescendants(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", true, false), "jetbrains.mps.build.packaging.structure.VariableReference", false, new String[]{});
    for (SNode ref : ListSequence.fromList(references)) {
      if (SLinkOperations.getTarget(ref, "variable", false) == _context.getNode()) {
        return true;
      }
    }
    return false;
  }

  public static boolean ifMacro_Condition_1224776239614(final IOperationContext operationContext, final IfMacroContext _context) {
    return SPropertyOperations.getBoolean(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "compile");
  }

  public static boolean ifMacro_Condition_1217529239036(final IOperationContext operationContext, final IfMacroContext _context) {
    return SPropertyOperations.getBoolean(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "compile");
  }

  public static boolean ifMacro_Condition_1203619982544(final IOperationContext operationContext, final IfMacroContext _context) {
    return SConceptPropertyOperations.getBoolean(_context.getNode(), "cleanAfterTheJob");
  }

  public static boolean ifMacro_Condition_1229523121820(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(SPropertyOperations.getString(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "scriptsFolder"));
  }

  public static boolean ifMacro_Condition_1240398963466(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "propertyFile", true) != null);
  }

  public static boolean ifMacro_Condition_1226346345677(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(Copy_Behavior.call_getExcludes_1213877251358(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1226346367196(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1239624138320(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "manifest", true) != null);
  }

  public static boolean ifMacro_Condition_1226346311970(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(ICompositeComponent_Behavior.call_getExcludes_1213877279373(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1226346323637(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1203622509516(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "sourcePath", true) != null);
  }

  public static boolean ifMacro_Condition_1226346273741(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(Copy_Behavior.call_getExcludes_1213877251358(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1226346293894(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(Copy_Behavior.call_getIncludes_1213877251415(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1204016587285(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "sourcePath", true) != null);
  }

  public static boolean ifMacro_Condition_1226345902716(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(ICompositeComponent_Behavior.call_getExcludes_1213877279373(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1226345946802(final IOperationContext operationContext, final IfMacroContext _context) {
    return StringUtils.isNotEmpty(ICompositeComponent_Behavior.call_getIncludes_1213877279430(_context.getNode()));
  }

  public static boolean ifMacro_Condition_1209915520020(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SPropertyOperations.getString(_context.getNode(), "filemode") != null) && !(SPropertyOperations.getString(_context.getNode(), "filemode").equals(""));
  }

  public static boolean ifMacro_Condition_1209915566250(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SPropertyOperations.getString(_context.getNode(), "dirmode") != null) && !(SPropertyOperations.getString(_context.getNode(), "dirmode").equals(""));
  }

  public static boolean ifMacro_Condition_1210254552692(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SPropertyOperations.getString(_context.getNode(), "fullPath").endsWith("jar"));
  }

  public static boolean ifMacro_Condition_1237396009300(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SPropertyOperations.getString(_context.getNode(), "fullPath").endsWith(".jar"));
  }

  public static boolean ifMacro_Condition_1210099219016(final IOperationContext operationContext, final IfMacroContext _context) {
    return ListSequence.fromList(Module_Behavior.call_getRuntimeClassPath_1213877515098(_context.getNode(), false)).isNotEmpty();
  }

  public static boolean ifMacro_Condition_1210175748472(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SPropertyOperations.getString(_context.getNode(), "fullPath").endsWith(".jar"));
  }

  public static boolean ifMacro_Condition_2850282874221194302(final IOperationContext operationContext, final IfMacroContext _context) {
    return ListSequence.fromList(Module_Behavior.call_getRuntimeClassPath_1213877515098(_context.getNode(), false)).isNotEmpty() || ListSequence.fromList(Module_Behavior.call_getClassPathDirectories_1213877515083(_context.getNode())).isNotEmpty() || !(SPropertyOperations.getBoolean(_context.getNode(), "doNotJar"));
  }

  public static boolean ifMacro_Condition_1225993322931(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "title", true) != null);
  }

  public static boolean ifMacro_Condition_1240852461262(final IOperationContext operationContext, final IfMacroContext _context) {
    return SPropertyOperations.getBoolean(_context.getNode(), "append");
  }

  public static boolean ifMacro_Condition_1219157474820(final IOperationContext operationContext, final IfMacroContext _context) {
    SNode layout = SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false);
    return (layout == null) || (!(ListSequence.fromList(SLinkOperations.getTargets(layout, "builtInVariable", true)).contains(SLinkOperations.getTarget(_context.getNode(), "variable", false))) && ListSequence.fromList(IVariableHolder_Behavior.call_getAllVariable_1234864693585(layout)).contains(SLinkOperations.getTarget(_context.getNode(), "variable", false)));
  }

  public static boolean ifMacro_Condition_4993758969474299268(final IOperationContext operationContext, final IfMacroContext _context) {
    return SPropertyOperations.getBoolean(_context.getNode(), "useTmpDir");
  }

  public static boolean ifMacro_Condition_1220026604203(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "macro", false) != null);
  }

  public static boolean ifMacro_Condition_1220986250252(final IOperationContext operationContext, final IfMacroContext _context) {
    return !(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", true), "name").equals("basedir")) && !(StringUtils.isEmpty(SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), "macro", true), "name")));
  }

  public static boolean ifMacro_Condition_4104037887205451177(final IOperationContext operationContext, final IfMacroContext _context) {
    return (SLinkOperations.getTarget(_context.getNode(), "macro", false) != null);
  }

  public static SNode sourceNodeQuery_8148924375507507659(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "propertyFile", true);
  }

  public static SNode sourceNodeQuery_1221143067883(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static SNode sourceNodeQuery_1221139756574(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static SNode sourceNodeQuery_1220983551995(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static SNode sourceNodeQuery_1220026769988(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1239195389762(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return Module_Behavior.call_getModuleDescriptorFile_6863060912307764362(_context.getNode());
  }

  public static SNode sourceNodeQuery_1175062284955467589(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return Module_Behavior.call_getModuleBaseDirectory_6863060912307757632(_context.getNode());
  }

  public static SNode sourceNodeQuery_2739262311775160699(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1237396009295(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1237396009315(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1220027346559(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1220027376314(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_2850282874221205842(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return Module_Behavior.call_getModuleDescriptorFile_6863060912307764362(_context.getNode());
  }

  public static SNode sourceNodeQuery_2850282874221205855(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return Module_Behavior.call_getModuleBaseDirectory_6863060912307757632(_context.getNode());
  }

  public static SNode sourceNodeQuery_2850282874221206141(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return _context.getNode();
  }

  public static SNode sourceNodeQuery_1219156936386(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "message", true);
  }

  public static SNode sourceNodeQuery_4470173663067859704(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return Module_Behavior.call_getClassesGen_3315989002810564857(SLinkOperations.getTarget(_context.getNode(), "module", false));
  }

  public static SNode sourceNodeQuery_1219156054317(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "left", true);
  }

  public static SNode sourceNodeQuery_1219156071324(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "right", true);
  }

  public static SNode sourceNodeQuery_1234272879009(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static SNode sourceNodeQuery_1234272879061(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "first", true);
  }

  public static SNode sourceNodeQuery_1234272879070(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "second", true);
  }

  public static SNode sourceNodeQuery_8148924375507507636(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "file", true);
  }

  public static SNode sourceNodeQuery_888657369809429068(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static SNode sourceNodeQuery_888657369809461634(final IOperationContext operationContext, final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(_context.getNode(), "sourcePath", true);
  }

  public static Iterable sourceNodesQuery_1234271765511(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SNodeOperations.getDescendants(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", false, false), "jetbrains.mps.build.packaging.structure.Replace", false, new String[]{})).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return AbstractProjectComponent_Behavior.call_included_1213877333807(it, _context.getNode());
      }
    });
  }

  public static Iterable sourceNodesQuery_1234978171536(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "macro", true);
  }

  public static Iterable sourceNodesQuery_1219156680507(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), "variable", true);
  }

  public static Iterable sourceNodesQuery_1203613712380(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(Layout_Behavior.call_getTopologicalSortedComponents_1213877228296(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), _context.getNode())).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return SNodeOperations.isInstanceOf(it, "jetbrains.mps.build.packaging.structure.ICompositeComponent");
      }
    });
  }

  public static Iterable sourceNodesQuery_1203620149561(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Layout_Behavior.call_getTopologicalSortedComponents_1213877228296(Configuration_Behavior.call_getLayout_1213877261819(_context.getNode()), _context.getNode());
  }

  public static Iterable sourceNodesQuery_1203619895801(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SModelOperations.getNodes(_context.getInputModel(), "jetbrains.mps.build.packaging.structure.ICompositeComponent");
  }

  public static Iterable sourceNodesQuery_1239624209612(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(SLinkOperations.getTarget(_context.getNode(), "manifest", true), "manifestAttribute", true);
  }

  public static Iterable sourceNodesQuery_1239193117876(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(_context.getNode(), "macro", true);
  }

  public static Iterable sourceNodesQuery_1204020868967(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(Layout_Behavior.call_getModules_1213877228340(_context.getNode())).where(new IWhereFilter<SNode>() {
      public boolean accept(SNode it) {
        return Module_Behavior.call_getModule_1213877515148(it) != null && !(Module_Behavior.call_getModule_1213877515148(it).isPackaged());
      }
    });
  }

  public static Iterable sourceNodesQuery_1210254517273(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Module_Behavior.call_getClassPathDirectories_1213877515083(_context.getNode());
  }

  public static Iterable sourceNodesQuery_2739262311775160744(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Module_Behavior.call_getModelRootPaths_2739262311775052381(_context.getNode());
  }

  public static Iterable sourceNodesQuery_1237395979883(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Module_Behavior.call_getClassPathDirectories_1213877515083(_context.getNode());
  }

  public static Iterable sourceNodesQuery_1210099260514(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Module_Behavior.call_getRuntimeClassPath_1213877515098(_context.getNode(), false);
  }

  public static Iterable sourceNodesQuery_2850282874221206107(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return Module_Behavior.call_getModelRootPaths_2739262311775052381(_context.getNode());
  }

  public static Iterable sourceNodesQuery_7857794759871909114(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(_context.getNode(), "dependency", true);
  }

  public static Iterable sourceNodesQuery_4470173663067859641(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(ModuleCycle_Behavior.call_getClassPath_1218646038565(_context.getNode())).sort(new ISelector<SNode, Comparable<?>>() {
      public Comparable<?> select(SNode it) {
        return SPropertyOperations.getString(it, "fullPath");
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_1217505538283(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(_context.getNode(), "cycle", true);
  }

  public static Iterable sourceNodesQuery_4470173663067859683(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(Module_Behavior.call_getClassPathDirectories_1213877515083(SLinkOperations.getTarget(_context.getNode(), "module", false))).sort(new ISelector<SNode, Comparable<?>>() {
      public Comparable<?> select(SNode it) {
        return SPropertyOperations.getString(it, "fullPath");
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_4470173663067859661(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(Module_Behavior.call_getSourcesDirectories_1775602641704992067(SLinkOperations.getTarget(_context.getNode(), "module", false))).sort(new ISelector<SNode, Comparable<?>>() {
      public Comparable<?> select(SNode it) {
        return SPropertyOperations.getString(it, "fullPath");
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_1217518508070(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "moduleReference", true)).sort(new ISelector<SNode, Comparable<?>>() {
      public Comparable<?> select(SNode it) {
        return SPropertyOperations.getString(SLinkOperations.getTarget(it, "module", false), "name");
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_1219419191024(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(SLinkOperations.getTargets(_context.getNode(), "macro", true)).sort(new Comparator<SNode>() {
      public int compare(SNode a, SNode b) {
        return SPropertyOperations.getString(a, "name").compareTo(SPropertyOperations.getString(b, "name"));
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_4470173663067771918(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return ListSequence.fromList(ModuleCycle_Behavior.getMPSClassPath_1218716245482(ILayoutComponent_Behavior.call_getPath_1213877230696(_context.getNode()), SLinkOperations.getTargets(SNodeOperations.getAncestor(_context.getNode(), "jetbrains.mps.build.packaging.structure.Layout", true, true), "macro", true))).sort(new ISelector<SNode, Comparable<?>>() {
      public Comparable<?> select(SNode it) {
        return SPropertyOperations.getString(it, "fullPath");
      }
    }, true);
  }

  public static Iterable sourceNodesQuery_1234272879077(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return SLinkOperations.getTargets(_context.getNode(), "replacingPair", true);
  }

  public static Iterable sourceNodesQuery_1672810677919754488(final IOperationContext operationContext, final SourceSubstituteMacroNodesContext _context) {
    return new _FunctionTypes._return_P1_E0<Iterable<SNode>, Iterable<SNode>>() {
      public Iterable<SNode> invoke(final Iterable<SNode> in) {
        return new Iterable<SNode>() {
          public Iterator<SNode> iterator() {
            return new YieldingIterator<SNode>() {
              private int __CP__ = 0;
              private SNode _7__yield_x583g4_a0a0a0a0a0tg;
              private Iterator<SNode> _7__yield_x583g4_a0a0a0a0a0tg_it;
              private SNode _2_apc;
              private Iterator<SNode> _2_apc_it;

              protected boolean moveToNext() {
__loop__:
                do {
__switch__:
                  switch (this.__CP__) {
                    case -1:
                      assert false : "Internal error";
                      return false;
                    case 2:
                      this._2_apc_it = in.iterator();
                    case 3:
                      if (!(this._2_apc_it.hasNext())) {
                        this.__CP__ = 1;
                        break;
                      }
                      this._2_apc = this._2_apc_it.next();
                      this.__CP__ = 4;
                      break;
                    case 7:
                      this._7__yield_x583g4_a0a0a0a0a0tg_it = Sequence.fromIterable(invoke(SLinkOperations.getTargets(SLinkOperations.getTarget(SNodeOperations.cast(_2_apc, "jetbrains.mps.build.packaging.structure.BlockReference"), "block", false), "entry", true))).iterator();
                    case 8:
                      if (!(this._7__yield_x583g4_a0a0a0a0a0tg_it.hasNext())) {
                        this.__CP__ = 3;
                        break;
                      }
                      this._7__yield_x583g4_a0a0a0a0a0tg = this._7__yield_x583g4_a0a0a0a0a0tg_it.next();
                      this.__CP__ = 9;
                      break;
                    case 5:
                      if (SNodeOperations.isInstanceOf(_2_apc, "jetbrains.mps.build.packaging.structure.BlockReference")) {
                        this.__CP__ = 6;
                        break;
                      }
                      this.__CP__ = 11;
                      break;
                    case 10:
                      this.__CP__ = 8;
                      this.yield(_7__yield_x583g4_a0a0a0a0a0tg);
                      return true;
                    case 12:
                      this.__CP__ = 3;
                      this.yield(_2_apc);
                      return true;
                    case 0:
                      this.__CP__ = 2;
                      break;
                    case 4:
                      this.__CP__ = 5;
                      break;
                    case 6:
                      this.__CP__ = 7;
                      break;
                    case 9:
                      this.__CP__ = 10;
                      break;
                    case 11:
                      this.__CP__ = 12;
                      break;
                    default:
                      break __loop__;
                  }
                } while (true);
                return false;
              }
            };
          }
        };
      }
    }.invoke(SLinkOperations.getTargets(SLinkOperations.getTarget(_context.getNode(), "block", false), "entry", true));
  }

  public static SNode weaving_MappingRule_ContextNodeQuery_1234271391130(final IOperationContext opereationContext, final WeavingMappingRuleContext _context) {
    return _context.getOutputNodeByInputNodeAndMappingLabel(_context.getNode(), "ConfigurationToProject");
  }

  public static void mappingScript_CodeBlock_1217435006860(final IOperationContext operationContext, final MappingScriptContext _context) {
    List<SNode> layouts = SModelOperations.getRoots(_context.getModel(), "jetbrains.mps.build.packaging.structure.Layout");
    for (SNode layout : ListSequence.fromList(layouts)) {
      if (!(SPropertyOperations.getBoolean(layout, "compile"))) {
        continue;
      }
      List<SNode> modules = SNodeOperations.getDescendants(layout, "jetbrains.mps.build.packaging.structure.Module", false, new String[]{});
      Map<IModule, List<SNode>> map = MapSequence.fromMap(new LinkedHashMap<IModule, List<SNode>>(16, (float) 0.75, false));
      // fill map 
      for (SNode module : ListSequence.fromList(modules)) {
        IModule imodule = Module_Behavior.call_getModule_1213877515148(module);
        if (imodule == null) {
          _context.showErrorMessage(module, "Missing module " + SPropertyOperations.getString(module, "name") + ".");
          continue;
        }
        if ((imodule instanceof DevKit) || (!(imodule.isCompileInMPS()))) {
          continue;
        }
        List<SNode> modulesForIModule = MapSequence.fromMap(map).get(imodule);
        if (modulesForIModule == null) {
          modulesForIModule = new ArrayList<SNode>();
          MapSequence.fromMap(map).put(imodule, modulesForIModule);
        }
        ListSequence.fromList(modulesForIModule).addElement(module);
      }
      // calculate module cycles 
      Set<IModule> modulesToProcess = MapSequence.fromMap(map).keySet();
      Set<IModule> modulesCopy = SetSequence.fromSet(new LinkedHashSet());
      SetSequence.fromSet(modulesCopy).addSequence(SetSequence.fromSet(modulesToProcess).sort(new ISelector<IModule, Comparable<?>>() {
        public Comparable<?> select(IModule it) {
          return it.getModuleFqName();
        }
      }, true));
      List<Set<IModule>> sm = (List<Set<IModule>>) StronglyConnectedModules.getInstance().getStronglyConnectedComponents(modulesCopy);
      // say to all modules it's cycle 
      SNode lastCycle = null;
      List<SNode> result = ListSequence.fromList(new ArrayList<SNode>(ListSequence.fromList(sm).count()));
      for (Set<IModule> moduleSet : ListSequence.fromList(sm)) {
        SNode cycle = SConceptOperations.createNewNode("jetbrains.mps.build.packaging.structure.ModuleCycle", null);
        ListSequence.fromList(result).addElement(cycle);
        // add dependency to the previous cycle so that compilation order would be preserved 
        if (lastCycle != null) {
          SNode ref = SConceptOperations.createNewNode("jetbrains.mps.build.packaging.structure.ModuleCycleReference", null);
          SLinkOperations.setTarget(ref, "cycle", lastCycle, false);
          ListSequence.fromList(SLinkOperations.getTargets(cycle, "dependency", true)).addElement(ref);
        }
        lastCycle = cycle;
        Iterable<IModule> sortedModuleSet = SetSequence.fromSet(moduleSet).sort(new ISelector<IModule, Comparable<?>>() {
          public Comparable<?> select(IModule it) {
            return it.getModuleFqName();
          }
        }, true);
        SPropertyOperations.set(cycle, "name", _context.createUniqueName("cycle." + Sequence.fromIterable(sortedModuleSet).first().getModuleFqName(), layout));
        for (IModule imodule : Sequence.fromIterable(sortedModuleSet)) {
          List<SNode> modulesForIModule = MapSequence.fromMap(map).get(imodule);
          for (SNode module : ListSequence.fromList(modulesForIModule)) {
            SNode ref = SConceptOperations.createNewNode("jetbrains.mps.build.packaging.structure.NewModuleReference", null);
            SLinkOperations.setTarget(ref, "module", module, false);
            SLinkOperations.addChild(cycle, "moduleReference", ref);
          }
        }
      }
      ListSequence.fromList(SLinkOperations.getTargets(layout, "cycle", true)).addSequence(ListSequence.fromList(result).sort(new ISelector<SNode, Comparable<?>>() {
        public Comparable<?> select(SNode it) {
          return SPropertyOperations.getString(SLinkOperations.getTarget(ListSequence.fromList(SLinkOperations.getTargets(it, "moduleReference", true)).first(), "module", false), "name");
        }
      }, true));
    }
  }

  public static void mappingScript_CodeBlock_1219229087938(final IOperationContext operationContext, final MappingScriptContext _context) {
    List<SNode> holders = SModelOperations.getRoots(_context.getModel(), "jetbrains.mps.build.packaging.structure.IMacroHolder");
    for (SNode holder : ListSequence.fromList(holders)) {
      List<String> allMAcroNames = IMacroHolder_Behavior.call_getAllMacroNames_1234975567387(holder, true);
      SLinkOperations.removeAllChildren(holder, "macro");
      for (String macroName : ListSequence.fromList(allMAcroNames)) {
        SNode macro = SConceptOperations.createNewNode("jetbrains.mps.build.packaging.structure.Macro", null);
        SPropertyOperations.set(macro, "name", macroName);
        SPropertyOperations.set(macro, "path", IMacroHolder_Behavior.call_evaluateMacro_1234975967990(holder, macroName).replace("\\", Util.SEPARATOR));
        SLinkOperations.addChild(holder, "macro", macro);
      }
    }
  }

  public static void mappingScript_CodeBlock_1238426776124(final IOperationContext operationContext, final MappingScriptContext _context) {
    // <node> 
    List<SNode> layouts = SModelOperations.getRoots(_context.getModel(), "jetbrains.mps.build.packaging.structure.Layout");
    for (SNode layout : ListSequence.fromList(layouts)) {
      Set<IModule> modules = SetSequence.fromSet(new HashSet<IModule>());
      for (SNode m : ListSequence.fromList(Layout_Behavior.call_getModules_1213877228340(layout))) {
        SetSequence.fromSet(modules).addElement(Module_Behavior.call_getModule_1213877515148(m));
      }
      for (IModule module : SetSequence.fromSet(modules)) {
        Set<IModule> dependency = module.getDependenciesManager().getAllDependOnModules();
        if (module instanceof DevKit) {
          DevKit d = (DevKit) module;
          dependency.addAll(d.getAllExportedLanguages());
          dependency.addAll(d.getAllExportedSolutions());
          dependency.addAll(d.getAllExtendedDevkits());
        }
        for (IModule dependent : SetSequence.fromSet(dependency)) {
          if (!(dependent instanceof Generator) && !(SetSequence.fromSet(modules).contains(dependent)) && !(dependent.isPackaged()) && dependent.getDescriptorFile() != null && dependent.isCompileInMPS()) {
            String errorText = "Required module " + dependent.getModuleFqName() + " is absent. Used by module " + module.getModuleFqName() + ".";
            System.err.println(errorText);
            _context.showErrorMessage(null, errorText);
          }
        }
      }
    }
  }

  public static void mappingScript_CodeBlock_9027273598492288378(final IOperationContext operationContext, final MappingScriptContext _context) {
    // blocks aren't generated so we delete them 
    for (SNode block : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), "jetbrains.mps.build.packaging.structure.Block"))) {
      SNodeOperations.deleteNode(block);
    }
  }

  public static void mappingScript_CodeBlock_5934900624260317374(final IOperationContext operationContext, final MappingScriptContext _context) {
    for (SNode root : ListSequence.fromList(SModelOperations.getRoots(_context.getModel(), null))) {
      for (SNode module : ListSequence.fromList(SNodeOperations.getDescendants(root, "jetbrains.mps.build.packaging.structure.Module", false, new String[]{}))) {
        if (Module_Behavior.call_getModule_1213877515148(module) == null) {
          _context.showErrorMessage(module, "Module not found");
        }
      }
    }
  }
}
