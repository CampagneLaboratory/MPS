package jetbrains.mps.ide.newSolutionDialog;

/*Generated by MPS */

import jetbrains.mps.project.Solution;
import jetbrains.mps.vfs.IFile;
import jetbrains.mps.project.MPSProject;
import jetbrains.mps.project.structure.modules.SolutionDescriptor;
import jetbrains.mps.project.structure.model.ModelRoot;
import jetbrains.mps.project.persistence.SolutionDescriptorPersistence;

public class NewModuleUtil {
  public NewModuleUtil() {
  }

  public static Solution createNewSolution(final IFile solutionFile, MPSProject project) {
    solutionFile.createNewFile();
    SolutionDescriptor solutionDescriptor = new SolutionDescriptor();
    solutionDescriptor.setExternallyVisible(true);
    String fileName = solutionFile.getName();
    solutionDescriptor.setNamespace(fileName.substring(0, fileName.length() - 4));
    ModelRoot modelRoot = new ModelRoot();
    modelRoot.setPrefix("");
    modelRoot.setPath(solutionFile.getParent().getAbsolutePath());
    solutionDescriptor.getModelRoots().add(modelRoot);
    SolutionDescriptorPersistence.saveSolutionDescriptor(solutionFile, solutionDescriptor);
    return project.addProjectSolution(solutionFile);
  }
}
