package jetbrains.mps.ide.actions;

/*Generated by MPS */

import jetbrains.mps.ide.findusages.model.CategoryKind;
import jetbrains.mps.ide.messages.Icons;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.ide.findusages.model.SearchResult;
import jetbrains.mps.util.Pair;

public class ModelCheckerIssue {
  public static final CategoryKind CATEGORY_KIND_SEVERITY = new CategoryKind("Severity", Icons.ERROR_ICON, "Group by severity");
  public static final CategoryKind CATEGORY_KIND_ISSUE_TYPE = new CategoryKind("Issue type", Icons.ERROR_ICON, "Group by issue type");

  private SNode myNode;
  private String myMessage;
  private IModelCheckerFix myFix;

  public ModelCheckerIssue(SNode node, String message, IModelCheckerFix fix) {
    this.myNode = node;
    this.myMessage = message;
    this.myFix = fix;
  }

  public ModelCheckerIssue(SNode node, String message) {
    this(node, message, null);
  }

  public SNode getNode() {
    return this.myNode;
  }

  public String getMessage() {
    return this.myMessage;
  }

  public boolean fix() {
    if (this.myFix != null && !(this.myNode.isDeleted())) {
      return this.myFix.doFix();
    } else {
      return false;
    }
  }

  public boolean isFixable() {
    return this.myFix != null;
  }

  public static SearchResult<ModelCheckerIssue> getSearchResult(SNode node, String message, IModelCheckerFix fix, String severity, String issueType) {
    ModelCheckerIssue issue = new ModelCheckerIssue(node, message, fix);
    return new SearchResult<ModelCheckerIssue>(issue, node, new Pair<CategoryKind, String>(CATEGORY_KIND_SEVERITY, severity), new Pair<CategoryKind, String>(CATEGORY_KIND_ISSUE_TYPE, issueType));
  }
}
