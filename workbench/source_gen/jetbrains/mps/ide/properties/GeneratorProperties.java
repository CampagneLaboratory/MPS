package jetbrains.mps.ide.properties;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.project.structure.modules.ModuleReference;
import jetbrains.mps.project.structure.modules.mappingpriorities.MappingPriorityRule;
import jetbrains.mps.workbench.dialogs.project.components.parts.lists.ListsFactory;
import jetbrains.mps.project.structure.modules.ModuleDescriptor;
import jetbrains.mps.project.structure.modules.GeneratorDescriptor;

public class GeneratorProperties extends ModuleProperties {
  private List<ModuleReference> myDepGenerators;
  private List<MappingPriorityRule> myPriorityRules;

  public GeneratorProperties() {
    this.myDepGenerators = ListsFactory.create(ListsFactory.MODULE_REF_COMPARATOR);
    this.myPriorityRules = (List) ListsFactory.create(ListsFactory.IGNORING_COMPARATOR);
  }

  public List<ModuleReference> getDepGenerators() {
    return this.myDepGenerators;
  }

  public List<MappingPriorityRule> getPriorityRules() {
    return this.myPriorityRules;
  }

  @Override
  public void loadFrom(ModuleDescriptor descriptor) {
    assert descriptor instanceof GeneratorDescriptor;
    super.loadFrom(descriptor);
    GeneratorDescriptor d = (GeneratorDescriptor) descriptor;
    for (ModuleReference ref : d.getDepGenerators()) {
      this.myDepGenerators.add(ref);
    }
    for (MappingPriorityRule rule : d.getPriorityRules()) {
      this.myPriorityRules.add((rule != null ?
        rule.getCopy() :
        null
      ));
    }
  }

  @Override
  public void saveTo(ModuleDescriptor descriptor) {
    assert descriptor instanceof GeneratorDescriptor;
    super.saveTo(descriptor);
    GeneratorDescriptor d = (GeneratorDescriptor) descriptor;
    d.getDepGenerators().clear();
    d.getDepGenerators().addAll(this.myDepGenerators);
    d.getPriorityRules().clear();
    d.getPriorityRules().addAll(this.myPriorityRules);
  }
}
