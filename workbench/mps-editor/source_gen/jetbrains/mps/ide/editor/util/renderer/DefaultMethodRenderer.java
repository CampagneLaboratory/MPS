package jetbrains.mps.ide.editor.util.renderer;

/*Generated by MPS */

import jetbrains.mps.ide.navigation.NodeNavigatable;
import jetbrains.mps.smodel.ModelAccess;
import jetbrains.mps.util.Computable;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.smodel.SNodePointer;
import jetbrains.mps.smodel.MPSModuleRepository;

public class DefaultMethodRenderer extends DefaultNodeRenderer {
  public DefaultMethodRenderer() {
  }
  @Override
  public String getElementText(final NodeNavigatable element) {
    return ModelAccess.instance().runReadAction(new Computable<String>() {
      @Override
      public String compute() {
        SNode labelNode = getLabelNode(element);
        if (SNodeOperations.isInstanceOf(labelNode, MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xfc367388b3L, "jetbrains.mps.baseLanguage.structure.EnumConstantDeclaration"))) {
          if (SNodeOperations.isInstanceOf(SNodeOperations.getParent(labelNode), MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xfc367070a5L, "jetbrains.mps.baseLanguage.structure.EnumClass"))) {
            return "Enum constant '" + labelNode.getName() + "' in " + SNodeOperations.getParent(labelNode).getPresentation();
          }
        }
        return labelNode.getPresentation();
      }
    });
  }
  @Override
  protected SNode getLabelNode(NodeNavigatable element) {
    SNode node = ((SNodePointer) element.getNodePointer()).resolve(MPSModuleRepository.getInstance());
    if (node == null) {
      return null;
    }
    SNode parentNode = SNodeOperations.getParent(node);
    return parentNode;
  }
}
