package jetbrains.mps.workbench.dialogs.project.components.parts.creators;

/*Generated by MPS */

import jetbrains.mps.util.Computable;
import jetbrains.mps.project.structure.model.ModelRootDescriptor;
import jetbrains.mps.workbench.dialogs.project.IBindedDialog;
import jetbrains.mps.vfs.IFile;
import jetbrains.mps.ide.ui.filechoosers.treefilechooser.TreeFileChooser;
import jetbrains.mps.project.SModelRoot;

public class ModelRootChooser implements Computable<ModelRootDescriptor> {
  private final IBindedDialog myOwner;
  private IFile myBundleHome;

  public ModelRootChooser(IBindedDialog owner, IFile bundleHome) {
    myOwner = owner;
    myBundleHome = bundleHome;
  }

  public ModelRootDescriptor compute() {
    TreeFileChooser chooser = new TreeFileChooser();
    chooser.setInitialFile(myBundleHome);
    chooser.setMode(TreeFileChooser.MODE_FILES_AND_DIRECTORIES);
    IFile dir = chooser.showDialog(myOwner.getMainComponent());
    if (dir == null) {
      return null;
    }
    SModelRoot result = new SModelRoot(null);
    result.setPath(dir.getPath());
    return result.toDescriptor();
  }
}
