package jetbrains.mps.runConfigurations.behavior;

/*Generated by MPS */

import jetbrains.mps.smodel.SNode;
import jetbrains.mps.project.IModule;
import jetbrains.mps.plugins.MacrosUtil;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.util.NodeNameUtil;
import jetbrains.mps.lang.core.behavior.INamedConcept_Behavior;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;

public class IconPath_Behavior {
  public static void init(SNode thisNode) {
  }

  public static boolean call_isResourceIcon_3931156975943044388(SNode thisNode, IModule module) {
    String fullPath = MacrosUtil.expandPath(SPropertyOperations.getString(thisNode, "path"), module.getModuleFqName());
    for (String source : ListSequence.fromList(module.getSourcePaths())) {
      String prefix = IconPath_Behavior.call_getPrefix_3931156975942961996(thisNode, source);
      if (fullPath.contains(prefix)) {
        return true;
      }
    }
    return false;
  }

  public static String call_getIconResourcePath_3931156975942961964(SNode thisNode, IModule module) {
    String fullPath = MacrosUtil.expandPath(SPropertyOperations.getString(thisNode, "path"), module.getModuleFqName());
    for (String source : ListSequence.fromList(module.getSourcePaths())) {
      String prefix = IconPath_Behavior.call_getPrefix_3931156975942961996(thisNode, source);
      if (fullPath.contains(prefix)) {
        int index = fullPath.indexOf(prefix);
        return fullPath.substring(index + prefix.length() + 1);
      }
    }
    throw new RuntimeException("Icon path " + SPropertyOperations.getString(thisNode, "path") + " does not lie inside module " + module + " sources.");
  }

  public static String call_getPrefix_3931156975942961996(SNode thisNode, String sourcePath) {
    return sourcePath + "/" + NodeNameUtil.getNamespace(INamedConcept_Behavior.call_getFqName_1213877404258(SNodeOperations.cast(SNodeOperations.getContainingRoot(thisNode), "jetbrains.mps.lang.core.structure.INamedConcept"))).replace(".", "/");
  }
}
