package jetbrains.mps.ide.platform.actions.core;

/*Generated by MPS */

import java.util.List;
import org.jetbrains.mps.openapi.module.SRepository;
import org.jetbrains.mps.openapi.module.SearchScope;
import jetbrains.mps.ide.findusages.model.SearchResult;
import org.jetbrains.mps.openapi.model.SNode;

public interface RefactoringParticipant<InitialDataObject, FinalDataObject, RP extends RefactoringParticipant<InitialDataObject, FinalDataObject, RP>> {

  public String getId();
  public String getDescription();

  public List<? extends RefactoringParticipant.Change<InitialDataObject, FinalDataObject, RP>> getChanges(InitialDataObject initialState, SRepository repository, SearchScope searchScope);

  public static interface Change<InitialDataObject, FinalDataObject, RP extends RefactoringParticipant<InitialDataObject, FinalDataObject, RP>> {
    public RP getParticipant();
    public SearchResult getSearchResult();
    public boolean needsToPreserveOldNode();
    public void confirm(FinalDataObject finalState, SRepository repository, RefactoringSession refactoringSession);
  }

  public SNode serializeInitialState(InitialDataObject initialState);
  public InitialDataObject deserializeInitialState(SNode serialized);
  public SNode serializeFinalState(FinalDataObject finalState);
  public FinalDataObject deserializeFinalState(SNode serialized);

}
