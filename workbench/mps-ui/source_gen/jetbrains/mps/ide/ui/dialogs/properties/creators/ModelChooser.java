package jetbrains.mps.ide.ui.dialogs.properties.creators;

/*Generated by MPS */

import jetbrains.mps.util.Computable;
import java.util.List;
import jetbrains.mps.smodel.SModelReference;
import jetbrains.mps.smodel.ModelAccess;
import org.jetbrains.mps.openapi.model.SModel;
import jetbrains.mps.FilteredGlobalScope;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.internal.collections.runtime.ISelector;
import jetbrains.mps.ide.ui.dialogs.properties.choosers.CommonChoosers;

public class ModelChooser implements Computable<List<SModelReference>> {
  public ModelChooser() {
  }

  @Override
  public List<SModelReference> compute() {
    List<SModelReference> models = ModelAccess.instance().runReadAction(new Computable<List<SModelReference>>() {
      @Override
      public List<SModelReference> compute() {
        Iterable<SModel> descriptors = new FilteredGlobalScope().getModelDescriptors();
        return Sequence.fromIterable(descriptors).select(new ISelector<SModel, SModelReference>() {
          public SModelReference select(SModel it) {
            return it.getReference();
          }
        }).toListSequence();
      }
    });
    return CommonChoosers.showDialogModelCollectionChooser(null, models, null);
  }
}
