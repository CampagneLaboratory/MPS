package jetbrains.mps.lang.behavior.generator.template.util;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.smodel.persistence.def.v9.IdEncoder;
import jetbrains.mps.smodel.behaviour.BehaviorReflection;

/**
 * TODO need to be moved to the behavior of the ConceptBehavior after MPS project rebuilt
 */
public final class MethodNameHelper {
  private final SNode myMethodDecl;

  public MethodNameHelper(@NotNull SNode methodDecl) {
    myMethodDecl = methodDecl;
  }

  @NotNull
  public String getGeneratedString() {
    return getGeneratedName() + "_id" + getGeneratedId();
  }

  @NotNull
  public String getGeneratedName() {
    return SPropertyOperations.getString(getBaseMethod(), MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name"));
  }

  @NotNull
  public String getGeneratedId() {
    SNode baseMethod = getBaseMethod();
    return new IdEncoder().toText(baseMethod.getNodeId());
  }

  private SNode getBaseMethod() {
    SNode baseMethod = myMethodDecl;
    if (BehaviorReflection.invokeNonVirtual((Class<SNode>) ((Class) Object.class), myMethodDecl, "jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration", "call_getBaseMethod_5014346297260519893", new Object[]{}) != null) {
      baseMethod = BehaviorReflection.invokeNonVirtual((Class<SNode>) ((Class) Object.class), myMethodDecl, "jetbrains.mps.baseLanguage.structure.BaseMethodDeclaration", "call_getBaseMethod_5014346297260519893", new Object[]{});
    }
    return baseMethod;
  }
}
