package jetbrains.mps.testHybridEditor.diagram.editor;

/*Generated by MPS */

import jetbrains.jetpad.projectional.view.TextView;
import java.awt.Font;
import jetbrains.jetpad.projectional.view.View;
import jetbrains.jetpad.geometry.Vector;
import java.awt.FontMetrics;
import java.awt.Toolkit;

public class MPSTextView extends TextView {
  private Font myFont;

  public MPSTextView(Font font) {
    myFont = font;
  }

  @Override
  protected void doValidate(View.ValidationContext context) {
    String text = text().get();
    Vector bounds = new Vector(textWidth(text), textHeight());
    context.bounds(new Vector(bounds.x + 1, bounds.y), textBaseLine());
  }

  private FontMetrics getFontMetrics() {
    return Toolkit.getDefaultToolkit().getFontMetrics(myFont);
  }

  public int textHeight() {
    return getFontMetrics().getHeight();
  }

  public int textBaseLine() {
    FontMetrics fm = getFontMetrics();
    return fm.getLeading() + fm.getAscent();
  }

  public int textWidth(String text) {
    return getFontMetrics().stringWidth(text);
  }



}
