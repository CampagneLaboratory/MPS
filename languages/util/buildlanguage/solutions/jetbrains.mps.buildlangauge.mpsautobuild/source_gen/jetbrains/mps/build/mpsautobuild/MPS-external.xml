<project name="MPS-external" default="main">
  <property file="${ant.file.MPS-external}/../MPS.properties" />
  <fail unless="build.number" message="Property build.number unspecified." />
  <fail unless="build.vcs.number" message="Property build.vcs.number unspecified." />
  <fail unless="teamcity.buildConfName" message="Property teamcity.buildConfName unspecified." />
  <fail unless="version" message="Property version unspecified." />
  <import file="${ant.file.MPS-external}/../MPS-compile.xml" />
  <import file="${ant.file.MPS-external}/../help-build.xml" />
  <import file="${ant.file.MPS-external}/../MPS-external.xml" />
  <import file="${ant.file.MPS-external}/../MPS-languages.xml" />
  <target name="main" depends="compile,clean.before,folders.create,do.the.job,clean.after" />
  <target name="compile">
    <antcall target="compile.all" />
  </target>
  <target name="clean">
    <property name="to.clean" value="${deploy.dir}" />
    <echo>Removing directory ${to.clean}</echo>
    <delete dir="${to.clean}" />
  </target>
  <target name="clean.before" depends="compile">
    <tstamp />
  </target>
  <target name="folders.create" depends="clean.before">
    <mkdir dir="${deploy.dir}" />
    <mkdir dir="${deploy.dir}/MPS/bin" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/MPSPlugin" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/core" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/languages" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/plugins" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/workbench" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/testbench" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources" />
    <mkdir dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-resources.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-resources_en.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-editor-api.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-boot.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-test.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib" />
    <mkdir dir="${deploy.dir}/MPS/license" />
    <mkdir dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsdevkit/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsdevkit/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsdevkit" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/migration.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/migration.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/samples.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/samples.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/cvsIntegration" />
    <mkdir dir="${deploy.dir}/MPS/plugins/git4idea" />
    <mkdir dir="${deploy.dir}/MPS/plugins/svn4ideaOld" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/solutions" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/solutions" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/migration" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/META-INF" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins" />
    <mkdir dir="${deploy.dir}/MPS/samples.zip.tmp/MPSSamples" />
    <mkdir dir="${deploy.dir}/MPS/samples.zip.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp/modules" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage" />
    <mkdir dir="${deploy.dir}/MPS/languages/languageDesign" />
    <mkdir dir="${deploy.dir}/MPS/languages/devkits" />
    <mkdir dir="${deploy.dir}/MPS/languages/execution" />
    <mkdir dir="${deploy.dir}/MPS/languages/make" />
    <mkdir dir="${deploy.dir}/MPS/languages/build" />
    <mkdir dir="${deploy.dir}/MPS/languages/util/ui" />
    <mkdir dir="${deploy.dir}/MPS/languages/util/editor" />
    <mkdir dir="${deploy.dir}/MPS/languages/util" />
    <mkdir dir="${deploy.dir}/MPS/languages" />
    <mkdir dir="${deploy.dir}/MPS/plugin" />
    <mkdir dir="${deploy.dir}/MPS/help-build.append.idea.version" />
    <mkdir dir="${deploy.dir}/MPS" />
    <mkdir dir="${deploy.dir}/help-build.pack.mps.src" />
    <mkdir dir="${deploy.dir}/${build.number}-buildTools.zip.tmp/tools" />
    <mkdir dir="${deploy.dir}/${build.number}-buildTools.zip.tmp/resources" />
    <mkdir dir="${deploy.dir}/${build.number}-buildTools.zip.tmp" />
  </target>
  <target name="do.the.job" depends="folders.create">
    <copy todir="${deploy.dir}/MPS/bin">
      <fileset dir="${mps_home}/bin" excludes="**/*.hprof, " />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib">
      <fileset dir="${mps_home}/lib" excludes="src/, **/*.zip, " />
    </copy>
    <antcall target="MPS-external.pack.branding_b1a" />
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/MPSPlugin">
      <fileset dir="${mps_home}/MPSPlugin" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/core">
      <fileset dir="${mps_home}/core" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/languages">
      <fileset dir="${mps_home}/languages" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/plugins">
      <fileset dir="${mps_home}/plugins" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/workbench">
      <fileset dir="${mps_home}/workbench" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources/testbench">
      <fileset dir="${mps_home}/testbench" excludes="**/sandbox/**, " includes="**/*.java, **/*.java" />
    </copy>
    <antcall target="help-build.repack.sources" inheritall="true">
      <param name="deploy.dir" value="${deploy.dir}" />
      <param name="input.dir" value="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources" />
      <param name="output.dir" value="${deploy.dir}/MPS/lib/MPS-src.zip.tmp" />
      <param name="base_dir" value="${base_dir}" />
    </antcall>
    <delete dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp/help-build.repack.sources" />
    <zip destfile="${deploy.dir}/MPS/lib/MPS-src.zip" duplicate="preserve" filesonly="true">
      <zipfileset dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp" includes="**/*.java" />
    </zip>
    <delete dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-resources.jar.tmp">
      <fileset dir="${mps_home}/workbench/resources/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/lib/mps-resources.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-resources.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-resources.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-resources_en.jar.tmp">
      <fileset dir="${mps_home}/workbench/resources_en/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/lib/mps-resources_en.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-resources_en.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-resources_en.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/analyzers/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/kernel/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/findUsages-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/refactoring-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/typesystemEngine/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/generator/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/core/make-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/baseLanguage/solutions/jetbrains.mps.baseLanguage.search/classes_gen" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-core.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/baseLanguage/solutions/jetbrains.mps.baseLanguage.util/classes" />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.analyzers.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.kernel" />
    <antcall target="MPS-languages.pack.jetbrains.mps.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.findUsages.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.refactoring.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.pattern.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.traceInfo" />
    <antcall target="MPS-languages.pack.jetbrains.mps.dataFlow.runtime" />
    <antcall target="MPS-languages.pack.stubUtils" />
    <antcall target="MPS-languages.pack.jetbrains.mps.typesystemEngine" />
    <antcall target="MPS-languages.pack.jetbrains.mps.generator" />
    <antcall target="MPS-languages.pack.jetbrains.mps.make.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.make" />
    <antcall target="MPS-languages.pack.jetbrains.mps.smodel.resources" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.search" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.util" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-core.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-editor-api.jar.tmp">
      <fileset dir="${mps_home}/editor/editor-api/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/lib/mps-editor-api.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-editor-api.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-editor-api.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp">
      <fileset dir="${mps_home}/editor/editor-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp">
      <fileset dir="${mps_home}/editor/actions-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp">
      <fileset dir="${mps_home}/editor/intentions-runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp">
      <fileset dir="${mps_home}/editor/typesystemIntegration/classes" />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.editor.runtime" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-editor.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp">
      <fileset dir="${mps_home}/workbench/baseLanguageIndex/classes_gen" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp">
      <fileset dir="${mps_home}/workbench/mps-platform/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp">
      <fileset dir="${mps_home}/workbench/mps-debugger/classes" />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.ide.platform" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.index" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-platform.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/languages/languageDesign/test/classes_gen" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/languages/util/runConfigurations/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/languages/util/uiLanguage/runtime/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/workbench/typesystemUi/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/workbench/mps-editor/classes" />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/workbench/mps-workbench/classes" excludes="idea/IdeaApplicationInfo.xml, " />
    </copy>
    <copy todir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp">
      <fileset dir="${mps_home}/MPSPlugin/apiclasses" />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.ide" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ide.editor" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ide.uiLanguage.runtime" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-workbench.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-boot.jar.tmp">
      <fileset dir="${mps_home}/startup/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/lib/mps-boot.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-boot.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-boot.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-test.jar.tmp">
      <fileset dir="${mps_home}/testbench/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/lib/mps-test.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-test.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-test.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/collections/runtime/classes" />
    </copy>
    <antcall target="MPS-languages.pack.collections.runtime" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-collections.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/closures/runtime/classes" />
    </copy>
    <antcall target="MPS-languages.pack.closures.runtime" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-closures.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/tuples/runtime/classes" />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.tuples.runtime" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-tuples.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp">
      <fileset dir="${mps_home}/core/ant/classes" includes="**/*.class, **/*.xml, " />
    </copy>
    <echo file="${deploy.dir}/MPS/lib/mps-backend.jar.tmp/build.number">build.number=${build.number}${line.separator}date=${DSTAMP}${line.separator}revision.number=${build.vcs.number}${line.separator}configuration.name=${teamcity.buildConfName}${line.separator}version=${version}</echo>
    <antcall target="MPS-languages.pack.jetbrains.mps.ant" />
    <mkdir dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/lib/mps-backend.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/lib" />
    <copy todir="${deploy.dir}/MPS/license">
      <fileset dir="${mps_home}/license" />
    </copy>
    <copy todir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp">
      <fileset dir="${mps_home}/plugins/ideaIntegration/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1a3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/ideaIntegration.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/vcs.jar.tmp">
      <fileset dir="${mps_home}/plugins/vcs/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1b3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/vcs.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/mpsdevkit/META-INF">
      <fileset dir="${mps_home}/plugins/mpsdevkit/META-INF" excludes="**/*.zip, " includes="**/plugin.xml, " />
    </copy>
    <antcall target="MPS-languages.pack.jetbrains.mps.ide.mpsdevkit" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsdevkit/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsdevkit" />
    <copy todir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp">
      <fileset dir="${mps_home}/plugins/mpsmake/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1d3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/mpsmake.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/migration.jar.tmp">
      <fileset dir="${mps_home}/plugins/migration/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1e3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/migration.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/migration.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/migration.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/migration.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp">
      <fileset dir="${mps_home}/plugins/mpsjava/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1f3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/mpsjava.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp">
      <fileset dir="${mps_home}/plugins/modelchecker/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1g3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/modelchecker.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/samples.jar.tmp">
      <fileset dir="${mps_home}/plugins/samples/classes" />
    </copy>
    <antcall target="MPS-external.replace_a1h3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/samples.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/samples.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/samples.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/samples.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/plugins/cvsIntegration">
      <fileset dir="${mps_home}/plugins/cvsIntegration" excludes="**/*.zip, " />
    </copy>
    <copy todir="${deploy.dir}/MPS/plugins/git4idea">
      <fileset dir="${mps_home}/plugins/git4idea" excludes="**/*.zip, " />
    </copy>
    <copy todir="${deploy.dir}/MPS/plugins/svn4ideaOld">
      <fileset dir="${mps_home}/plugins/svn4ideaOld" excludes="**/*.zip, " />
    </copy>
    <copy todir="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar.tmp">
      <fileset dir="${mps_home}/plugins/debugger-api/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/lib" />
    <antcall target="MPS-external.replace_a1l3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/META-INF" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.api.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.api.api" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api/solutions" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-api" />
    <copy todir="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar.tmp">
      <fileset dir="${mps_home}/plugins/debugger-java/classes" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/lib" />
    <antcall target="MPS-external.replace_a1m3a" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/META-INF" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.java.api" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.java.runtime" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/solutions" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.java.customViewers" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.java.evaluation" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.java.privateMembers" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java/languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins/debugger-java" />
    <copy todir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp">
      <fileset dir="${base_dir}/plugins/debugger-java-customViewers/languages/customViewers/classes_gen" />
    </copy>
    <copy file="${base_dir}/plugins/debugger-java-customViewers/languages/customViewers/source_gen/jetbrains/mps/debugger/java/customViewers/plugin/plugin/plugin.xml" tofile="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp/META-INF/plugin.xml" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp/META-INF" />
    <jar destfile="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp" />
    <copy file="${base_dir}/plugins/debugger-api-languages/languages/jetbrains.mps.debugger.api.languages.plugin/source_gen/jetbrains/mps/debugger/api/languages/plugin/plugin.xml" tofile="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/META-INF/plugin.xml" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/META-INF" />
    <antcall target="MPS-languages.pack.jetbrains.mps.debugger.api.lang" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/languages" />
    <copy todir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar.tmp">
      <fileset dir="${base_dir}/plugins/debugger-api-languages/languages/jetbrains.mps.debugger.api.languages.plugin/classes_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin" />
    <copy file="${base_dir}/plugins/execution-configurations/languages/plugin/source_gen/jetbrains/mps/execution/configurations/implementation/plugin/plugin/plugin.xml" tofile="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/META-INF/plugin.xml" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/META-INF" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.execution.util" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.execution.startup" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.unitTest.execution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ant.execution" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.migration" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/migration" />
    <copy todir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar.tmp">
      <fileset dir="${base_dir}/plugins/execution-configurations/languages/plugin/classes_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin" />
    <copy file="${base_dir}/plugins/execution-languages/languages/plugin/source_gen/jetbrains/mps/execution/languages/plugin/plugin.xml" tofile="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/META-INF/plugin.xml" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/META-INF" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.commands" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.configurations" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.configurations.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.configurations.deprecated" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.configurations.deprecated.runtime" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/languages" />
    <copy todir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar.tmp">
      <fileset dir="${base_dir}/plugins/execution-languages/languages/plugin/classes_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar.tmp" excludes="" />
    </jar>
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib" />
    <mkdir dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages" />
    <mkdir dir="${deploy.dir}/MPS/plugins" />
    <copy todir="${deploy.dir}/MPS/samples.zip.tmp/MPSSamples">
      <fileset dir="${mps_home}/samples" />
    </copy>
    <zip destfile="${deploy.dir}/MPS/samples.zip" duplicate="preserve" filesonly="true">
      <zipfileset dir="${deploy.dir}/MPS/samples.zip.tmp" />
    </zip>
    <delete dir="${deploy.dir}/MPS/samples.zip.tmp" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguageInternal" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.blTypes" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.checkedDots" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.jdk7" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.classifiers" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.closures" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.collections" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.javadoc" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.logging" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.unitTest" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.unitTest.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.unitTest.libs" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.tuples" />
    <copy todir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/collections/runtime/source_gen.gwt" />
    </copy>
    <antcall target="MPS-languages.pack.collections.runtime.gwt" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp/modules" />
    <jar destfile="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/collections/runtime/source_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/closures/runtime/source_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar.tmp" />
    <copy todir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar.tmp">
      <fileset dir="${mps_home}/languages/baseLanguage/tuples/runtime/source_gen" />
    </copy>
    <jar destfile="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar" duplicate="preserve" filesonly="true">
      <fileset dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar.tmp" />
    </jar>
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar.tmp" />
    <mkdir dir="${deploy.dir}/MPS/languages/baseLanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.actions" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.behavior" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.constraints" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.editor.editorTest" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.editor" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.findUsages" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.typesystem" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.intentions" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.dataFlow" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.pattern" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.pattern.testLang" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.quotation" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.plugin" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.sharedConcepts" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.smodel" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.extension" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.script" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.structure" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.core" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.refactoring" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.generator" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.generator.generationContext" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.generator.generationParameters" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.test" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.test.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.textGen" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.traceable" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.stubs" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.smodelTests" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.project" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.descriptor" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.core.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.structure.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.behavior.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.generator.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.intentions.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.plugin.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.quotation.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.script.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.smodel.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.test.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.traceable.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.typesystem.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.dataFlow.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.make.facet" />
    <antcall target="MPS-languages.pack.jetbrains.mps.make.facet.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.make.script" />
    <antcall target="MPS-languages.pack.typesystemIntegration" />
    <mkdir dir="${deploy.dir}/MPS/languages/languageDesign" />
    <antcall target="MPS-languages.pack.jetbrains.mps.devkit.general-purpose" />
    <antcall target="MPS-languages.pack.jetbrains.mps.devkit.language-design" />
    <antcall target="MPS-languages.pack.jetbrains.mps.devkit.bootstrap-languages" />
    <mkdir dir="${deploy.dir}/MPS/languages/devkits" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.api" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.common" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.settings" />
    <antcall target="MPS-languages.pack.jetbrains.mps.execution.util" />
    <mkdir dir="${deploy.dir}/MPS/languages/execution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.reduced" />
    <mkdir dir="${deploy.dir}/MPS/languages/make" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.workflow" />
    <antcall target="MPS-languages.pack.jetbrains.mps.core.xml" />
    <antcall target="MPS-languages.pack.jetbrains.mps.core.properties" />
    <antcall target="MPS-languages.pack.jetbrains.mps.traceInfo.cache" />
    <mkdir dir="${deploy.dir}/MPS/languages/build" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xml.deprecated" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xml.deprecated.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.uiLanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.uiLanguage.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ide.uiLanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.modeling" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.modeling.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.internal" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.gwt" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.gwt.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swing" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swing.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swing.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swt" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swt.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ui.swt.runtime" />
    <mkdir dir="${deploy.dir}/MPS/languages/util/ui" />
    <antcall target="MPS-languages.pack.jetbrains.mps.buildlanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.custommps" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.custommps.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.generictasks" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.generictasks.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.packaging" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.packaging.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.dependency" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.property" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.gentest" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.gentest.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.startup" />
    <antcall target="MPS-languages.pack.jetbrains.mps.build.mpsdist" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xml" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xmlQuery" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xmlInternal" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xmlSchema" />
    <antcall target="MPS-languages.pack.jetbrains.mps.xmlUnitTest" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.regexp" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.regexp.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.regexp.examples" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.extensionMethods" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.collections.trove" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.contracts" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.overloadedOperators" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.constructors" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.builders" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.editor.table" />
    <antcall target="MPS-languages.pack.jetbrains.mps.lang.editor.table.runtime" />
    <mkdir dir="${deploy.dir}/MPS/languages/util/editor" />
    <antcall target="MPS-languages.pack.ypath.main" />
    <antcall target="MPS-languages.pack.ypath.test" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ypath" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ypath.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.ypath.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.bash" />
    <antcall target="MPS-languages.pack.jetbrains.mps.quickQueryLanguage" />
    <antcall target="MPS-languages.pack.jetbrains.mps.quickQueryLanguage.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.quickQuery.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.gwt.client" />
    <antcall target="MPS-languages.pack.jetbrains.mps.gtext" />
    <antcall target="MPS-languages.pack.jetbrains.mps.gtext.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.gtext.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.analyzers" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.dates" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.dates.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.datesInternal" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.dates.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.math" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.math.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.math.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.money" />
    <antcall target="MPS-languages.pack.jetbrains.mps.baseLanguage.money.runtime" />
    <antcall target="MPS-languages.pack.jetbrains.mps.platform.conf" />
    <antcall target="MPS-languages.pack.jetbrains.mpslite" />
    <antcall target="MPS-languages.pack.jetbrains.mpslite.pluginSolution" />
    <antcall target="MPS-languages.pack.jetbrains.mps.nanoj" />
    <antcall target="MPS-languages.pack.collections_trove.runtime" />
    <mkdir dir="${deploy.dir}/MPS/languages/util" />
    <mkdir dir="${deploy.dir}/MPS/languages" />
    <copy todir="${deploy.dir}/MPS/plugin">
      <fileset dir="${mps_home}/plugin" excludes="**/*.java, " />
    </copy>
    <echo file="${deploy.dir}/MPS/help-build.append.idea.version/build.number">build.number=${build.number}${line.separator}date=${DSTAMP}${line.separator}revision.number=${build.vcs.number}${line.separator}configuration.name=${teamcity.buildConfName}${line.separator}version=${version}</echo>
    <antcall target="help-build.append.idea.version" inheritall="true">
      <param name="deploy.dir" value="${deploy.dir}" />
      <param name="input.dir" value="${deploy.dir}/MPS/help-build.append.idea.version" />
      <param name="output.dir" value="${deploy.dir}/MPS" />
      <param name="base_dir" value="${base_dir}" />
    </antcall>
    <delete dir="${deploy.dir}/MPS/help-build.append.idea.version" />
    <copy file="${mps_home}/entryPoints.xml" tofile="${deploy.dir}/MPS/entryPoints.xml" />
    <copy file="${mps_home}/readme.txt" tofile="${deploy.dir}/MPS/readme.txt" />
    <copy file="${mps_home}/releaseNotes.txt" tofile="${deploy.dir}/MPS/releaseNotes.txt" />
    <copy file="${mps_home}/about.txt" tofile="${deploy.dir}/MPS/about.txt" />
    <mkdir dir="${deploy.dir}/MPS" />
    <antcall target="help-build.pack.mps.src" inheritall="true">
      <param name="deploy.dir" value="${deploy.dir}" />
      <param name="input.dir" value="${deploy.dir}/help-build.pack.mps.src" />
      <param name="output.dir" value="${deploy.dir}/" />
      <param name="base_dir" value="${base_dir}" />
    </antcall>
    <delete dir="${deploy.dir}/help-build.pack.mps.src" />
    <copy todir="${deploy.dir}/${build.number}-buildTools.zip.tmp/tools">
      <fileset dir="${mps_home}/build/tools" excludes="**/SignCode.exe, **/sign.code.jar, **/signtool.exe, " />
    </copy>
    <copy todir="${deploy.dir}/${build.number}-buildTools.zip.tmp/resources">
      <fileset dir="${mps_home}/build/resources" excludes="**/*.spc, **/*.pvk, **/*.pw, **/*.pfx, " />
    </copy>
    <zip destfile="${deploy.dir}/${build.number}-buildTools.zip" duplicate="preserve" filesonly="true">
      <zipfileset dir="${deploy.dir}/${build.number}-buildTools.zip.tmp" />
    </zip>
    <delete dir="${deploy.dir}/${build.number}-buildTools.zip.tmp" />
  </target>
  <target name="clean.after" depends="do.the.job">
    <delete dir="${deploy.dir}/MPS/lib/MPS-src.zip.tmp" />
    <delete dir="${deploy.dir}/MPS/samples.zip.tmp" />
    <delete dir="${deploy.dir}/${build.number}-buildTools.zip.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-resources.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-resources_en.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-core.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-editor-api.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-editor.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-platform.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-workbench.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-boot.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-test.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-collections.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-closures.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-tuples.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/lib/mps-backend.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/vcs.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/migration.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/samples.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/debugger-api/lib/debugger-api.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/debugger-java/lib/debugger-java.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.java.customViewers.plugin.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.debugger.api.languages.plugin/lib/jetbrains.mps.debugger.api.languages.plugin.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.configurations.implementation.plugin/lib/jetbrains.mps.execution.configurations.implementation.plugin.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/plugins/jetbrains.mps.execution.languages/lib/jetbrains.mps.execution.languages.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime.gwt-src.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.collections.runtime-src.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.closures.runtime-src.jar.tmp" />
    <delete dir="${deploy.dir}/MPS/languages/baseLanguage/jetbrains.mps.baseLanguage.tuples.runtime-src.jar.tmp" />
  </target>
  <target name="replace_a1a3a">
    <copy file="${mps_home}/plugins/ideaIntegration/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/ideaIntegration.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1b3a">
    <copy file="${mps_home}/plugins/vcs/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/vcs.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/vcs.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1d3a">
    <copy file="${mps_home}/plugins/mpsmake/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/mpsmake.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1e3a">
    <copy file="${mps_home}/plugins/migration/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/migration.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/migration.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1f3a">
    <copy file="${mps_home}/plugins/mpsjava/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/mpsjava.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1g3a">
    <copy file="${mps_home}/plugins/modelchecker/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/modelchecker.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1h3a">
    <copy file="${mps_home}/plugins/samples/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/samples.jar.tmp/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/samples.jar.tmp/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1l3a">
    <copy file="${mps_home}/plugins/debugger-api/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/debugger-api/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/debugger-api/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="replace_a1m3a">
    <copy file="${mps_home}/plugins/debugger-java/META-INF/plugin.xml" tofile="${deploy.dir}/MPS/plugins/debugger-java/META-INF/plugin.xml" />
    <replace file="${deploy.dir}/MPS/plugins/debugger-java/META-INF/plugin.xml" token="../classes/" value="/" />
  </target>
  <target name="pack.branding_b1a">
    <property name="tmpdir" value="${java.io.tmpdir}/branding_b1a_0" />
    <property name="idea.application.info" value="${tmpdir}/IdeaApplicationInfo.xml" />
    <mkdir dir="${tmpdir}/" />
    <loadfile srcfile="${scripts.dir}/branding_b1a.xml" property="idea.application.info.contents">
      <filterchain>
        <expandproperties />
      </filterchain>
    </loadfile>
    <echo file="${idea.application.info}">${idea.application.info.contents}</echo>
    <jar destfile="${deploy.dir}/MPS/lib/branding.jar" duplicate="preserve" compress="true">
      <zipfileset file="${idea.application.info}" prefix="idea" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/MPS_16.png" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/MPS_32.png" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/jetbrains/mps/workbench/icons/splash.png" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/jetbrains/mps/workbench/icons/mpsAbout.png" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/jetbrains/mps/workbench/icons/mpsWelcomeCaption.png" />
      <zipfileset file="${mps_home}/workbench/mps-workbench/source/jetbrains/mps/workbench/icons/mpsSlogan.png" />
    </jar>
    <delete dir="${tmpdir}" />
  </target>
</project>
