package jetbrains.mps.testbench.junit.runners;

/*Generated by MPS */

import org.junit.runners.model.Statement;
import java.util.List;
import java.util.ArrayList;
import org.junit.runners.model.MultipleFailureException;

public class InitEnvironmentStatement extends Statement {
  private Statement myPrev;

  public InitEnvironmentStatement(Statement prev) {
    myPrev = prev;
  }

  public void evaluate() throws Throwable {
    List<Throwable> errors = new ArrayList<Throwable>();
    try {
      MpsTestsSupport.initEnv(true);
      MpsTestsSupport.loadDummyProject();
      MpsTestsSupport.loadAllModulesIntoRepository();

      if (myPrev != null) {
        myPrev.evaluate();
      }
    } catch (Throwable th) {
      errors.add(th);
    }
    MultipleFailureException.assertEmpty(errors);
  }
}
