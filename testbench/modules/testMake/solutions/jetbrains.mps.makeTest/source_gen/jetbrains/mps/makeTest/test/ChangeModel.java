package jetbrains.mps.makeTest.test;

/*Generated by MPS */

import jetbrains.mps.smodel.DefaultSModel;
import jetbrains.mps.smodel.SModel;
import jetbrains.mps.smodel.CopyUtil;
import jetbrains.mps.smodel.SModelRepository;
import jetbrains.mps.smodel.DefaultSModelDescriptor;
import jetbrains.mps.smodel.loading.ModelLoadingState;

public abstract class ChangeModel {
  private DefaultSModel myModel;

  public ChangeModel() {
  }

  public void change(SModel model) {
    this.myModel = new DefaultSModel(model.getReference());
    CopyUtil.copyModelContentAndPreserveIds(model, myModel);
    CopyUtil.copyModelProperties(model, myModel);
  }

  public void rollback(SModel model) {
    SModelRepository.getInstance().replaceModel((DefaultSModelDescriptor) model.getModelDescriptor(), this.myModel, ModelLoadingState.FULLY_LOADED);
  }
}
