<!--
  ~ Copyright 2003-2010 JetBrains s.r.o.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<project name="test" default="default" basedir="../">
  <property name="build.dir" location="build"/>
  <property name="build.tmp" location="${build.dir}/tmp/tests"/>
  <property name="build.distribution" location="${build.dir}/artifacts/mpsDistribution"/>
  <loadproperties srcfile="${build.distribution}/build.properties"/>
  <property name="mps.zip" location="${build.distribution}/${mps.build.number}.zip"/>
  <property name="mps_build_home" location="${build.tmp}/MPS ${mpsBootstrapCore.version}"/>

  <target name="unpack">
    <unzip src="${mps.zip}" dest="${build.tmp}"/>
  </target>

  <target name="module-tests" depends="unpack">
    <ant antfile="build/tests/mpsTestModules.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsEditor.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsEditorDiagram.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsImplementationStripping.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsGenerator.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsSModel.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsBaseLanguage.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsJava.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsBuild.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsActions.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsExecution.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
    <ant antfile="build/tests/mpsPackaged.xml" inheritAll="true" useNativeBasedir="true">
      <target name="build"/>
      <target name="check"/>
      <property name="mps_home" value="${mps_build_home}"/>
    </ant>
  </target>

  <target name="default" depends="module-tests"/>
</project>
