package jetbrains.mps.tool.environment;

/*Generated by MPS */

import org.jetbrains.annotations.NotNull;
import jetbrains.mps.project.Project;
import java.io.File;
import jetbrains.mps.core.platform.Platform;

/**
 * Intended to be used in headless runs, represents working MPS environment.
 * Currently it is cached for all tests in the case of group test runs (suites).
 * To initialize environment in a lazy way (trying to get cached environment if available) please
 * 
 * TODO consider merging all the project creation methods
 * 
 * @see jetbrains.mps.tool.environment.EnvironmentContainer 
 */
public interface Environment extends Retainable {
  /**
   * Creates and opens an empty project
   * 
   * @return newly created Project.
   */
  @NotNull
  public Project createEmptyProject();

  /**
   * Creates a project and opens it according to the given strategy
   * 
   * @return newly created Project constructed as the strategy suggests. It is already opened.
   */
  @NotNull
  public Project createProject(@NotNull ProjectStrategy strategy);

  @NotNull
  public Project openProject(@NotNull File projectFile);

  public void init();

  /**
   * disposes the environment, uses ref counting (!)
   */
  public void dispose();

  /**
   * flushes all #invokeAndLater calls and all ModelAccess event queue if needed
   */
  public void flushAllEvents();

  /**
   * 
   * @return MPS (its platform aspect) of this tooling environment, not null when initialized.
   */
  public Platform getPlatform();
}
