package jetbrains.mps.baseLanguage.textGen;

/*Generated by MPS */

import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.TreeSet;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import org.jdom.Element;

public class Dependency implements Comparable<Dependency> {
  private static final String CLASS_NAME = "className";
  private static final String DEPEND_CLASS = "classNode";
  private static final String DEPEND_CLASS_NAME = "dependClassName";
  private static final String EXTENDS_CLASS_NAME = "extendsClassName";

  private Set<String> myDependNodes = SetSequence.fromSet(new TreeSet<String>());
  private Set<String> myExtendsNodes = SetSequence.fromSet(new TreeSet<String>());
  private String myClassName;

  public Dependency(String nodeName, List<String> dependNodes, List<String> extendsNodes) {
    this.myClassName = nodeName;
    if (dependNodes != null) {
      SetSequence.fromSet(this.myDependNodes).addSequence(ListSequence.fromList(dependNodes));
    }
    if (extendsNodes != null) {
      SetSequence.fromSet(this.myExtendsNodes).addSequence(ListSequence.fromList(extendsNodes));
    }
  }
  public Dependency(Element element) {
    this.myClassName = element.getAttribute(CLASS_NAME).getValue();
    for (Element e : ((List<Element>)element.getChildren(DEPEND_CLASS))) {
      if (e == null) {
        continue;
      }
      if (e.getAttribute(DEPEND_CLASS_NAME) != null) {
        SetSequence.fromSet(this.myDependNodes).addElement(e.getAttribute(DEPEND_CLASS_NAME).getValue());
      }
      if (e.getAttribute(EXTENDS_CLASS_NAME) != null) {
        SetSequence.fromSet(this.myExtendsNodes).addElement(e.getAttribute(EXTENDS_CLASS_NAME).getValue());
      }
    }
  }

  public void saveTo(Element element) {
    element.setAttribute(CLASS_NAME, this.myClassName);
    for (String dependNodeName : this.myDependNodes) {
      Element e = new Element(DEPEND_CLASS);
      e.setAttribute(DEPEND_CLASS_NAME, dependNodeName);
      element.addContent(e);
    }
    for (String dependNodeName : this.myExtendsNodes) {
      Element e = new Element(DEPEND_CLASS);
      e.setAttribute(EXTENDS_CLASS_NAME, dependNodeName);
      element.addContent(e);
    }
  }

  public Set<String> getAllDependencies() {
    return this.myDependNodes;
  }

  public Set<String> getExtends() {
    return this.myExtendsNodes;
  }

  public String getClassName() {
    return this.myClassName;
  }

  public int compareTo(Dependency p0) {
    if (p0 == null || this.myClassName == null || p0.myClassName == null) {
      return 0;
    }
    return this.myClassName.compareTo(p0.myClassName);
  }
}
