package jetbrains.mps.graphLayout.layeredLayout;

/*Generated by MPS */

import jetbrains.mps.graphLayout.algorithms.Dfs;
import java.util.Map;
import jetbrains.mps.graphLayout.graph.Node;
import jetbrains.mps.graphLayout.graph.Graph;

public class DFSNodeSorter extends Dfs implements INodeSorter {
  private NodeLayers myNodeLayers;
  private Map<Node, Integer> myDfsState;
  private NodeLayeredOrder myLayeredOrder;

  public DFSNodeSorter() {
  }

  public NodeLayeredOrder sortNodes(Graph graph, NodeLayers nodeLayers) {
    myNodeLayers = nodeLayers;
    myLayeredOrder = new NodeLayeredOrder(graph);
    doDfs(graph);
    return myLayeredOrder;
  }

  @Override
  protected void preprocess(Node node) {
    myLayeredOrder.addLast(node, myNodeLayers.get(node));
  }
}
