package jetbrains.mps.transformation.test.outputLang.generator.baseLanguage.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.TemplateMappingConfiguration;
import java.util.Collection;
import jetbrains.mps.generator.runtime.TemplateReductionRule;
import jetbrains.mps.generator.runtime.TemplateCreateRootRule;
import jetbrains.mps.generator.runtime.TemplateRootMappingRule;
import jetbrains.mps.smodel.SNode;
import jetbrains.mps.generator.runtime.TemplateExecutionEnvironment;
import jetbrains.mps.generator.runtime.TemplateContext;
import jetbrains.mps.generator.runtime.GenerationException;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import java.util.Collections;
import jetbrains.mps.generator.runtime.TemplateUtil;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import jetbrains.mps.generator.runtime.ReferenceResolver;
import jetbrains.mps.generator.template.ITemplateGenerator;
import jetbrains.mps.generator.template.ReferenceMacroContext;
import jetbrains.mps.generator.template.PropertyMacroContext;

public class Mappingmain implements TemplateMappingConfiguration {
  public Mappingmain() {
  }

  public Collection<TemplateReductionRule> getReductionRules() {
    return null;
  }

  public Collection<TemplateCreateRootRule> getCreateRules() {
    return null;
  }

  public Collection<TemplateRootMappingRule> getRootRules() {
    return null;
  }

  public class ReductionRule0 implements TemplateReductionRule {
    public ReductionRule0() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      final SNode tnode1 = new SNode(null, "jetbrains.mps.transformation.test.outputLang.structure.OutputNode", false);
      // TODO notify environment 
      tnode1.setProperty("text", "wrapper created by reduction 1");
      {
        final SNode inputNode2 = QueriesGenerated.sourceNodeQuery_1209604320455(null, new SourceSubstituteMacroNodeContext(context.getInput(), null, context, null));
        Collection<SNode> tlist3 = environment.copyNodes(Collections.singletonList(inputNode2), null);
        for (SNode child4 : tlist3) {
          tnode1.addChild("outputChild", child4);
        }
      }
      return TemplateUtil.singletonList(tnode1);
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.OutputNode_forDontApplyReductionTwice_test";
    }
  }

  public class ReductionRule1 implements TemplateReductionRule {
    public ReductionRule1() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      if (!(QueriesGenerated.baseMappingRule_Condition_8900764248744322639(environment.getOperationContext(), new BaseMappingRuleContext(context.getInput(), null, null)))) {
        return null;
      }
      final SNode inputNode1 = QueriesGenerated.sourceNodeQuery_1473665232107485240(null, new SourceSubstituteMacroNodeContext(context.getInput(), null, context, null));
      Collection<SNode> tlist2 = environment.copyNodes(Collections.singletonList(inputNode1), null);
      TemplateContext context3 = context.subContext("sd");
      final SNode tnode4 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableReference", false);
      // TODO notify environment 
      environment.resolve(new ReferenceResolver() {
        public Object resolve(SNode outputNode, TemplateContext context, ITemplateGenerator generator) {
          return QueriesGenerated.referenceMacro_GetReferent_1473665232107455264(environment.getOperationContext(), new ReferenceMacroContext(context.getInput(), tnode4, null, context, generator));
        }
      }, tnode4, "variableDeclaration", context3);
      Collection<SNode> tlist5 = TemplateUtil.asList(tlist2, tnode4);
      return tlist5;
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.OutputNode";
    }
  }

  public class ReductionRule2 implements TemplateReductionRule {
    public ReductionRule2() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      final SNode tnode1 = new SNode(null, "jetbrains.mps.transformation.test.outputLang.structure.OutputNode", false);
      // TODO notify environment 
      tnode1.setProperty("text", "wrapper created by reduction 2");
      {
        final SNode inputNode2 = QueriesGenerated.sourceNodeQuery_1209662301920(null, new SourceSubstituteMacroNodeContext(context.getInput(), null, context, null));
        Collection<SNode> tlist3 = environment.copyNodes(Collections.singletonList(inputNode2), null);
        for (SNode child4 : tlist3) {
          tnode1.addChild("outputChild", child4);
        }
      }
      return TemplateUtil.singletonList(tnode1);
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.OutputNode_forDontApplyReductionTwice_test";
    }
  }

  public class ReductionRule3 implements TemplateReductionRule {
    public ReductionRule3() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      final SNode tnode1 = new SNode(null, "jetbrains.mps.baseLanguage.structure.IntegerConstant", false);
      // TODO notify environment 
      tnode1.setProperty("value", "42");
      return TemplateUtil.singletonList(tnode1);
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.CustomStatementRef";
    }
  }

  public class ReductionRule4 implements TemplateReductionRule {
    public ReductionRule4() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      final SNode tnode1 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement", false);
      // TODO notify environment 
      {
        final SNode tnode2 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration", false);
        // TODO notify environment 
        tnode2.setProperty("name", (String) QueriesGenerated.propertyMacro_GetPropertyValue_6010543442198681251(null, new PropertyMacroContext(context.getInput(), null, null, context, null)));
        {
          final SNode tnode3 = new SNode(null, "jetbrains.mps.baseLanguage.structure.IntegerType", false);
          // TODO notify environment 
          tnode2.addChild("type", tnode3);
        }
        tnode1.addChild("localVariableDeclaration", tnode2);
      }
      final SNode tnode4 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement", false);
      // TODO notify environment 
      {
        final SNode tnode5 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration", false);
        // TODO notify environment 
        tnode5.setProperty("name", (String) QueriesGenerated.propertyMacro_GetPropertyValue_6010543442198681260(null, new PropertyMacroContext(context.getInput(), null, null, context, null)));
        {
          final SNode tnode6 = new SNode(null, "jetbrains.mps.baseLanguage.structure.IntegerType", false);
          // TODO notify environment 
          tnode5.addChild("type", tnode6);
        }
        {
          final SNode tnode7 = new SNode(null, "jetbrains.mps.baseLanguage.structure.MulExpression", false);
          // TODO notify environment 
          {
            final SNode tnode8 = new SNode(null, "jetbrains.mps.baseLanguage.structure.LocalVariableReference", false);
            // TODO notify environment 
            environment.resolveInTemplateLater(tnode8, "variableDeclaration", "tpl/r:00000000-0000-4000-0000-011c89590606/6010543442198681234", context);
            tnode7.addChild("leftExpression", tnode8);
          }
          {
            final SNode tnode9 = new SNode(null, "jetbrains.mps.baseLanguage.structure.IntegerConstant", false);
            // TODO notify environment 
            tnode9.setProperty("value", "2");
            tnode7.addChild("rightExpression", tnode9);
          }
          tnode5.addChild("initializer", tnode7);
        }
        tnode4.addChild("localVariableDeclaration", tnode5);
      }
      Collection<SNode> tlist10 = TemplateUtil.asList(tnode1, tnode4);
      return tlist10;
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.TwoVarStatement";
    }
  }

  public class RootMappingRule0 implements TemplateRootMappingRule {
    public RootMappingRule0() {
    }

    public Collection<SNode> apply(final TemplateExecutionEnvironment environment, final TemplateContext context) throws GenerationException {
      final SNode tnode1 = new SNode(null, "jetbrains.mps.baseLanguage.structure.ClassConcept", false);
      // TODO notify environment 
      tnode1.setProperty("name", "RootCustom");
      {
        final SNode tnode2 = new SNode(null, "jetbrains.mps.baseLanguage.structure.InstanceMethodDeclaration", false);
        // TODO notify environment 
        tnode2.setProperty("name", "main");
        {
          final SNode tnode3 = new SNode(null, "jetbrains.mps.baseLanguage.structure.VoidType", false);
          // TODO notify environment 
          tnode2.addChild("returnType", tnode3);
        }
        {
          final SNode tnode4 = new SNode(null, "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
          // TODO notify environment 
          tnode2.addChild("visibility", tnode4);
        }
        {
          final SNode inputNode5 = QueriesGenerated.sourceNodeQuery_4146564171992412788(null, new SourceSubstituteMacroNodeContext(context.getInput(), null, context, null));
          Collection<SNode> tlist6 = environment.copyNodes(Collections.singletonList(inputNode5), null);
          for (SNode child7 : tlist6) {
            tnode2.addChild("body", child7);
          }
        }
        tnode1.addChild("method", tnode2);
      }
      {
        final SNode tnode8 = new SNode(null, "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
        // TODO notify environment 
        tnode1.addChild("visibility", tnode8);
      }
      {
        final SNode tnode9 = new SNode(null, "jetbrains.mps.baseLanguage.structure.ConstructorDeclaration", false);
        // TODO notify environment 
        {
          final SNode tnode10 = new SNode(null, "jetbrains.mps.baseLanguage.structure.VoidType", false);
          // TODO notify environment 
          tnode9.addChild("returnType", tnode10);
        }
        {
          final SNode tnode11 = new SNode(null, "jetbrains.mps.baseLanguage.structure.PublicVisibility", false);
          // TODO notify environment 
          tnode9.addChild("visibility", tnode11);
        }
        {
          final SNode tnode12 = new SNode(null, "jetbrains.mps.baseLanguage.structure.StatementList", false);
          // TODO notify environment 
          tnode9.addChild("body", tnode12);
        }
        tnode1.addChild("constructor", tnode9);
      }
      return TemplateUtil.singletonList(tnode1);
    }

    public boolean applyToInheritors() {
      return false;
    }

    public String getApplicableConcept() {
      return "jetbrains.mps.transformation.test.outputLang.structure.CustomRoot";
    }

    public boolean keepSourceRoot() {
      return false;
    }
  }
}
