<component xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="/idea/PlatformActions.xml" xpointer="xpointer(/component/*)"/>
  <xi:include href="/idea/VcsActions.xml" xpointer="xpointer(/component/*)"/>

  <actions>
    <group>
      <action id="NewProject" class="jetbrains.mps.workbench.actions.NewMPSProjectAction" text="New MPS Project"/>
      <action id="OpenProject" class="jetbrains.mps.workbench.actions.OpenMPSProjectAction" text="Open MPS Project"/>
      <add-to-group anchor="first" group-id="FileMenu"/>
    </group>

    <group id="GenerateMenu" popup="true" text="Ge_nerate">
      <add-to-group group-id="MainMenu" anchor="after" relative-to-action="GoToMenu"/>
    </group>

    <group id="BuildMenu" popup="true" text="Build">
      <add-to-group group-id="MainMenu" anchor="after" relative-to-action="GenerateMenu"/>
    </group>

    <group id="MPSHelpMenu">
      <add-to-group group-id="HelpMenu" anchor="after" relative-to-action="OnlineDocAction"/>
    </group>

    <group id="EditorFix">
      <!--We need this only cause platform requires this action, and NPE is thrown if
      the action is not in its place (see MPS-2081 for further details) -->
      <action id="EditorSelectWord" class="com.intellij.openapi.editor.actions.SelectWordAtCaretAction"/>
      <add-to-group group-id="EditMenu" anchor="last"/>
    </group>

    <group id="VcsMappingsFix">
      <!--fix MPS-2142-->
      <action id="NewElement" class="com.intellij.ide.actions.NewElementAction"/>
      <action id="IncrementalSearch" class="com.intellij.codeInsight.navigation.actions.IncrementalSearchAction"/>
    </group>

    <!--fix MPS-2156 after fixing MPS-2142-->
    <group id="NewGroup" popup="true">
    </group>

    <group>
      <separator/>
      <action id="AddMPSModelImportAction" class="jetbrains.mps.workbench.actions.imports.AddModelImportAction"
              text="Add Model Import">
        <keyboard-shortcut first-keystroke="control M" keymap="$default"/>
      </action>
      <action id="AddMPSLanguageImportAction" class="jetbrains.mps.workbench.actions.imports.AddLanguageImportAction"
              text="Add Language Import">
        <keyboard-shortcut first-keystroke="control L" keymap="$default"/>
      </action>

      <add-to-group anchor="last" group-id="EditMenu"/>
    </group>

    <group>
      <separator/>
      <action id="ShowInFileView" class="jetbrains.mps.vcs.actions.ShowInFileView" text="Show In File System View"/>
      <action id="ShowInVcsRootsView" class="jetbrains.mps.vcs.actions.ShowInVcsRootsView" text="Show In VCS Roots View"/>
      <add-to-group group-id="ChangesViewPopupMenu" anchor="last"/>
    </group>

    <group id="SearchMenu" popup="true">
      <action id="Find" class="com.intellij.openapi.editor.actions.IncrementalFindAction"
              icon="/actions/menu-find.png"/>
      <action id="Replace" class="com.intellij.openapi.editor.actions.ReplaceAction" icon="/actions/menu-replace.png"/>
      <action id="FindNext" class="com.intellij.ide.actions.SearchAgainAction"/>
      <action id="FindPrevious" class="com.intellij.ide.actions.SearchBackAction"/>
      <action id="FindWordAtCaret" class="com.intellij.openapi.editor.actions.FindWordAtCaretAction"/>
      <separator/>
      <action id="FindUsages" class="com.intellij.find.actions.FindUsagesAction"/>
      <action id="ShowUsages" class="com.intellij.find.actions.ShowUsagesAction"/>
      <action id="FindUsagesInFile" class="com.intellij.find.actions.FindUsagesInFileAction"/>
      <action id="HighlightUsagesInFile" class="com.intellij.codeInsight.highlighting.actions.HighlightUsagesAction"/>
      <group id="ShowRecentFindUsagesGroup" class="com.intellij.find.impl.ShowRecentFindUsagesGroup" popup="true"/>
      <separator/>
      <!--<action id="FindInPath" class="com.intellij.find.actions.FindInPathAction"/>-->
      <action id="ReplaceInPath" class="com.intellij.find.actions.ReplaceInPathAction"/>
    </group>
  </actions>
</component>
