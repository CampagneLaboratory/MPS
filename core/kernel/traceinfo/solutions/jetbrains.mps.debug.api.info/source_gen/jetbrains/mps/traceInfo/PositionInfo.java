package jetbrains.mps.traceInfo;

/*Generated by MPS */

import org.jdom.Element;
import org.jdom.DataConversionException;
import jetbrains.mps.util.InternUtil;
import org.jetbrains.annotations.Nullable;
import org.jdom.Attribute;

public class PositionInfo implements Comparable<PositionInfo> {
  private static String FILE_NAME = "fileName";
  private static String START_LINE = "startLine";
  private static String START_POSITION = "startPosition";
  private static String END_LINE = "endLine";
  private static String END_POSITION = "endPosition";
  private static String NODE_ID = "nodeId";
  private static String CONCEPT_FQ_NAME = "conceptFqName";
  private static String PROPERTY_STRING = "propertyString";

  private String myFileName;
  private String myNodeId;
  private String myConceptFqName;
  private String myPropertyString;
  private int myStartLine;
  private int myStartPosition;
  private int myEndLine;
  private int myEndPosition;

  public PositionInfo() {
  }

  public PositionInfo(Element element) throws DataConversionException {
    this.myNodeId = check_1myh1n_a0a0b(element.getAttribute(PositionInfo.NODE_ID));
    this.myConceptFqName = InternUtil.intern(check_1myh1n_a0a1a1(element.getAttribute(CONCEPT_FQ_NAME)));
    this.myFileName = InternUtil.intern(check_1myh1n_a0a2a1(element.getAttribute(FILE_NAME)));
    this.myStartLine = element.getAttribute(PositionInfo.START_LINE).getIntValue();
    this.myStartPosition = element.getAttribute(PositionInfo.START_POSITION).getIntValue();
    this.myEndLine = element.getAttribute(PositionInfo.END_LINE).getIntValue();
    this.myEndPosition = element.getAttribute(PositionInfo.END_POSITION).getIntValue();
    this.myPropertyString = element.getAttributeValue(PositionInfo.PROPERTY_STRING);
  }

  @Nullable
  public String getFileName() {
    return this.myFileName;
  }

  @Nullable
  public String getNodeId() {
    return this.myNodeId;
  }

  public int getStartLine() {
    return this.myStartLine;
  }

  public int getStartPosition() {
    return this.myStartPosition;
  }

  public int getEndLine() {
    return this.myEndLine;
  }

  public int getEndPosition() {
    return this.myEndPosition;
  }

  public String getPropertyString() {
    return myPropertyString;
  }

  public void setFileName(String fileName) {
    this.myFileName = InternUtil.intern(fileName);
  }

  public void setNodeId(String nodeIf) {
    this.myNodeId = nodeIf;
  }

  public void setStartLine(int startLine) {
    this.myStartLine = startLine;
  }

  public void setStartPosition(int startPosition) {
    this.myStartPosition = startPosition;
  }

  public void setEndLine(int endLine) {
    this.myEndLine = endLine;
  }

  public void setEndPosition(int endPosition) {
    this.myEndPosition = endPosition;
  }

  public void setPropertyString(String propertyString) {
    this.myPropertyString = propertyString;
  }

  public String getFileAndLine() {
    return this.myFileName + ":" + (this.myStartLine + 1);
  }

  public int getLineDistance() {
    return this.myEndLine - this.myStartLine;
  }

  public void saveTo(Element element) {
    if (myNodeId != null) {
      element.setAttribute(PositionInfo.NODE_ID, this.myNodeId);
    }
    if (myConceptFqName != null) {
      element.setAttribute(PositionInfo.CONCEPT_FQ_NAME, this.myConceptFqName);
    }
    if (myPropertyString != null) {
      element.setAttribute(PROPERTY_STRING, this.myPropertyString);
    }
    element.setAttribute(PositionInfo.FILE_NAME, this.myFileName);
    element.setAttribute(PositionInfo.START_LINE, Integer.toString(this.myStartLine));
    element.setAttribute(PositionInfo.START_POSITION, Integer.toString(this.myStartPosition));
    element.setAttribute(PositionInfo.END_LINE, Integer.toString(this.myEndLine));
    element.setAttribute(PositionInfo.END_POSITION, Integer.toString(this.myEndPosition));
  }

  public String toString() {
    return this.myFileName + "(" + this.myStartLine + ":" + this.myStartPosition + " " + this.myEndLine + ":" + this.myEndPosition + ")";
  }

  public int compareTo(PositionInfo p) {
    if (eq_1myh1n_a0a0s(this.getLineDistance(), p.getLineDistance())) {
      if (eq_1myh1n_a0a0a0s(this.myStartLine, p.myStartLine)) {
        if (eq_1myh1n_a0a0a0a0s(this.myStartPosition, p.myStartPosition)) {
          if (myNodeId == null) {
            return -1;
          }
          if (p.myNodeId == null) {
            return 1;
          }
          return this.myNodeId.compareTo(p.myNodeId);
        } else {
          return this.myStartPosition - p.myStartPosition;
        }
      } else {
        return this.myStartLine - p.myStartLine;
      }
    } else {
      return this.getLineDistance() - p.getLineDistance();
    }
  }

  public boolean isOccupyTheSameSpace(PositionInfo p) {
    return (eq_1myh1n_a0a0a0a0t(myStartLine, p.myStartLine)) && (eq_1myh1n_a0a0a0a0t_0(myEndLine, p.myEndLine)) && (eq_1myh1n_a0a0a0a91(myStartPosition, p.myStartPosition)) && (eq_1myh1n_a0a0a0t(myEndPosition, p.myEndPosition));
  }

  public void fillFrom(PositionInfo position) {
    this.myNodeId = position.myNodeId;
    this.myFileName = position.myFileName;
    this.myStartLine = position.myStartLine;
    this.myStartPosition = position.myStartPosition;
    this.myEndLine = position.myEndLine;
    this.myEndPosition = position.myEndPosition;
    this.myPropertyString = position.myPropertyString;
    this.myConceptFqName = position.myConceptFqName;
  }

  @Nullable
  public String getConceptFqName() {
    return myConceptFqName;
  }

  public void setConceptFqName(String conceptFqName) {
    myConceptFqName = InternUtil.intern(conceptFqName);
  }

  private static String check_1myh1n_a0a0b(Attribute p) {
    if (null == p) {
      return null;
    }
    return p.getValue();
  }

  private static String check_1myh1n_a0a1a1(Attribute p) {
    if (null == p) {
      return null;
    }
    return p.getValue();
  }

  private static String check_1myh1n_a0a2a1(Attribute p) {
    if (null == p) {
      return null;
    }
    return p.getValue();
  }

  private static boolean eq_1myh1n_a0a0s(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0a0s(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0s(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0a0t(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0a0t_0(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0a91(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }

  private static boolean eq_1myh1n_a0a0a0t(Object a, Object b) {
    return (a != null ?
      a.equals(b) :
      a == b
    );
  }
}
