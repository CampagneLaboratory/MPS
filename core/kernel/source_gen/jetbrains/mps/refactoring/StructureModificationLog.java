package jetbrains.mps.refactoring;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import jetbrains.mps.smodel.SModelReference;
import jetbrains.mps.internal.collections.runtime.MapSequence;

public class StructureModificationLog {
  private List<StructureModification> myDataList = ListSequence.<StructureModification>fromList(new ArrayList<StructureModification>());

  public StructureModificationLog() {
  }

  public List<StructureModification> getHistory() {
    return myDataList;
  }

  public void addStructureModification(StructureModification data) {
    ListSequence.<StructureModification>fromList(myDataList).addElement(data);
  }

  public int getLatestVersion(SModelReference modelRef) {
    if (ListSequence.<StructureModification>fromList(myDataList).count() == 0) {
      return -1;
    }
    return MapSequence.<SModelReference,Integer>fromMap(ListSequence.<StructureModification>fromList(myDataList).last().getDependencies()).get(modelRef) + 1;
  }
}
